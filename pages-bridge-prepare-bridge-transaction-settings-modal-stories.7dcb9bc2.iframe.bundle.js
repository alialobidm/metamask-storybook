"use strict";(globalThis.webpackChunkmetamask_crx=globalThis.webpackChunkmetamask_crx||[]).push([[18410],{"./ui/pages/bridge/prepare/bridge-transaction-settings-modal.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{DefaultStory:()=>DefaultStory,__namedExportsOrder:()=>__namedExportsOrder,default:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),react_redux__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react-redux/es/index.js"),_store_store__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./ui/store/store.ts"),_bridge_transaction_settings_modal__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./ui/pages/bridge/prepare/bridge-transaction-settings-modal.tsx"),_test_data_bridge_mock_bridge_store__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./test/data/bridge/mock-bridge-store.ts");function _define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var storybook={title:"Pages/Bridge/TransactionSettingsModal",component:_bridge_transaction_settings_modal__WEBPACK_IMPORTED_MODULE_3__.s},DefaultStory=function(){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_bridge_transaction_settings_modal__WEBPACK_IMPORTED_MODULE_3__.s,{isOpen:!0,onClose:function(){}})};DefaultStory.storyName="Default",DefaultStory.decorators=[function(Story){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(react_redux__WEBPACK_IMPORTED_MODULE_1__.Kq,{store:(0,_store_store__WEBPACK_IMPORTED_MODULE_2__.A)((0,_test_data_bridge_mock_bridge_store__WEBPACK_IMPORTED_MODULE_4__.$)({bridgeSliceOverrides:{toNativeExchangeRate:1,toTokenExchangeRate:.99,slippage:.5},bridgeStateOverrides:{quotes:[]},metamaskStateOverrides:{currencyRates:{ETH:{conversionRate:2514.5}},marketData:{"0x1":_define_property({},"0x0b2C639c533813f4Aa9D7837CAf62653d097Ff85",{price:39762010419237126e-20,contractPercentChange1d:.004,priceChange1d:4e-5})}}}))},react__WEBPACK_IMPORTED_MODULE_0__.createElement(Story,null))}];let __WEBPACK_DEFAULT_EXPORT__=storybook;DefaultStory.parameters={...DefaultStory.parameters,docs:{...DefaultStory.parameters?.docs,source:{originalSource:"() => {\n  return <BridgeTransactionSettingsModal isOpen={true} onClose={() => {}} />;\n}",...DefaultStory.parameters?.docs?.source}}};let __namedExportsOrder=["DefaultStory"]},"./ui/hooks/useCurrencyDisplay.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Ke:()=>MIN_AMOUNT,Vi:()=>DEFAULT_PRECISION,pf:()=>useCurrencyDisplay});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),bignumber_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/bignumber.js/bignumber.js"),bignumber_js__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(bignumber_js__WEBPACK_IMPORTED_MODULE_1__),_helpers_utils_confirm_tx_util__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./ui/helpers/utils/confirm-tx.util.ts"),_selectors_multichain__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./ui/selectors/multichain.ts"),_shared_modules_conversion_utils__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./shared/modules/conversion.utils.ts"),_shared_constants_network__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./shared/constants/network.ts"),_shared_modules_Numeric__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./shared/modules/Numeric.ts"),_shared_constants_common__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./shared/constants/common.ts"),_helpers_utils_token_util__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./ui/helpers/utils/token-util.js"),_ducks_metamask_metamask__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./ui/ducks/metamask/metamask.js"),_useMultichainSelector__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./ui/hooks/useMultichainSelector.ts");function _object_without_properties(source,excluded){if(null==source)return{};var key,i,target=_object_without_properties_loose(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],!(excluded.indexOf(key)>=0)&&Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function _object_without_properties_loose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}var MIN_AMOUNT=1e-6,MIN_AMOUNT_DISPLAY="<".concat(MIN_AMOUNT),DEFAULT_PRECISION=new(bignumber_js__WEBPACK_IMPORTED_MODULE_1___default())(MIN_AMOUNT).decimalPlaces();function formatEthCurrencyDisplay(param){var isNativeCurrency=param.isNativeCurrency,isUserPreferredCurrency=param.isUserPreferredCurrency,currency=param.currency,nativeCurrency=param.nativeCurrency,inputValue=param.inputValue,conversionRate=param.conversionRate,denomination=param.denomination,numberOfDecimals=param.numberOfDecimals;if(!isNativeCurrency&&(isUserPreferredCurrency||nativeCurrency)){if(isUserPreferredCurrency&&conversionRate)return(0,_helpers_utils_confirm_tx_util__WEBPACK_IMPORTED_MODULE_2__.vv)((0,_shared_modules_conversion_utils__WEBPACK_IMPORTED_MODULE_4__.gh)({value:inputValue,fromCurrency:nativeCurrency,toCurrency:currency,conversionRate:conversionRate,numberOfDecimals:numberOfDecimals||2,toDenomination:denomination}),currency)}else{var ethDisplayValue=new _shared_modules_Numeric__WEBPACK_IMPORTED_MODULE_6__.e(inputValue,16,_shared_constants_common__WEBPACK_IMPORTED_MODULE_7__.sk.WEI).toDenomination(denomination||_shared_constants_common__WEBPACK_IMPORTED_MODULE_7__.sk.ETH).round(numberOfDecimals||DEFAULT_PRECISION).toBase(10).toString();return"0"===ethDisplayValue&&inputValue&&0!==Number(inputValue)?MIN_AMOUNT_DISPLAY:ethDisplayValue}return null}function formatNonEvmAssetCurrencyDisplay(param){var tokenSymbol=param.tokenSymbol,isNativeCurrency=param.isNativeCurrency,isUserPreferredCurrency=param.isUserPreferredCurrency,currency=param.currency,currentCurrency=param.currentCurrency,nativeCurrency=param.nativeCurrency,inputValue=param.inputValue,conversionRate=param.conversionRate;if(isNativeCurrency||!isUserPreferredCurrency&&!nativeCurrency)return new _shared_modules_Numeric__WEBPACK_IMPORTED_MODULE_6__.e(inputValue,10).toString();if(isUserPreferredCurrency&&conversionRate){var _getTokenFiatAmount,amount=null!==(_getTokenFiatAmount=(0,_helpers_utils_token_util__WEBPACK_IMPORTED_MODULE_8__.aQ)(1,Number(conversionRate),currentCurrency,inputValue,tokenSymbol,!1,!1))&&void 0!==_getTokenFiatAmount?_getTokenFiatAmount:"0";return(0,_helpers_utils_confirm_tx_util__WEBPACK_IMPORTED_MODULE_2__.vv)(amount,currency)}return null}function useCurrencyDisplay(inputValue,_param){var suffix,chainId=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,account=_param.account,displayValue=_param.displayValue,prefix=_param.prefix,numberOfDecimals=_param.numberOfDecimals,denomination=_param.denomination,currency=_param.currency,isAggregatedFiatOverviewBalance=_param.isAggregatedFiatOverviewBalance,opts=_object_without_properties(_param,["account","displayValue","prefix","numberOfDecimals","denomination","currency","isAggregatedFiatOverviewBalance"]),isEvm=(0,_useMultichainSelector__WEBPACK_IMPORTED_MODULE_10__.t)(_selectors_multichain__WEBPACK_IMPORTED_MODULE_3__.Bu,account),currentCurrency=(0,_useMultichainSelector__WEBPACK_IMPORTED_MODULE_10__.t)(_selectors_multichain__WEBPACK_IMPORTED_MODULE_3__.H5,account),nativeCurrency=(0,_useMultichainSelector__WEBPACK_IMPORTED_MODULE_10__.t)(_selectors_multichain__WEBPACK_IMPORTED_MODULE_3__.zz,account),conversionRate=(0,_useMultichainSelector__WEBPACK_IMPORTED_MODULE_10__.t)(_selectors_multichain__WEBPACK_IMPORTED_MODULE_3__.RP,account),currencyRates=(0,_useMultichainSelector__WEBPACK_IMPORTED_MODULE_10__.t)(_ducks_metamask_metamask__WEBPACK_IMPORTED_MODULE_9__.$4,account),isUserPreferredCurrency=currency===currentCurrency,isNativeCurrency=currency===nativeCurrency||currency===_shared_constants_network__WEBPACK_IMPORTED_MODULE_5__.Ow6[chainId],value=(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(function(){if(displayValue)return displayValue;if(!isEvm&&!isAggregatedFiatOverviewBalance){var _currencyRates_CHAIN_ID_TO_CURRENCY_SYMBOL_MAP_chainId;return formatNonEvmAssetCurrencyDisplay({tokenSymbol:nativeCurrency,isNativeCurrency:isNativeCurrency,isUserPreferredCurrency:isUserPreferredCurrency,currency:currency,currentCurrency:currentCurrency,nativeCurrency:nativeCurrency,inputValue:inputValue,conversionRate:chainId?null==currencyRates?void 0:null===(_currencyRates_CHAIN_ID_TO_CURRENCY_SYMBOL_MAP_chainId=currencyRates[_shared_constants_network__WEBPACK_IMPORTED_MODULE_5__.Ow6[chainId]])||void 0===_currencyRates_CHAIN_ID_TO_CURRENCY_SYMBOL_MAP_chainId?void 0:_currencyRates_CHAIN_ID_TO_CURRENCY_SYMBOL_MAP_chainId.conversionRate:conversionRate})}return isAggregatedFiatOverviewBalance?(0,_helpers_utils_confirm_tx_util__WEBPACK_IMPORTED_MODULE_2__.vv)(inputValue,currency):formatEthCurrencyDisplay({isNativeCurrency:isNativeCurrency,isUserPreferredCurrency:isUserPreferredCurrency,currency:currency,nativeCurrency:nativeCurrency,inputValue:inputValue,conversionRate:conversionRate,denomination:denomination,numberOfDecimals:numberOfDecimals})},[displayValue,isEvm,isNativeCurrency,isUserPreferredCurrency,currency,nativeCurrency,inputValue,conversionRate,denomination,numberOfDecimals,currentCurrency,isAggregatedFiatOverviewBalance,chainId,currencyRates]);if(!opts.hideLabel){var currencyTickerSymbol=Object.values(_shared_constants_network__WEBPACK_IMPORTED_MODULE_5__.SLP).includes(currency)?currency:null==currency?void 0:currency.toUpperCase();suffix=opts.suffix||currencyTickerSymbol}return["".concat(prefix||"").concat(value).concat(suffix?" ".concat(suffix):""),{prefix:prefix,value:value,suffix:suffix}]}},"./ui/ducks/bridge/actions.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{DT:()=>setFromTokenInputValue,Gx:()=>getBridgeERC20Allowance,HX:()=>setSortOrder,LI:()=>setToToken,OR:()=>setSelectedQuote,QC:()=>resetBridgeState,YU:()=>setWasTxDeclined,dB:()=>updateQuoteRequestParams,fC:()=>setBridgeFeatureFlags,i3:()=>setSlippage,iw:()=>setFromToken,qd:()=>setToChainId});var _metamask_bridge_controller__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@metamask/bridge-controller/dist/types.mjs"),_store_actions__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./ui/store/actions.ts"),_store_background_connection__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./ui/store/background-connection.ts");function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){reject(error);return}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _async_to_generator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)})}}function _ts_generator(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}}var _bridgeSlice_actions=__webpack_require__("./ui/ducks/bridge/bridge.ts").Wb.actions,setToChainId=_bridgeSlice_actions.setToChainId,setFromToken=_bridgeSlice_actions.setFromToken,setToToken=_bridgeSlice_actions.setToToken,setFromTokenInputValue=_bridgeSlice_actions.setFromTokenInputValue,resetInputFields=_bridgeSlice_actions.resetInputFields,setSortOrder=_bridgeSlice_actions.setSortOrder,setSelectedQuote=_bridgeSlice_actions.setSelectedQuote,setWasTxDeclined=_bridgeSlice_actions.setWasTxDeclined,setSlippage=_bridgeSlice_actions.setSlippage,callBridgeControllerMethod=function(bridgeAction,args){var _ref;return _ref=_async_to_generator(function(dispatch){return _ts_generator(this,function(_state){switch(_state.label){case 0:return[4,(0,_store_background_connection__WEBPACK_IMPORTED_MODULE_1__.Rb)(bridgeAction,[args])];case 1:return _state.sent(),[4,(0,_store_actions__WEBPACK_IMPORTED_MODULE_0__.forceUpdateMetamaskState)(dispatch)];case 2:return _state.sent(),[2]}})}),function(dispatch){return _ref.apply(this,arguments)}},setBridgeFeatureFlags=function(){var _ref;return _ref=_async_to_generator(function(dispatch){return _ts_generator(this,function(_state){return[2,dispatch(callBridgeControllerMethod(_metamask_bridge_controller__WEBPACK_IMPORTED_MODULE_3__.OF.SET_FEATURE_FLAGS))]})}),function(dispatch){return _ref.apply(this,arguments)}},resetBridgeState=function(){var _ref;return _ref=_async_to_generator(function(dispatch){return _ts_generator(this,function(_state){return dispatch(resetInputFields()),dispatch(callBridgeControllerMethod(_metamask_bridge_controller__WEBPACK_IMPORTED_MODULE_3__.OF.RESET_STATE)),[2]})}),function(dispatch){return _ref.apply(this,arguments)}},updateQuoteRequestParams=function(params){var _ref;return _ref=_async_to_generator(function(dispatch){return _ts_generator(this,function(_state){switch(_state.label){case 0:return[4,dispatch(callBridgeControllerMethod(_metamask_bridge_controller__WEBPACK_IMPORTED_MODULE_3__.v1.UPDATE_QUOTE_PARAMS,params))];case 1:return _state.sent(),[2]}})}),function(dispatch){return _ref.apply(this,arguments)}},getBridgeERC20Allowance=function(){var _ref=_async_to_generator(function(contractAddress,chainId){return _ts_generator(this,function(_state){switch(_state.label){case 0:return[4,(0,_store_background_connection__WEBPACK_IMPORTED_MODULE_1__.Rb)(_metamask_bridge_controller__WEBPACK_IMPORTED_MODULE_3__.OF.GET_BRIDGE_ERC20_ALLOWANCE,[contractAddress,chainId])];case 1:return[2,_state.sent()]}})});return function getBridgeERC20Allowance(contractAddress,chainId){return _ref.apply(this,arguments)}}()},"./ui/hooks/bridge/events/types.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{var ActionType;__webpack_require__.d(__webpack_exports__,{X:()=>ActionType}),function(ActionType){ActionType.CROSSCHAIN_V1="crosschain-v1",ActionType.SWAPBRIDGE_V1="swapbridge-v1"}(ActionType||(ActionType={}))},"./ui/hooks/bridge/useCrossChainSwapsEventTracker.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{p:()=>useCrossChainSwapsEventTracker});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_contexts_metametrics__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./ui/contexts/metametrics.js"),_shared_constants_metametrics__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./shared/constants/metametrics.ts"),_events_types__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./ui/hooks/bridge/events/types.ts");function _define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _object_spread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){_define_property(target,key,source[key])})}return target}var useCrossChainSwapsEventTracker=function(){var trackEvent=(0,react__WEBPACK_IMPORTED_MODULE_0__.useContext)(_contexts_metametrics__WEBPACK_IMPORTED_MODULE_1__.O2);return(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(function(param){var event=param.event,category=param.category,properties=param.properties;trackEvent({category:null!=category?category:_shared_constants_metametrics__WEBPACK_IMPORTED_MODULE_2__.FZ.CrossChainSwaps,event:event,properties:_object_spread({action_type:_events_types__WEBPACK_IMPORTED_MODULE_3__.X.CROSSCHAIN_V1},properties),value:"value"in properties?properties.value:void 0})},[trackEvent])}},"./ui/hooks/useMultichainSelector.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{t:()=>useMultichainSelector});var react_redux__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react-redux/es/index.js"),_selectors__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./ui/selectors/index.js");function useMultichainSelector(selector,account){return(0,react_redux__WEBPACK_IMPORTED_MODULE_0__.d4)(function(state){return selector(state,account||(0,_selectors__WEBPACK_IMPORTED_MODULE_1__._rF)(state))})}},"./ui/hooks/useTokenBalances.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{mz:()=>stringifyBalance,mK:()=>useTokenBalances,H6:()=>useTokenTracker});var es=__webpack_require__("./node_modules/react-redux/es/index.js"),bn=__webpack_require__("./node_modules/bn.js/lib/bn.js"),bn_default=__webpack_require__.n(bn),networks=__webpack_require__("./shared/modules/selectors/networks.ts"),actions=__webpack_require__("./ui/store/actions.ts"),metamask=__webpack_require__("./ui/ducks/metamask/metamask.js"),conversion_utils=__webpack_require__("./shared/modules/conversion.utils.ts"),react=__webpack_require__("./node_modules/react/index.js");function _array_like_to_array(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _array_with_holes(arr){if(Array.isArray(arr))return arr}function _iterable_to_array_limit(arr,i){var _s,_e,_i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}function _non_iterable_rest(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _sliced_to_array(arr,i){return _array_with_holes(arr)||_iterable_to_array_limit(arr,i)||_unsupported_iterable_to_array(arr,i)||_non_iterable_rest()}function _unsupported_iterable_to_array(o,minLen){if(o){if("string"==typeof o)return _array_like_to_array(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if("Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _array_like_to_array(o,minLen)}}let hooks_useMultiPolling=function(usePollingOptions){var pollingTokens=(0,react.useRef)(new Map);(0,react.useEffect)(function(){var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=usePollingOptions.input[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0)!function(){var input=_step.value,key=JSON.stringify(input);pollingTokens.current.has(key)||usePollingOptions.startPolling(input).then(function(token){return pollingTokens.current.set(key,token)})}()}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}var _iteratorNormalCompletion1=!0,_didIteratorError1=!1,_iteratorError1=void 0;try{for(var _step1,_iterator1=pollingTokens.current.entries()[Symbol.iterator]();!(_iteratorNormalCompletion1=(_step1=_iterator1.next()).done);_iteratorNormalCompletion1=!0)!function(){var _step_value=_sliced_to_array(_step1.value,2),inputKey=_step_value[0],token=_step_value[1];usePollingOptions.input.some(function(i){return inputKey===JSON.stringify(i)})||(usePollingOptions.stopPollingByPollingToken(token),pollingTokens.current.delete(inputKey))}()}catch(err){_didIteratorError1=!0,_iteratorError1=err}finally{try{_iteratorNormalCompletion1||null==_iterator1.return||_iterator1.return()}finally{if(_didIteratorError1)throw _iteratorError1}}},[usePollingOptions.input&&JSON.stringify(usePollingOptions.input)]),(0,react.useEffect)(function(){return function(){var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=pollingTokens.current.values()[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var token=_step.value;usePollingOptions.stopPollingByPollingToken(token)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}}},[])};var useTokenBalances=function(){var chainIds=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).chainIds,tokenBalances=(0,es.d4)(metamask.HF),networkConfigurations=(0,es.d4)(networks.hX);return hooks_useMultiPolling({startPolling:actions.tokenBalancesStartPolling,stopPollingByPollingToken:actions.tokenBalancesStopPollingByPollingToken,input:null!=chainIds?chainIds:Object.keys(networkConfigurations)}),{tokenBalances:tokenBalances}},useTokenTracker=function(param){var chainId=param.chainId,tokens=param.tokens,address=param.address,hideZeroBalanceTokens=param.hideZeroBalanceTokens,tokenBalances=useTokenBalances({chainIds:[chainId]}).tokenBalances;return{tokensWithBalances:tokens.reduce(function(acc,token){var _tokenBalances_address_chainId,_tokenBalances_address,_tokenBalances_address_chainId_token_address,hexBalance=null!==(_tokenBalances_address_chainId_token_address=null===(_tokenBalances_address=tokenBalances[address])||void 0===_tokenBalances_address?void 0:null===(_tokenBalances_address_chainId=_tokenBalances_address[chainId])||void 0===_tokenBalances_address_chainId?void 0:_tokenBalances_address_chainId[token.address])&&void 0!==_tokenBalances_address_chainId_token_address?_tokenBalances_address_chainId_token_address:"0x0";if("0x0"!==hexBalance||!hideZeroBalanceTokens){var decimalBalance=(0,conversion_utils.I0)(hexBalance);acc.push({address:token.address,symbol:token.symbol,decimals:token.decimals,balance:decimalBalance,balanceError:null,string:stringifyBalance(new(bn_default())(decimalBalance),new(bn_default())(token.decimals))})}return acc},[])}};function stringifyBalance(balance,bnDecimals){var balanceDecimals=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5;if(balance.eq(new(bn_default())(0)))return"0";var decimals=parseInt(bnDecimals.toString(),10);if(0===decimals)return balance.toString();var bal=balance.toString(),len=bal.length,decimalIndex=len-decimals,prefix="";if(decimalIndex<=0){for(;prefix.length<=-1*decimalIndex;)prefix+="0",len+=1;bal=prefix+bal,decimalIndex=1}var whole=bal.substr(0,len-decimals);if(0===balanceDecimals)return whole;var fractional=bal.substr(decimalIndex,balanceDecimals);if(/0+$/u.test(fractional)){var withOnlySigZeroes=bal.substr(decimalIndex).replace(/0+$/u,"");return withOnlySigZeroes.length>0&&(withOnlySigZeroes=".".concat(withOnlySigZeroes)),"".concat(whole).concat(withOnlySigZeroes)}return"".concat(whole,".").concat(fractional)}},"./ui/pages/asset/util.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{HC:()=>getShortDateFormatterV2,x8:()=>findAssetByAddress});var getShortDateFormatterV2=function(){return Intl.DateTimeFormat(navigator.language,{year:"numeric",month:"short",day:"numeric"})},findAssetByAddress=function(data,address,chainId){if(!chainId)return console.error("Chain ID is required."),null;var tokens=data[chainId];return tokens?address?tokens.find(function(token){return token.address&&token.address.toLowerCase()===address.toLowerCase()}):tokens.find(function(token){return!token.address}):(console.warn("No tokens found for chainId: ".concat(chainId)),null)}},"./ui/pages/bridge/prepare/bridge-transaction-settings-modal.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{s:()=>BridgeTransactionSettingsModal});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),react_redux__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react-redux/es/index.js"),_metamask_bridge_controller__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/@metamask/bridge-controller/dist/constants/bridge.mjs"),_components_component_library__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./ui/components/component-library/index.ts"),_hooks_useI18nContext__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./ui/hooks/useI18nContext.js"),_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./ui/helpers/constants/design-system.ts"),_ducks_bridge_selectors__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./ui/ducks/bridge/selectors.ts"),_ducks_bridge_actions__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./ui/ducks/bridge/actions.ts"),_hooks_bridge_useCrossChainSwapsEventTracker__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./ui/hooks/bridge/useCrossChainSwapsEventTracker.ts"),_shared_constants_metametrics__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./shared/constants/metametrics.ts"),_layout__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./ui/pages/bridge/layout/index.tsx");function _array_like_to_array(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _array_with_holes(arr){if(Array.isArray(arr))return arr}function _iterable_to_array_limit(arr,i){var _s,_e,_i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}function _non_iterable_rest(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _sliced_to_array(arr,i){return _array_with_holes(arr)||_iterable_to_array_limit(arr,i)||_unsupported_iterable_to_array(arr,i)||_non_iterable_rest()}function _unsupported_iterable_to_array(o,minLen){if(o){if("string"==typeof o)return _array_like_to_array(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if("Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _array_like_to_array(o,minLen)}}var HARDCODED_SLIPPAGE_OPTIONS=[_metamask_bridge_controller__WEBPACK_IMPORTED_MODULE_10__._z,3],BridgeTransactionSettingsModal=function(param){var onClose=param.onClose,isOpen=param.isOpen,t=(0,_hooks_useI18nContext__WEBPACK_IMPORTED_MODULE_3__.P)(),trackCrossChainSwapsEvent=(0,_hooks_bridge_useCrossChainSwapsEventTracker__WEBPACK_IMPORTED_MODULE_7__.p)(),dispatch=(0,react_redux__WEBPACK_IMPORTED_MODULE_1__.wA)(),slippage=(0,react_redux__WEBPACK_IMPORTED_MODULE_1__.d4)(_ducks_bridge_selectors__WEBPACK_IMPORTED_MODULE_5__.OL),_useState=_sliced_to_array((0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(slippage),2),localSlippage=_useState[0],setLocalSlippage=_useState[1],_useState1=_sliced_to_array((0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(slippage&&!HARDCODED_SLIPPAGE_OPTIONS.includes(slippage)?slippage.toString():void 0),2),customSlippage=_useState1[0],setCustomSlippage=_useState1[1],_useState2=_sliced_to_array((0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(!0),2),showCustomButton=_useState2[0],setShowCustomButton=_useState2[1],notificationConfig=function(){if(!customSlippage)return null;var slippageValue=Number(customSlippage.replace(",","."));return slippageValue<.5?{severity:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_4__.oC.WARNING,text:t("swapSlippageLowDescription",[slippageValue]),title:t("swapSlippageLowTitle")}:null}();return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_component_library__WEBPACK_IMPORTED_MODULE_2__.aF,{isOpen:isOpen,onClose:onClose,className:"bridge-settings-modal"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_component_library__WEBPACK_IMPORTED_MODULE_2__.mH,null),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_component_library__WEBPACK_IMPORTED_MODULE_2__.$m,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_component_library__WEBPACK_IMPORTED_MODULE_2__.rQ,{onClose:onClose},t("transactionSettings")),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_layout__WEBPACK_IMPORTED_MODULE_9__.VP,{gap:3,padding:4},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_layout__WEBPACK_IMPORTED_MODULE_9__.fI,{gap:1,justifyContent:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_4__.A9.flexStart},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_component_library__WEBPACK_IMPORTED_MODULE_2__.EY,null,t("swapsMaxSlippage")),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_layout__WEBPACK_IMPORTED_MODULE_9__.m_,{position:_components_component_library__WEBPACK_IMPORTED_MODULE_2__.$x.Top,iconName:_components_component_library__WEBPACK_IMPORTED_MODULE_2__.$M.Info,style:{zIndex:1051}},t("swapSlippageTooltip"))),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_layout__WEBPACK_IMPORTED_MODULE_9__.fI,{gap:2,justifyContent:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_4__.A9.flexStart},HARDCODED_SLIPPAGE_OPTIONS.map(function(hardcodedSlippage){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_component_library__WEBPACK_IMPORTED_MODULE_2__.$n,{key:hardcodedSlippage,size:_components_component_library__WEBPACK_IMPORTED_MODULE_2__.Mp.Sm,onClick:function(e){e.preventDefault(),e.stopPropagation(),setLocalSlippage(hardcodedSlippage),setCustomSlippage(void 0)},variant:_components_component_library__WEBPACK_IMPORTED_MODULE_2__.Ak.Secondary,borderColor:localSlippage===hardcodedSlippage&&showCustomButton?_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_4__.cG.primaryDefault:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_4__.cG.borderDefault,borderWidth:localSlippage===hardcodedSlippage&&showCustomButton?2:1,backgroundColor:localSlippage===hardcodedSlippage&&showCustomButton?_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_4__.i0.primaryMuted:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_4__.i0.backgroundDefault},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_component_library__WEBPACK_IMPORTED_MODULE_2__.EY,{color:localSlippage===hardcodedSlippage&&showCustomButton?_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_4__.r7.primaryDefault:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_4__.r7.textDefault},hardcodedSlippage,"%"))}),showCustomButton&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_component_library__WEBPACK_IMPORTED_MODULE_2__.$n,{size:_components_component_library__WEBPACK_IMPORTED_MODULE_2__.Mp.Sm,variant:_components_component_library__WEBPACK_IMPORTED_MODULE_2__.Ak.Secondary,borderColor:void 0===customSlippage?_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_4__.cG.borderDefault:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_4__.cG.primaryDefault,borderWidth:void 0===customSlippage?1:2,backgroundColor:void 0===customSlippage?_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_4__.i0.backgroundDefault:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_4__.i0.primaryMuted,onClick:function(e){e.preventDefault(),e.stopPropagation(),setShowCustomButton(!1)}},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_component_library__WEBPACK_IMPORTED_MODULE_2__.EY,{color:void 0===customSlippage?_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_4__.r7.textDefault:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_4__.r7.primaryDefault},void 0===customSlippage?t("customSlippage"):"".concat(customSlippage,"%"))),!showCustomButton&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_component_library__WEBPACK_IMPORTED_MODULE_2__.A_,{borderColor:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_4__.cG.primaryDefault,borderWidth:2,borderRadius:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_4__.Z6.pill,type:_components_component_library__WEBPACK_IMPORTED_MODULE_2__.ux.Text,value:customSlippage,onChange:function(e){var value=e.target.value;(""===value||RegExp("^\\d*[.,]?\\d*$","u").test(value))&&(setLocalSlippage(void 0),setCustomSlippage(value))},autoFocus:!0,onBlur:function(){setShowCustomButton(!0)},onFocus:function(){setShowCustomButton(!1)},endAccessory:react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_component_library__WEBPACK_IMPORTED_MODULE_2__.EY,{variant:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_4__.J3.bodyMd},"%")})),notificationConfig&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_component_library__WEBPACK_IMPORTED_MODULE_2__.az,{marginTop:5},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_component_library__WEBPACK_IMPORTED_MODULE_2__.b8,{severity:notificationConfig.severity,title:notificationConfig.title,titleProps:{"data-testid":"swaps-banner-title"}},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_component_library__WEBPACK_IMPORTED_MODULE_2__.EY,null,notificationConfig.text)))),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_component_library__WEBPACK_IMPORTED_MODULE_2__.jl,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_component_library__WEBPACK_IMPORTED_MODULE_2__.$$,{width:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_4__.Zf.Full,size:_components_component_library__WEBPACK_IMPORTED_MODULE_2__.w9.Md,variant:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_4__.J3.bodyMd,disabled:void 0!==customSlippage&&Number(customSlippage.replace(",","."))===slippage||void 0!==localSlippage&&localSlippage===slippage,onClick:function(){var newSlippage=null!=localSlippage?localSlippage:Number(null==customSlippage?void 0:customSlippage.replace(",","."));newSlippage&&(trackCrossChainSwapsEvent({event:_shared_constants_metametrics__WEBPACK_IMPORTED_MODULE_8__.gP.InputChanged,properties:{input:"slippage",value:newSlippage.toString()}}),dispatch((0,_ducks_bridge_actions__WEBPACK_IMPORTED_MODULE_6__.i3)(newSlippage)),onClose())}},t("submit")))))};try{BridgeTransactionSettingsModal.displayName="BridgeTransactionSettingsModal",BridgeTransactionSettingsModal.__docgenInfo={description:"",displayName:"BridgeTransactionSettingsModal",props:{isOpen:{defaultValue:null,description:"If the modal is open or not",name:"isOpen",required:!0,type:{name:"boolean"}},onClose:{defaultValue:null,description:"Fires when the modal is closed",name:"onClose",required:!0,type:{name:"() => void"}},className:{defaultValue:null,description:"Additional className to be applied to the modal",name:"className",required:!1,type:{name:"string"}},isClosedOnOutsideClick:{defaultValue:{value:"true"},description:"isClosedOnOutsideClick enables the ability to close the modal when the user clicks outside of the modal",name:"isClosedOnOutsideClick",required:!1,type:{name:"boolean"}},isClosedOnEscapeKey:{defaultValue:{value:"true"},description:"closeOnEscape enables the ability to close the modal when the user presses the escape key\nIf this is disabled there should be a close button in the modal or allow keyboard only users to close the modal with a button that is accessible via the tab key",name:"isClosedOnEscapeKey",required:!1,type:{name:"boolean"}},autoFocus:{defaultValue:{value:"false"},description:"If `true`, the first focusable element within the `children`\nwill auto-focused once `ModalFocus` mounts",name:"autoFocus",required:!1,type:{name:"boolean"}},initialFocusRef:{defaultValue:null,description:"The `ref` of the element to receive focus initially",name:"initialFocusRef",required:!1,type:{name:"RefObject<FocusableElement>"}},finalFocusRef:{defaultValue:null,description:"The `ref` of the element to return focus to when `ModalFocus`\nunmounts",name:"finalFocusRef",required:!1,type:{name:"RefObject<FocusableElement>"}},restoreFocus:{defaultValue:{value:"false"},description:"If `true`, focus will be restored to the element that\ntriggered the `ModalFocus` once it unmounts",name:"restoreFocus",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["ui/pages/bridge/prepare/bridge-transaction-settings-modal.tsx#BridgeTransactionSettingsModal"]={docgenInfo:BridgeTransactionSettingsModal.__docgenInfo,name:"BridgeTransactionSettingsModal",path:"ui/pages/bridge/prepare/bridge-transaction-settings-modal.tsx#BridgeTransactionSettingsModal"})}catch(__react_docgen_typescript_loader_error){}},"./ui/pages/confirmations/components/simulation-details/formatAmount.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{e:()=>formatAmount,o:()=>formatAmountMaxPrecision});var bignumber_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/bignumber.js/bignumber.js"),_hooks_useCurrencyDisplay__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./ui/hooks/useCurrencyDisplay.js");function _array_like_to_array(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _array_with_holes(arr){if(Array.isArray(arr))return arr}function _iterable_to_array_limit(arr,i){var _s,_e,_i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}function _non_iterable_rest(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _sliced_to_array(arr,i){return _array_with_holes(arr)||_iterable_to_array_limit(arr,i)||_unsupported_iterable_to_array(arr,i)||_non_iterable_rest()}function _unsupported_iterable_to_array(o,minLen){if(o){if("string"==typeof o)return _array_like_to_array(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if("Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _array_like_to_array(o,minLen)}}function formatAmountMaxPrecision(locale,num){var bigNumberValue=new bignumber_js__WEBPACK_IMPORTED_MODULE_0__.BigNumber(num),numberOfDecimals=bigNumberValue.decimalPlaces(),_formattedValue_split=_sliced_to_array(bigNumberValue.toFixed(numberOfDecimals).split("."),2),integerPart=_formattedValue_split[0],fractionalPart=_formattedValue_split[1],formattedIntegerPart=new Intl.NumberFormat(locale).format(integerPart);return fractionalPart?"".concat(formattedIntegerPart,".").concat(fractionalPart):formattedIntegerPart}function formatAmount(locale,amount){if(amount.isZero())return"0";if(amount.abs().lessThan(_hooks_useCurrencyDisplay__WEBPACK_IMPORTED_MODULE_1__.Ke))return"<".concat(formatAmountMaxPrecision(locale,_hooks_useCurrencyDisplay__WEBPACK_IMPORTED_MODULE_1__.Ke));if(amount.abs().lessThan(1))return new Intl.NumberFormat(locale,{maximumSignificantDigits:3}).format(amount.round(_hooks_useCurrencyDisplay__WEBPACK_IMPORTED_MODULE_1__.Vi).toNumber());var maximumFractionDigits=Math.max(0,3-amount.abs().truncated().toString().length+1);return new Intl.NumberFormat(locale,{maximumFractionDigits:maximumFractionDigits}).format(amount.toFixed(maximumFractionDigits))}},"./ui/selectors/assets.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{x5:()=>getAccountAssets,DQ:()=>getAssetsMetadata,D7:()=>getAssetsRates,Ok:()=>getMultiChainAssets,q6:()=>getMultichainAggregatedBalance,NM:()=>getMultichainNativeTokenBalance,$T:()=>getTokenBalancesEvm});var caip_types=__webpack_require__("./node_modules/@metamask/utils/dist/caip-types.mjs"),bignumber=__webpack_require__("./node_modules/bignumber.js/bignumber.js"),lodash=__webpack_require__("./node_modules/lodash/lodash.js"),network=__webpack_require__("./shared/constants/network.ts"),util=__webpack_require__("./shared/modules/selectors/util.js"),bn=__webpack_require__("./node_modules/bn.js/lib/bn.js"),bn_default=__webpack_require__.n(bn),useTokenBalances=__webpack_require__("./ui/hooks/useTokenBalances.ts"),conversion_utils=__webpack_require__("./shared/modules/conversion.utils.ts");function calculateTokenBalance(param){var isNative=param.isNative,chainId=param.chainId,address=param.address,decimals=param.decimals,nativeBalances=param.nativeBalances,selectedAccountTokenBalancesAcrossChains=param.selectedAccountTokenBalancesAcrossChains;if(isNative){var nativeTokenBalanceHex=null==nativeBalances?void 0:nativeBalances[chainId];balance=nativeTokenBalanceHex&&"0x0"!==nativeTokenBalanceHex?(0,useTokenBalances.mz)(new(bn_default())((0,conversion_utils.I0)(nativeTokenBalanceHex)),new(bn_default())(decimals),5):"0"}else{var balance,_selectedAccountTokenBalancesAcrossChains_chainId,hexBalance=null==selectedAccountTokenBalancesAcrossChains?void 0:null===(_selectedAccountTokenBalancesAcrossChains_chainId=selectedAccountTokenBalancesAcrossChains[chainId])||void 0===_selectedAccountTokenBalancesAcrossChains_chainId?void 0:_selectedAccountTokenBalancesAcrossChains_chainId[address];balance=hexBalance&&"0x0"!==hexBalance?(0,useTokenBalances.mz)(new(bn_default())((0,conversion_utils.I0)(hexBalance)),new(bn_default())(decimals)):"0"}return balance}function calculateTokenFiatAmount(param){var _marketData_chainId_address,_marketData_chainId,_marketData_chainId_address1,_marketData_chainId1,_currencyRates_baseCurrency,_currencyRates_symbol,token=param.token,chainId=param.chainId,balance=param.balance,marketData=param.marketData,currencyRates=param.currencyRates,address=token.address,isNative=token.isNative,symbol=token.symbol,baseCurrency=null===(_marketData_chainId=marketData[chainId])||void 0===_marketData_chainId?void 0:null===(_marketData_chainId_address=_marketData_chainId[address])||void 0===_marketData_chainId_address?void 0:_marketData_chainId_address.currency,tokenMarketPrice=Number(null===(_marketData_chainId1=marketData[chainId])||void 0===_marketData_chainId1?void 0:null===(_marketData_chainId_address1=_marketData_chainId1[address])||void 0===_marketData_chainId_address1?void 0:_marketData_chainId_address1.price)||0,tokenExchangeRate=(null===(_currencyRates_baseCurrency=currencyRates[baseCurrency])||void 0===_currencyRates_baseCurrency?void 0:_currencyRates_baseCurrency.conversionRate)||0,parsedBalance=parseFloat(String(balance));return isNative&&currencyRates?((null===(_currencyRates_symbol=currencyRates[symbol])||void 0===_currencyRates_symbol?void 0:_currencyRates_symbol.conversionRate)||0)*parsedBalance:tokenMarketPrice?tokenMarketPrice*tokenExchangeRate*parsedBalance:null}var metamask=__webpack_require__("./ui/ducks/metamask/metamask.js"),asset_util=__webpack_require__("./ui/pages/asset/util.ts"),accounts=__webpack_require__("./ui/selectors/accounts.ts"),multichain=__webpack_require__("./ui/selectors/multichain.ts"),selectors=__webpack_require__("./ui/selectors/selectors.js"),networks=__webpack_require__("./ui/selectors/multichain/networks.ts");function _array_like_to_array(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _array_with_holes(arr){if(Array.isArray(arr))return arr}function _define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _iterable_to_array_limit(arr,i){var _s,_e,_i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}function _non_iterable_rest(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _object_spread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){_define_property(target,key,source[key])})}return target}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function _object_spread_props(target,source){return source=null!=source?source:{},Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}),target}function _sliced_to_array(arr,i){return _array_with_holes(arr)||_iterable_to_array_limit(arr,i)||_unsupported_iterable_to_array(arr,i)||_non_iterable_rest()}function _unsupported_iterable_to_array(o,minLen){if(o){if("string"==typeof o)return _array_like_to_array(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if("Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _array_like_to_array(o,minLen)}}function getAccountAssets(state){return state.metamask.accountsAssets}function getAssetsMetadata(state){return state.metamask.assetsMetadata}function getAssetsRates(state){return state.metamask.conversionRates}var getTokenBalancesEvm=(0,util._)(selectors.xR5,selectors.vF0,metamask.HF,function(_state,accountAddress){return accountAddress},selectors.HWx,selectors.$4m,selectors.lX9,selectors.Xn,selectors.SLx,function(selectedAccountTokensChains,nativeBalances,tokenBalances,selectedAccountAddress,marketData,currencyRates,preferences,isOnCurrentNetwork,currentNetwork){var hideZeroBalanceTokens=preferences.hideZeroBalanceTokens,selectedAccountTokenBalancesAcrossChains=tokenBalances[selectedAccountAddress],isTestNetwork=network.YPx.includes(currentNetwork.chainId),filteredAccountTokensChains=Object.fromEntries(Object.entries(selectedAccountTokensChains).filter(function(param){var chainId=_sliced_to_array(param,1)[0];return isTestNetwork?network.YPx.includes(chainId):!network.YPx.includes(chainId)})),tokensWithBalance=[];return Object.entries(filteredAccountTokensChains).forEach(function(param){var _param=_sliced_to_array(param,2),stringChainKey=_param[0];_param[1].forEach(function(token){var title,balance=calculateTokenBalance({isNative:token.isNative,chainId:stringChainKey,address:token.address,decimals:token.decimals,nativeBalances:nativeBalances,selectedAccountTokenBalancesAcrossChains:selectedAccountTokenBalancesAcrossChains})||"0",tokenFiatAmount=calculateTokenFiatAmount({token:token,chainId:stringChainKey,balance:balance,marketData:marketData,currencyRates:currencyRates});(!hideZeroBalanceTokens||"0"!==balance||token.isNative&&isOnCurrentNetwork)&&(title=token.isNative?"ETH"===token.symbol?"Ethereum":token.symbol:token.name||token.symbol,tokensWithBalance.push(_object_spread_props(_object_spread({},token),{address:token.address,balance:balance,tokenFiatAmount:tokenFiatAmount,chainId:stringChainKey,string:String(balance),primary:"",secondary:0,title:title})))})}),tokensWithBalance}),getMultiChainAssets=(0,util._)(function(_state,selectedAccount){return selectedAccount},multichain.aQ,getAccountAssets,getAssetsMetadata,getAssetsRates,selectors.lX9,function(selectedAccountAddress,multichainBalances,accountAssets,assetsMetadata,assetRates,preferences){var hideZeroBalanceTokens=preferences.hideZeroBalanceTokens,assetIds=(null==accountAssets?void 0:accountAssets[selectedAccountAddress.id])||[],balances=null==multichainBalances?void 0:multichainBalances[selectedAccountAddress.id],allAssets=[];return assetIds.forEach(function(assetId){var _assetRates_assetId,_metadata_units_,_parseCaipAssetType=(0,caip_types.Ts)(assetId),chainId=_parseCaipAssetType.chainId,isNative="slip44"===_parseCaipAssetType.assetNamespace,balance=(null==balances?void 0:balances[assetId])||{amount:"0",unit:""},rate=(null==assetRates?void 0:null===(_assetRates_assetId=assetRates[assetId])||void 0===_assetRates_assetId?void 0:_assetRates_assetId.rate)||"0",balanceInFiat=new bignumber.BigNumber(balance.amount).times(rate),assetMetadataFallback={name:balance.unit,symbol:balance.unit||"",fungible:!0,units:[{name:assetId,symbol:balance.unit||"",decimals:0}]},metadata=assetsMetadata[assetId]||assetMetadataFallback,decimals=(null===(_metadata_units_=metadata.units[0])||void 0===_metadata_units_?void 0:_metadata_units_.decimals)||0;(!hideZeroBalanceTokens||"0"!==balance.amount||isNative)&&allAssets.push({title:metadata.name,address:assetId,symbol:metadata.symbol,image:metadata.iconUrl,decimals:decimals,chainId:chainId,isNative:isNative,primary:balance.amount,secondary:balanceInFiat.toNumber(),string:"",tokenFiatAmount:balanceInFiat.toNumber(),isStakeable:!1})}),allAssets});(0,util._)(function(state){return state},function(_state,account){return account},function(_state,_account,tokenAddress){return tokenAddress},function(_state,_account,_tokenAddress,_chainId){return _chainId},function(state,account,tokenAddress,chainId){var accountToUse=null!=account?account:(0,accounts._r)(state),assetsToSearch=(0,multichain.Bu)(state,accountToUse)?(0,selectors.c3v)(state):(0,lodash.groupBy)(getMultiChainAssets(state,accountToUse),"chainId");return(0,asset_util.x8)(assetsToSearch,tokenAddress,chainId)});var zeroBalanceAssetFallback={amount:0,unit:""},getMultichainAggregatedBalance=(0,util._)(function(_state,selectedAccount){return selectedAccount},multichain.aQ,getAccountAssets,getAssetsRates,function(selectedAccountAddress,multichainBalances,accountAssets,assetRates){var assetIds=(null==accountAssets?void 0:accountAssets[selectedAccountAddress.id])||[],balances=null==multichainBalances?void 0:multichainBalances[selectedAccountAddress.id],aggregatedBalance=new bignumber.BigNumber(0);return assetIds.forEach(function(assetId){var _assetRates_assetId,balance=(null==balances?void 0:balances[assetId])||zeroBalanceAssetFallback,rate=(null==assetRates?void 0:null===(_assetRates_assetId=assetRates[assetId])||void 0===_assetRates_assetId?void 0:_assetRates_assetId.rate)||"0",balanceInFiat=new bignumber.BigNumber(balance.amount).times(rate);aggregatedBalance=aggregatedBalance.plus(balanceInFiat)}),aggregatedBalance.toNumber()}),getMultichainNativeAssetType=(0,util._)(accounts._r,getAccountAssets,networks.O4,function(selectedAccount,accountAssets,currentNetwork){return((null==accountAssets?void 0:accountAssets[selectedAccount.id])||[]).find(function(assetType){var _parseCaipAssetType=(0,caip_types.Ts)(assetType),chainId=_parseCaipAssetType.chainId,assetNamespace=_parseCaipAssetType.assetNamespace;return chainId===currentNetwork.chainId&&"slip44"===assetNamespace})}),getMultichainNativeTokenBalance=(0,util._)(function(_state,selectedAccount){return selectedAccount},multichain.aQ,getMultichainNativeAssetType,function(selectedAccountAddress,multichainBalances,nativeAssetType){var balances=null==multichainBalances?void 0:multichainBalances[selectedAccountAddress.id];return nativeAssetType&&(null==balances?void 0:balances[nativeAssetType])?balances[nativeAssetType]:zeroBalanceAssetFallback})}}]);