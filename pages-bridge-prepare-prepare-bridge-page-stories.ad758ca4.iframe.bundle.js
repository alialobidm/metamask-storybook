"use strict";(globalThis.webpackChunkmetamask_crx=globalThis.webpackChunkmetamask_crx||[]).push([[13303,62940],{"./ui/pages/bridge/prepare/prepare-bridge-page.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{DefaultStory:()=>DefaultStory,LoadingStory:()=>LoadingStory,NoQuotesStory:()=>NoQuotesStory,QuotesFetchedStory:()=>QuotesFetchedStory,__namedExportsOrder:()=>__namedExportsOrder,default:()=>prepare_bridge_page_stories});var TokenFeatureType,_obj,react=__webpack_require__("./node_modules/react/index.js"),es=__webpack_require__("./node_modules/react-redux/es/index.js"),store=__webpack_require__("./ui/store/store.ts"),network=__webpack_require__("./shared/constants/network.ts"),mock_bridge_store=__webpack_require__("./test/data/bridge/mock-bridge-store.ts"),react_router=__webpack_require__("./node_modules/react-router-dom/node_modules/react-router/esm/react-router.js"),i18n=__webpack_require__("./ui/contexts/i18n.js"),swaps=__webpack_require__("./ui/ducks/swaps/swaps.js"),routes=__webpack_require__("./ui/helpers/constants/routes.ts"),actions=__webpack_require__("./ui/store/actions.ts"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types);function _object_without_properties(source,excluded){if(null==source)return{};var key,i,target=_object_without_properties_loose(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],!(excluded.indexOf(key)>=0)&&Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function _object_without_properties_loose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}function FeatureToggledRoute(_param){var flag=_param.flag,redirectRoute=_param.redirectRoute,props=_object_without_properties(_param,["flag","redirectRoute"]),redirect=(0,react.useMemo)(function(){return{pathname:redirectRoute}},[redirectRoute]);return flag?react.createElement(react_router.qh,props):react.createElement(react_router.rd,{to:redirect})}FeatureToggledRoute.propTypes={flag:prop_types_default().bool.isRequired,redirectRoute:prop_types_default().string.isRequired},FeatureToggledRoute.__docgenInfo={description:"",methods:[],displayName:"FeatureToggledRoute",props:{flag:{description:"",type:{name:"bool"},required:!0},redirectRoute:{description:"",type:{name:"string"},required:!0}}};var component_library=__webpack_require__("./ui/components/component-library/index.ts"),networks=__webpack_require__("./shared/modules/selectors/networks.ts"),selectors=__webpack_require__("./ui/selectors/index.js"),useBridging=__webpack_require__("./ui/hooks/bridge/useBridging.ts"),page=__webpack_require__("./ui/components/multichain/pages/page/index.ts");function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){reject(error);return}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _async_to_generator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)})}}function _ts_generator(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}}function useSwapsFeatureFlags(){var dispatch=(0,es.wA)();(0,react.useEffect)(function(){var _ref;(_ref=_async_to_generator(function(){return _ts_generator(this,function(_state){switch(_state.label){case 0:return[4,dispatch((0,swaps.kn)())];case 1:return _state.sent(),[2]}})}),function fetchSwapsLivenessAndFeatureFlagsWrapper(){return _ref.apply(this,arguments)})()},[dispatch])}var bridge_actions=__webpack_require__("./ui/ducks/bridge/actions.ts"),useGasFeeEstimates=__webpack_require__("./ui/hooks/useGasFeeEstimates.js"),bridge_selectors=__webpack_require__("./ui/ducks/bridge/selectors.ts"),metamask=__webpack_require__("./ui/ducks/metamask/metamask.js"),bridge=__webpack_require__("./ui/ducks/bridge/bridge.ts"),utils=__webpack_require__("./ui/ducks/bridge/utils.ts"),useMultichainSelector=__webpack_require__("./ui/hooks/useMultichainSelector.ts"),multichain=__webpack_require__("./ui/selectors/multichain.ts"),useBridgeExchangeRates=function(){var _fromTokenFromStore_address,_toTokenFromStore_address,_useSelector=(0,es.d4)(bridge_selectors.WZ),srcTokenAddress=_useSelector.srcTokenAddress,destTokenAddress=_useSelector.destTokenAddress,activeQuote=(0,es.d4)(bridge_selectors.PK).activeQuote,fromChainId=(0,useMultichainSelector.t)(multichain.aN),toChain=(0,es.d4)(bridge_selectors.b6),toChainId=null==toChain?void 0:toChain.chainId,isMetaMetricsEnabled=(0,es.d4)(selectors.qUT),dispatch=(0,es.wA)(),currency=(0,es.d4)(metamask.Fx),fromTokenAddressFromQuote=activeQuote?activeQuote.quote.srcAsset.address:srcTokenAddress,fromTokenFromStore=(0,es.d4)(bridge_selectors.G8),fromTokenAddress=null!==(_fromTokenFromStore_address=null==fromTokenFromStore?void 0:fromTokenFromStore.address)&&void 0!==_fromTokenFromStore_address?_fromTokenFromStore_address:fromTokenAddressFromQuote,toTokenAddressFromQuote=activeQuote?activeQuote.quote.destAsset.address:destTokenAddress,toTokenFromStore=(0,es.d4)(bridge_selectors.dJ),toTokenAddress=null!==(_toTokenFromStore_address=null==toTokenFromStore?void 0:toTokenFromStore.address)&&void 0!==_toTokenFromStore_address?_toTokenFromStore_address:toTokenAddressFromQuote,marketData=(0,es.d4)(selectors.HWx);(0,react.useEffect)(function(){fromChainId&&fromTokenAddress&&!(0,utils.e9)(fromChainId,fromTokenAddress,marketData)&&dispatch((0,bridge.MF)({chainId:fromChainId,tokenAddress:fromTokenAddress,currency:currency}))},[currency,dispatch,fromChainId,fromTokenAddress,marketData]),(0,react.useEffect)(function(){toChainId&&toTokenAddress&&!(0,utils.e9)(toChainId,toTokenAddress,marketData)&&(dispatch((0,bridge.KM)({chainId:toChainId,tokenAddress:toTokenAddress,currency:currency})),isMetaMetricsEnabled&&"usd"!==currency&&dispatch((0,bridge.kr)({chainId:toChainId,tokenAddress:toTokenAddress,currency:"usd"})))},[currency,dispatch,isMetaMetricsEnabled,marketData,toChainId,toTokenAddress])},utils_bridge=__webpack_require__("./node_modules/@metamask/bridge-controller/dist/utils/bridge.mjs"),metametrics=__webpack_require__("./shared/constants/metametrics.ts"),useCrossChainSwapsEventTracker=__webpack_require__("./ui/hooks/bridge/useCrossChainSwapsEventTracker.ts"),useLatestBalance=__webpack_require__("./ui/hooks/bridge/useLatestBalance.ts"),useRequestMetadataProperties=__webpack_require__("./ui/hooks/bridge/events/useRequestMetadataProperties.ts"),useRequestProperties=__webpack_require__("./ui/hooks/bridge/events/useRequestProperties.ts"),useTradeProperties=__webpack_require__("./ui/hooks/bridge/events/useTradeProperties.ts"),useConvertedUsdAmounts=__webpack_require__("./ui/hooks/bridge/events/useConvertedUsdAmounts.ts"),useQuoteProperties=__webpack_require__("./ui/hooks/bridge/events/useQuoteProperties.ts");function _define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _object_spread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){_define_property(target,key,source[key])})}return target}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function _object_spread_props(target,source){return source=null!=source?source:{},Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}),target}var useQuoteFetchEvents=function(){var trackCrossChainSwapsEvent=(0,useCrossChainSwapsEventTracker.p)(),_useSelector=(0,es.d4)(bridge_selectors.PK),isLoading=_useSelector.isLoading,quotesRefreshCount=_useSelector.quotesRefreshCount,quoteFetchError=_useSelector.quoteFetchError,quotesInitialLoadTimeMs=_useSelector.quotesInitialLoadTimeMs,_useSelector1=(0,es.d4)(bridge_selectors.WZ),insufficientBal=_useSelector1.insufficientBal,srcTokenAddress=_useSelector1.srcTokenAddress,fromTokenInputValue=(0,es.d4)(bridge_selectors.$8),validationErrors=(0,es.d4)(bridge_selectors.v),quoteRequestProperties=(0,useRequestProperties.u)().quoteRequestProperties,requestMetadataProperties=(0,useRequestMetadataProperties.n)(),usd_amount_source=(0,useConvertedUsdAmounts.v)().usd_amount_source,has_sufficient_funds=!insufficientBal,quoteListProperties=(0,useQuoteProperties.x)(),tradeProperties=(0,useTradeProperties.L)(),fromToken=(0,es.d4)(bridge_selectors.G8),fromChain=(0,es.d4)(bridge_selectors.GG),balanceAmount=(0,useLatestBalance.A)(fromToken),nativeAsset=(0,react.useMemo)(function(){return(null==fromChain?void 0:fromChain.chainId)?(0,utils_bridge.ts)(fromChain.chainId):null},[null==fromChain?void 0:fromChain.chainId]),nativeAssetBalance=(0,useLatestBalance.A)(nativeAsset),warnings=(0,react.useMemo)(function(){var isEstimatedReturnLow=validationErrors.isEstimatedReturnLow,isNoQuotesAvailable=validationErrors.isNoQuotesAvailable,isInsufficientGasBalance=validationErrors.isInsufficientGasBalance,isInsufficientGasForQuote=validationErrors.isInsufficientGasForQuote,isInsufficientBalance=validationErrors.isInsufficientBalance,latestWarnings=[];return isEstimatedReturnLow&&latestWarnings.push("low_return"),isNoQuotesAvailable&&latestWarnings.push("no_quotes"),isInsufficientGasBalance(nativeAssetBalance)&&latestWarnings.push("insufficient_gas_balance"),isInsufficientGasForQuote(nativeAssetBalance)&&latestWarnings.push("insufficient_gas_for_selected_quote"),isInsufficientBalance(balanceAmount)&&latestWarnings.push("insufficient_balance"),latestWarnings},[validationErrors]);(0,react.useEffect)(function(){var isInitialFetch=isLoading&&0===quotesRefreshCount&&void 0===quotesInitialLoadTimeMs;quoteRequestProperties&&fromTokenInputValue&&srcTokenAddress&&isInitialFetch&&trackCrossChainSwapsEvent({event:metametrics.gP.CrossChainSwapsQuotesRequested,properties:_object_spread_props(_object_spread({},quoteRequestProperties,requestMetadataProperties),{has_sufficient_funds:has_sufficient_funds,usd_amount_source:usd_amount_source})})},[isLoading,quotesInitialLoadTimeMs]),(0,react.useEffect)(function(){quoteRequestProperties&&fromTokenInputValue&&srcTokenAddress&&quoteFetchError&&trackCrossChainSwapsEvent({event:metametrics.gP.CrossChainSwapsQuoteError,properties:_object_spread_props(_object_spread({},quoteRequestProperties,requestMetadataProperties),{has_sufficient_funds:has_sufficient_funds,usd_amount_source:usd_amount_source,error_message:quoteFetchError})})},[quoteFetchError]),(0,react.useEffect)(function(){fromTokenInputValue&&srcTokenAddress&&!isLoading&&quotesRefreshCount>=0&&quoteListProperties.initial_load_time_all_quotes>0&&quoteRequestProperties&&!quoteFetchError&&tradeProperties&&trackCrossChainSwapsEvent({event:metametrics.gP.CrossChainSwapsQuotesReceived,properties:_object_spread_props(_object_spread({},quoteRequestProperties,requestMetadataProperties,quoteListProperties,tradeProperties),{refresh_count:quotesRefreshCount-1,warnings:warnings})})},[quotesRefreshCount])},design_system=__webpack_require__("./ui/helpers/constants/design-system.ts"),classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),lodash=__webpack_require__("./node_modules/lodash/lodash.js"),dist_browser=__webpack_require__("./node_modules/ethereumjs-util/dist.browser/index.js"),caip_formatters=__webpack_require__("./node_modules/@metamask/bridge-controller/dist/utils/caip-formatters.mjs"),quote=__webpack_require__("./node_modules/@metamask/bridge-controller/dist/utils/quote.mjs"),constants_bridge=__webpack_require__("./node_modules/@metamask/bridge-controller/dist/constants/bridge.mjs"),useI18nContext=__webpack_require__("./ui/hooks/useI18nContext.js"),utils_fetch=__webpack_require__("./node_modules/@metamask/bridge-controller/dist/utils/fetch.mjs"),transaction=__webpack_require__("./shared/constants/transaction.ts"),useMultichainBalances=__webpack_require__("./ui/hooks/useMultichainBalances.ts"),useAsync=__webpack_require__("./ui/hooks/useAsync.ts"),swaps_util=__webpack_require__("./ui/pages/swaps/swaps.util.ts"),time=__webpack_require__("./shared/constants/time.ts"),fetch_with_cache=__webpack_require__("./shared/lib/fetch-with-cache.ts"),shared_constants_bridge=__webpack_require__("./shared/constants/bridge.ts"),asset_utils=__webpack_require__("./shared/lib/asset-utils.ts"),multichain_networks=__webpack_require__("./shared/constants/multichain/networks.ts");function useTokensWithFiltering_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){reject(error);return}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function useTokensWithFiltering_async_to_generator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){useTokensWithFiltering_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){useTokensWithFiltering_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)})}}function useTokensWithFiltering_define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function useTokensWithFiltering_object_spread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){useTokensWithFiltering_define_property(target,key,source[key])})}return target}function useTokensWithFiltering_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function useTokensWithFiltering_object_spread_props(target,source){return source=null!=source?source:{},Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):useTokensWithFiltering_ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}),target}function useTokensWithFiltering_object_without_properties(source,excluded){if(null==source)return{};var key,i,target=useTokensWithFiltering_object_without_properties_loose(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],!(excluded.indexOf(key)>=0)&&Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function useTokensWithFiltering_object_without_properties_loose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}function useTokensWithFiltering_ts_generator(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}}var useTokensWithFiltering=function(chainId,tokenToExclude,accountId){var topAssetsFromFeatureFlags=(0,es.d4)(function(state){return(0,bridge_selectors.m7)(state,chainId)}),multichainTokensWithBalance=(0,useMultichainBalances.J)(accountId).assetsWithBalance,cachedTokens=(0,es.d4)(selectors.f2k),_useAsyncResult=(0,useAsync.$T)(useTokensWithFiltering_async_to_generator(function(){var _cachedTokens_hexChainId,hexChainId,timestamp,_cachedTokens_hexChainId1;return useTokensWithFiltering_ts_generator(this,function(_state){switch(_state.label){case 0:var _ref;if(!chainId)return[3,2];if(!(0,utils_bridge.FD)(chainId)&&(timestamp=null===(_cachedTokens_hexChainId=cachedTokens[hexChainId=(0,caip_formatters.ye)(chainId)])||void 0===_cachedTokens_hexChainId?void 0:_cachedTokens_hexChainId.timestamp)&&Date.now()-timestamp<=10*time.pY)return[2,null===(_cachedTokens_hexChainId1=cachedTokens[hexChainId])||void 0===_cachedTokens_hexChainId1?void 0:_cachedTokens_hexChainId1.data];return[4,(0,utils_fetch.kt)(chainId,constants_bridge.YU.EXTENSION,(_ref=useTokensWithFiltering_async_to_generator(function(url,options){var _ref,headers,requestOptions;return useTokensWithFiltering_ts_generator(this,function(_state){switch(_state.label){case 0:return headers=(_ref=null!=options?options:{}).headers,requestOptions=useTokensWithFiltering_object_without_properties(_ref,["headers"]),[4,(0,fetch_with_cache.A)(useTokensWithFiltering_object_spread_props(useTokensWithFiltering_object_spread({url:url},requestOptions),{fetchOptions:{method:"GET",headers:headers},functionName:"fetchBridgeTokens"}))];case 1:return[2,_state.sent()]}})}),function(url,options){return _ref.apply(this,arguments)}),shared_constants_bridge.vC)];case 1:return[2,_state.sent()];case 2:return[2,{}]}})}),[chainId,cachedTokens]),tokenList=_useAsyncResult.value,isTokenListLoading=_useAsyncResult.pending,_useAsyncResult1=(0,useAsync.$T)(useTokensWithFiltering_async_to_generator(function(){return useTokensWithFiltering_ts_generator(this,function(_state){switch(_state.label){case 0:if(!chainId)return[3,2];if(topAssetsFromFeatureFlags)return[2,topAssetsFromFeatureFlags.map(function(tokenAddress){return{address:tokenAddress}})];return[4,(0,swaps_util.Xk)(chainId)];case 1:return[2,_state.sent()];case 2:return[2,[]]}})}),[chainId,topAssetsFromFeatureFlags]),topTokens=_useAsyncResult1.value,isTopTokenListLoading=_useAsyncResult1.pending,buildTokenData=(0,react.useCallback)(function(token){if(chainId&&token){var _CHAIN_ID_TOKEN_IMAGE_MAP_sharedFields_chainId,_token_iconUrl,_ref,sharedFields=useTokensWithFiltering_object_spread_props(useTokensWithFiltering_object_spread({},token),{chainId:(0,utils_bridge.FD)(chainId)?(0,caip_formatters.Kr)(chainId):(0,caip_formatters.ye)(chainId),assetId:token.assetId});return(0,utils_bridge.c2)(token.address)?useTokensWithFiltering_object_spread_props(useTokensWithFiltering_object_spread({},sharedFields),{type:transaction.PW.native,address:"",image:null!==(_CHAIN_ID_TOKEN_IMAGE_MAP_sharedFields_chainId=network.RBA[sharedFields.chainId])&&void 0!==_CHAIN_ID_TOKEN_IMAGE_MAP_sharedFields_chainId?_CHAIN_ID_TOKEN_IMAGE_MAP_sharedFields_chainId:token.iconUrl||token.icon||"",balance:"0",string:"0"}):useTokensWithFiltering_object_spread_props(useTokensWithFiltering_object_spread({},sharedFields),{type:transaction.PW.token,image:null!==(_ref=null!==(_token_iconUrl=token.iconUrl)&&void 0!==_token_iconUrl?_token_iconUrl:token.icon)&&void 0!==_ref?_ref:"",balance:"",string:void 0})}},[chainId]);return{filteredTokenListGenerator:(0,react.useCallback)(function(filterCondition){return function(){var shouldAddToken,_iteratorNormalCompletion,_didIteratorError,_iteratorError,_iterator,_step,token,_token_address,_getNativeAssetForChainId,_getNativeAssetForChainId1,_token_balance,_token_string,_CHAIN_ID_TOKEN_IMAGE_MAP_token_chainId,_ref,_tokenList_token_address_toLowerCase,_token_balance1,_token_string1,_ref1,_ref2,err,_iteratorNormalCompletion1,_didIteratorError1,_iteratorError1,_iterator1,_step1,token_,token1,_token_address1,_iteratorNormalCompletion2,_didIteratorError2,_iteratorError2,_iterator2,_step2,token2,_token_address2;return useTokensWithFiltering_ts_generator(this,function(_state){switch(_state.label){case 0:if(shouldAddToken=function(symbol,address,tokenChainId){return filterCondition(symbol,address,tokenChainId)&&(!tokenToExclude||!tokenChainId||!(tokenToExclude.symbol===symbol&&tokenToExclude.address===address&&tokenToExclude.chainId===(0,caip_formatters.Kr)(tokenChainId)))},!chainId||!topTokens||!tokenList||0===Object.keys(tokenList).length)return[2];_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0,_state.label=1;case 1:_state.trys.push([1,8,9,10]),_iterator=multichainTokensWithBalance[Symbol.iterator](),_state.label=2;case 2:if(_iteratorNormalCompletion=(_step=_iterator.next()).done)return[3,7];if(token=_step.value,!shouldAddToken(token.symbol,null!==(_token_address=token.address)&&void 0!==_token_address?_token_address:void 0,token.chainId))return[3,6];if(!((0,utils_bridge.c2)(token.address)||token.isNative))return[3,4];return[4,{symbol:token.symbol,chainId:token.chainId,tokenFiatAmount:token.tokenFiatAmount,decimals:token.decimals,address:"",type:transaction.PW.native,balance:null!==(_token_balance=token.balance)&&void 0!==_token_balance?_token_balance:"0",string:null!==(_token_string=token.string)&&void 0!==_token_string?_token_string:void 0,image:null!==(_ref=null!==(_CHAIN_ID_TOKEN_IMAGE_MAP_token_chainId=network.RBA[token.chainId])&&void 0!==_CHAIN_ID_TOKEN_IMAGE_MAP_token_chainId?_CHAIN_ID_TOKEN_IMAGE_MAP_token_chainId:multichain_networks.gu[token.chainId])&&void 0!==_ref?_ref:(null===(_getNativeAssetForChainId=(0,utils_bridge.ts)(token.chainId))||void 0===_getNativeAssetForChainId?void 0:_getNativeAssetForChainId.icon)||(null===(_getNativeAssetForChainId1=(0,utils_bridge.ts)(token.chainId))||void 0===_getNativeAssetForChainId1?void 0:_getNativeAssetForChainId1.iconUrl)||(0,asset_utils.DK)(token.address,(0,caip_formatters.Kr)(token.chainId))}];case 3:return _state.sent(),[3,6];case 4:return[4,{symbol:token.symbol,chainId:token.chainId,tokenFiatAmount:token.tokenFiatAmount,decimals:token.decimals,address:token.address,type:transaction.PW.token,balance:null!==(_token_balance1=token.balance)&&void 0!==_token_balance1?_token_balance1:"",string:null!==(_token_string1=token.string)&&void 0!==_token_string1?_token_string1:void 0,image:null!==(_ref2=null!==(_ref1=token.image||(null==tokenList?void 0:null===(_tokenList_token_address_toLowerCase=tokenList[token.address.toLowerCase()])||void 0===_tokenList_token_address_toLowerCase?void 0:_tokenList_token_address_toLowerCase.iconUrl))&&void 0!==_ref1?_ref1:(0,asset_utils.DK)(token.address,(0,caip_formatters.Kr)(token.chainId)))&&void 0!==_ref2?_ref2:""}];case 5:_state.sent(),_state.label=6;case 6:return _iteratorNormalCompletion=!0,[3,2];case 7:return[3,10];case 8:return err=_state.sent(),_didIteratorError=!0,_iteratorError=err,[3,10];case 9:try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}return[7];case 10:_iteratorNormalCompletion1=!0,_didIteratorError1=!1,_iteratorError1=void 0,_state.label=11;case 11:_state.trys.push([11,16,17,18]),_iterator1=topTokens[Symbol.iterator](),_state.label=12;case 12:if(_iteratorNormalCompletion1=(_step1=_iterator1.next()).done)return[3,15];if(token_=_step1.value,!((token1=buildTokenData(null==tokenList?void 0:tokenList[token_.address]))&&shouldAddToken(token1.symbol,null!==(_token_address1=token1.address)&&void 0!==_token_address1?_token_address1:void 0,chainId))||!token1)return[3,14];return[4,token1];case 13:_state.sent(),_state.label=14;case 14:return _iteratorNormalCompletion1=!0,[3,12];case 15:return[3,18];case 16:return err=_state.sent(),_didIteratorError1=!0,_iteratorError1=err,[3,18];case 17:try{_iteratorNormalCompletion1||null==_iterator1.return||_iterator1.return()}finally{if(_didIteratorError1)throw _iteratorError1}return[7];case 18:_iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0,_state.label=19;case 19:_state.trys.push([19,24,25,26]),_iterator2=Object.values(tokenList)[Symbol.iterator](),_state.label=20;case 20:if(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done)return[3,23];if(!((token2=buildTokenData(_step2.value))&&!token2.symbol.includes("$")&&shouldAddToken(token2.symbol,null!==(_token_address2=token2.address)&&void 0!==_token_address2?_token_address2:void 0,chainId))||!token2)return[3,22];return[4,token2];case 21:_state.sent(),_state.label=22;case 22:return _iteratorNormalCompletion2=!0,[3,20];case 23:return[3,26];case 24:return err=_state.sent(),_didIteratorError2=!0,_iteratorError2=err,[3,26];case 25:try{_iteratorNormalCompletion2||null==_iterator2.return||_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}return[7];case 26:return[2]}})}()},[buildTokenData,multichainTokensWithBalance,topTokens,chainId,tokenList,tokenToExclude]),isLoading:isTokenListLoading||isTopTokenListLoading}},_mocks_actions=__webpack_require__("./ui/__mocks__/actions.js"),swaps_utils=__webpack_require__("./shared/lib/swaps-utils.js"),utils_quote=__webpack_require__("./ui/pages/bridge/utils/quote.ts"),events=__webpack_require__("./node_modules/events/events.js"),events_default=__webpack_require__.n(events),mascot=__webpack_require__("./ui/components/ui/mascot/index.js"),build_types=__webpack_require__("./ui/helpers/utils/build-types.js");function MascotBackgroundAnimation(param){var height=param.height,width=param.width,animationEventEmitter=(0,react.useRef)(new(events_default()));return react.createElement("div",{className:"mascot-background-animation__animation"},react.createElement("div",{className:"mascot-background-animation__background-1","data-testid":"mascot-background-animation-background-1"},react.createElement("svg",{width:"193",height:"190",viewBox:"0 0 193 190",fill:"none",xmlns:"http://www.w3.org/2000/svg"},react.createElement("path",{d:"M153.753 53.876C153.595 53.9493 153.419 54.0161 153.25 54.0651C151.081 54.7451 148.777 53.538 148.086 51.3768C147.763 50.3298 147.851 49.2109 148.361 48.2363C148.87 47.2618 149.732 46.5374 150.78 46.2144C151.828 45.8913 152.948 45.9781 153.923 46.4865C154.898 46.9949 155.622 47.8557 155.944 48.9027C156.567 50.918 155.592 53.0243 153.753 53.876ZM150.817 47.5708C150.245 47.8359 149.782 48.2721 149.495 48.8334C149.144 49.5127 149.073 50.2843 149.303 51.0047C149.774 52.4998 151.375 53.3384 152.877 52.8787C154.374 52.4069 155.215 50.8063 154.756 49.3056C154.526 48.5852 154.027 47.9888 153.36 47.6334C152.68 47.2836 151.908 47.213 151.187 47.4437C151.049 47.4636 150.927 47.52 150.817 47.5708Z",fill:"#86E29B"}),react.createElement("path",{d:"M18.3624 73.9241C18.3015 73.9523 18.2407 73.9805 18.1798 74.0087C17.0495 74.4733 15.8073 74.4728 14.6751 74.0078C12.3517 73.0461 11.2387 70.3567 12.2031 68.0341C13.1676 65.7115 15.8598 64.5971 18.1833 65.5589C19.3155 66.0239 20.1951 66.9013 20.6591 68.0304C21.123 69.1595 21.1215 70.4008 20.6552 71.5326C20.2207 72.6053 19.4093 73.4391 18.3624 73.9241ZM15.0433 66.7921C14.3129 67.1305 13.713 67.7186 13.3766 68.5243C12.6776 70.207 13.4834 72.1377 15.1666 72.8348C15.9849 73.1647 16.8786 73.1789 17.6933 72.831C18.5136 72.4952 19.1388 71.8659 19.4818 71.0424C19.8126 70.2245 19.8276 69.3313 19.4801 68.5175C19.1448 67.6981 18.5155 67.0739 17.6917 66.7319C16.8144 66.3703 15.8589 66.4142 15.0433 66.7921Z",fill:"#FFB0EB"}),react.createElement("path",{d:"M116.617 37.3839C117.397 37.0226 117.736 36.0982 117.375 35.3192C117.015 34.5402 116.09 34.2016 115.31 34.5629C114.53 34.9243 114.19 35.8487 114.551 36.6277C114.912 37.4067 115.837 37.7453 116.617 37.3839Z",fill:"url(#paint0_linear)"}),react.createElement("path",{d:"M55.1317 91.7213C55.9116 91.36 56.2512 90.4356 55.8903 89.6566C55.5294 88.8776 54.6046 88.539 53.8247 88.9003C53.0448 89.2617 52.7052 90.1861 53.0661 90.9651C53.427 91.7441 54.3518 92.0827 55.1317 91.7213Z",fill:"url(#paint1_linear)"}),react.createElement("path",{d:"M31.9932 126.235C32.7731 125.874 33.1127 124.95 32.7518 124.171C32.3909 123.392 31.4661 123.053 30.6863 123.414C29.9064 123.776 29.5667 124.7 29.9277 125.479C30.2886 126.258 31.2134 126.597 31.9932 126.235Z",fill:"url(#paint2_linear)"}),react.createElement("path",{d:"M119.43 132.589C120.21 132.228 120.55 131.304 120.189 130.525C119.828 129.746 118.903 129.407 118.123 129.768C117.344 130.13 117.004 131.054 117.365 131.833C117.726 132.612 118.651 132.951 119.43 132.589Z",fill:"url(#paint3_linear)"}),react.createElement("path",{d:"M44.7469 47.3835C46.0108 46.7979 46.5612 45.2997 45.9763 44.0372C45.3914 42.7747 43.8926 42.2259 42.6286 42.8115C41.3647 43.3971 40.8143 44.8953 41.3992 46.1578C41.9841 47.4203 43.4829 47.9691 44.7469 47.3835Z",fill:"url(#paint4_linear)"}),react.createElement("path",{d:"M105.107 90.7857C106.371 90.2001 106.922 88.702 106.337 87.4394C105.752 86.1769 104.253 85.6282 102.989 86.2137C101.725 86.7993 101.175 88.2975 101.76 89.56C102.344 90.8226 103.843 91.3713 105.107 90.7857Z",fill:"url(#paint5_linear)"}),react.createElement("path",{d:"M95.5179 172.376C96.7818 171.791 97.3322 170.293 96.7473 169.03C96.1624 167.767 94.6636 167.219 93.3996 167.804C92.1357 168.39 91.5853 169.888 92.1702 171.151C92.7551 172.413 94.2539 172.962 95.5179 172.376Z",fill:"url(#paint6_linear)"}),react.createElement("path",{d:"M165.098 102.367C166.362 101.781 166.912 100.283 166.327 99.0205C165.742 97.758 164.244 97.2092 162.98 97.7948C161.716 98.3804 161.165 99.8786 161.75 101.141C162.335 102.404 163.834 102.952 165.098 102.367Z",fill:"url(#paint7_linear)"}),react.createElement("defs",null,react.createElement("linearGradient",{id:"paint0_linear",x1:"114.554",y1:"36.6326",x2:"117.379",y2:"35.3237",gradientUnits:"userSpaceOnUse"},react.createElement("stop",{stopColor:"#75C3FC"}),react.createElement("stop",{offset:"1",stopColor:"#75C3FC"})),react.createElement("linearGradient",{id:"paint1_linear",x1:"53.0688",y1:"90.97",x2:"55.8937",y2:"89.6611",gradientUnits:"userSpaceOnUse"},react.createElement("stop",{stopColor:"#75C3FC"}),react.createElement("stop",{offset:"1",stopColor:"#75C3FC"})),react.createElement("linearGradient",{id:"paint2_linear",x1:"29.9283",y1:"125.483",x2:"32.7532",y2:"124.174",gradientUnits:"userSpaceOnUse"},react.createElement("stop",{stopColor:"#75C3FC"}),react.createElement("stop",{offset:"1",stopColor:"#75C3FC"})),react.createElement("linearGradient",{id:"paint3_linear",x1:"117.365",y1:"131.837",x2:"120.19",y2:"130.528",gradientUnits:"userSpaceOnUse"},react.createElement("stop",{stopColor:"#75C3FC"}),react.createElement("stop",{offset:"1",stopColor:"#75C3FC"})),react.createElement("linearGradient",{id:"paint4_linear",x1:"41.4394",y1:"46.2402",x2:"45.947",y2:"43.9537",gradientUnits:"userSpaceOnUse"},react.createElement("stop",{stopColor:"#75C3FC"}),react.createElement("stop",{offset:"1",stopColor:"#75C3FC"})),react.createElement("linearGradient",{id:"paint5_linear",x1:"101.8",y1:"89.6425",x2:"106.307",y2:"87.356",gradientUnits:"userSpaceOnUse"},react.createElement("stop",{stopColor:"#75C3FC"}),react.createElement("stop",{offset:"1",stopColor:"#75C3FC"})),react.createElement("linearGradient",{id:"paint6_linear",x1:"92.2104",y1:"171.233",x2:"96.718",y2:"168.947",gradientUnits:"userSpaceOnUse"},react.createElement("stop",{stopColor:"#75C3FC"}),react.createElement("stop",{offset:"1",stopColor:"#75C3FC"})),react.createElement("linearGradient",{id:"paint7_linear",x1:"161.79",y1:"101.224",x2:"166.298",y2:"98.937",gradientUnits:"userSpaceOnUse"},react.createElement("stop",{stopColor:"#75C3FC"}),react.createElement("stop",{offset:"1",stopColor:"#75C3FC"}))))),react.createElement("div",{className:"mascot-background-animation__background-2","data-testid":"mascot-background-animation-background-2"},react.createElement("svg",{width:"195",height:"205",viewBox:"0 0 195 205",fill:"none",xmlns:"http://www.w3.org/2000/svg"},react.createElement("path",{d:"M29.84 121.982C30.0408 121.969 30.245 122.01 30.4258 122.106L46.4233 130.275C46.8125 130.478 47.0536 130.893 47.0402 131.324C47.0143 131.768 46.7423 132.148 46.3356 132.308L24.5484 140.937C24.1417 141.097 23.6789 141.005 23.3642 140.702C23.0495 140.4 22.9398 139.937 23.0753 139.525L28.8651 122.727C28.9671 122.426 29.2065 122.169 29.5086 122.056C29.614 122.023 29.7194 121.989 29.84 121.982ZM43.1981 131.148L30.5607 124.689L25.9884 137.96L43.1981 131.148Z",fill:"#75C4FD"}),react.createElement("path",{d:"M168.214 54.3381C168.442 54.3238 168.674 54.3764 168.869 54.485C169.217 54.6781 169.44 55.0266 169.465 55.4145L170.59 68.4358C170.631 68.8763 170.416 69.3061 170.041 69.5444C169.666 69.7827 169.182 69.7862 168.805 69.5681L156.14 62.2246C155.763 62.0065 155.535 61.5911 155.548 61.1472C155.56 60.7033 155.818 60.3112 156.209 60.1122L167.75 54.4343C167.908 54.3841 168.067 54.3473 168.214 54.3381ZM168.027 66.3674L167.248 57.3661L159.267 61.2902L168.027 66.3674Z",fill:"#FFB0EB"}),react.createElement("path",{d:"M88.6283 16.6885C88.8694 16.6734 89.1154 16.7385 89.3255 16.873L100.21 24.1133C100.561 24.3464 100.762 24.7635 100.708 25.1832C100.653 25.6028 100.381 25.969 99.9864 26.1146L86.3391 31.4276C85.9449 31.5731 85.5106 31.5064 85.1842 31.2314C84.8712 30.9556 84.7239 30.5352 84.8192 30.1264L87.5815 17.5731C87.666 17.2053 87.9162 16.9076 88.2702 16.7646C88.3882 16.7169 88.5078 16.696 88.6283 16.6885ZM97.1342 24.7894L89.4471 19.6718L87.5021 28.5349L97.1342 24.7894Z",fill:"url(#paint0_linear)"}),react.createElement("path",{d:"M117.145 183.156C116.944 183.289 116.698 183.356 116.449 183.344L103.402 182.517C102.982 182.49 102.6 182.229 102.437 181.839C102.274 181.448 102.327 180.995 102.596 180.671L111.758 169.247C112.027 168.923 112.436 168.764 112.856 168.839C113.265 168.921 113.603 169.212 113.725 169.614L117.609 181.866C117.72 182.227 117.652 182.61 117.417 182.911C117.339 183.011 117.246 183.089 117.145 183.156ZM105.728 180.393L114.944 180.981L112.197 172.333L105.728 180.393Z",fill:"url(#paint1_linear)"}),react.createElement("path",{d:"M38.0816 74.0208C38.1217 74.0183 38.1485 74.0166 38.1887 74.0141C42.3831 73.805 45.9744 77.0577 46.1831 81.2474C46.3919 85.4371 43.1484 89.0241 38.9407 89.234C34.7463 89.4431 31.1549 86.1904 30.9462 82.0007C30.7391 77.8377 33.9307 74.2809 38.0816 74.0208ZM38.9104 87.2486C41.9767 87.0565 44.3523 84.4236 44.1997 81.3448C44.0455 78.2393 41.3949 75.8407 38.2859 75.9952C35.1761 76.1364 32.7753 78.7977 32.9296 81.9033C33.0838 85.0088 35.7344 87.4073 38.8434 87.2528C38.8568 87.252 38.8836 87.2503 38.9104 87.2486Z",fill:"#86E29B"}),react.createElement("path",{d:"M162.178 97.8401C162.218 97.8376 162.245 97.8359 162.285 97.8334C166.48 97.6243 170.071 100.877 170.28 105.067C170.489 109.256 167.245 112.843 163.037 113.053C158.843 113.262 155.252 110.01 155.043 105.82C154.836 101.657 158.027 98.1002 162.178 97.8401ZM163.007 111.068C166.073 110.876 168.449 108.243 168.296 105.164C168.142 102.059 165.492 99.6601 162.383 99.8146C159.273 99.9557 156.872 102.617 157.026 105.723C157.181 108.828 159.831 111.227 162.94 111.072C162.953 111.071 162.98 111.07 163.007 111.068Z",fill:"#86E29B"}),react.createElement("defs",null,react.createElement("linearGradient",{id:"paint0_linear",x1:"100.609",y1:"23.2611",x2:"84.4152",y2:"24.2757",gradientUnits:"userSpaceOnUse"},react.createElement("stop",{stopColor:"#FFE466"}),react.createElement("stop",{offset:"1",stopColor:"#FFAFEA"})),react.createElement("linearGradient",{id:"paint1_linear",x1:"103.812",y1:"183.939",x2:"116.959",y2:"174.66",gradientUnits:"userSpaceOnUse"},react.createElement("stop",{stopColor:"#75C3FC"}),react.createElement("stop",{offset:"0.0928503",stopColor:"#81C2F6"}),react.createElement("stop",{offset:"1",stopColor:"#F0B8BD"}))))),react.createElement("div",{className:"mascot-background-animation__mascot-container","data-testid":"mascot-background-animation-mascot-container"},(0,build_types.YT)()||(0,build_types.Vb)()?react.createElement("img",{src:"./images/logo/metamask-fox.svg",width:null!=width?width:"42",height:null!=height?height:"42"}):react.createElement(mascot.A,{animationEventEmitter:animationEventEmitter.current,width:null!=width?width:"42",height:null!=height?height:"42",followMouse:!1})))}MascotBackgroundAnimation.propTypes={height:prop_types_default().string,width:prop_types_default().string},MascotBackgroundAnimation.__docgenInfo={description:"",methods:[],displayName:"MascotBackgroundAnimation",props:{height:{description:"",type:{name:"string"},required:!1},width:{description:"",type:{name:"string"},required:!1}}};var layout=__webpack_require__("./ui/pages/bridge/layout/index.tsx"),useRamps=__webpack_require__("./ui/hooks/ramps/useRamps/useRamps.ts");function _array_like_to_array(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _array_with_holes(arr){if(Array.isArray(arr))return arr}function _iterable_to_array_limit(arr,i){var _s,_e,_i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}function _non_iterable_rest(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _sliced_to_array(arr,i){return _array_with_holes(arr)||_iterable_to_array_limit(arr,i)||_unsupported_iterable_to_array(arr,i)||_non_iterable_rest()}function _unsupported_iterable_to_array(o,minLen){if(o){if("string"==typeof o)return _array_like_to_array(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if("Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _array_like_to_array(o,minLen)}}var useCountdownTimer=function(){var quotesLastFetchedMs=(0,es.d4)(bridge_selectors.PK).quotesLastFetchedMs,refreshRate=(0,es.d4)(bridge_selectors.c2),_useState=_sliced_to_array((0,react.useState)(refreshRate),2),timeRemaining=_useState[0],setTimeRemaining=_useState[1];return(0,react.useEffect)(function(){quotesLastFetchedMs&&setTimeRemaining(refreshRate-(Date.now()-quotesLastFetchedMs)+1e3)},[quotesLastFetchedMs]),(0,react.useEffect)(function(){var interval=setInterval(function(){setTimeRemaining(Math.max(0,timeRemaining-1e3))},1e3);return function(){return clearInterval(interval)}},[timeRemaining]),timeRemaining},hardware=__webpack_require__("./ui/helpers/utils/hardware.js"),locale_locale=__webpack_require__("./ui/ducks/locale/locale.ts"),useIsMultichainSwap=__webpack_require__("./ui/pages/bridge/hooks/useIsMultichainSwap.tsx"),multichain_bridge_quote_card=__webpack_require__("./ui/pages/bridge/quotes/multichain-bridge-quote-card.tsx"),terms=__webpack_require__("./shared/constants/terms.js"),bridge_quotes_modal=__webpack_require__("./ui/pages/bridge/quotes/bridge-quotes-modal.tsx");function bridge_quote_card_array_like_to_array(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function bridge_quote_card_array_with_holes(arr){if(Array.isArray(arr))return arr}function bridge_quote_card_define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function bridge_quote_card_iterable_to_array_limit(arr,i){var _s,_e,_i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}function bridge_quote_card_non_iterable_rest(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function bridge_quote_card_object_spread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){bridge_quote_card_define_property(target,key,source[key])})}return target}function bridge_quote_card_sliced_to_array(arr,i){return bridge_quote_card_array_with_holes(arr)||bridge_quote_card_iterable_to_array_limit(arr,i)||bridge_quote_card_unsupported_iterable_to_array(arr,i)||bridge_quote_card_non_iterable_rest()}function bridge_quote_card_unsupported_iterable_to_array(o,minLen){if(o){if("string"==typeof o)return bridge_quote_card_array_like_to_array(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if("Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return bridge_quote_card_array_like_to_array(o,minLen)}}var BridgeQuoteCard=function(){var _activeQuote_totalNetworkFee,_activeQuote_totalNetworkFee1,_activeQuote_totalNetworkFee2,_activeQuote_totalNetworkFee3,_fromChain_name,_toChain_name,_formatCurrencyAmount,t=(0,useI18nContext.P)(),activeQuote=(0,es.d4)(bridge_selectors.PK).activeQuote,currency=(0,es.d4)(metamask.Fx),ticker=(0,es.d4)(metamask.Zt),isEstimatedReturnLow=(0,es.d4)(bridge_selectors.v).isEstimatedReturnLow,trackCrossChainSwapsEvent=(0,useCrossChainSwapsEventTracker.p)(),quoteRequestProperties=(0,useRequestProperties.u)().quoteRequestProperties,requestMetadataProperties=(0,useRequestMetadataProperties.n)(),quoteListProperties=(0,useQuoteProperties.x)(),fromChain=(0,es.d4)(bridge_selectors.GG),toChain=(0,es.d4)(bridge_selectors.b6),locale=(0,es.d4)(locale_locale.gA),_useState=bridge_quote_card_sliced_to_array((0,react.useState)(!1),2),showAllQuotes=_useState[0],setShowAllQuotes=_useState[1],_useState1=bridge_quote_card_sliced_to_array((0,react.useState)(!1),2),shouldShowNetworkFeesInGasToken=_useState1[0],setShouldShowNetworkFeesInGasToken=_useState1[1];return react.createElement(react.Fragment,null,react.createElement(bridge_quotes_modal.s,{isOpen:showAllQuotes,onClose:function(){return setShowAllQuotes(!1)}}),activeQuote?react.createElement(layout.VP,{gap:3},react.createElement(layout.fI,{justifyContent:design_system.A9.spaceBetween},react.createElement(layout.fI,{gap:1,justifyContent:design_system.A9.flexStart,style:{whiteSpace:"nowrap"}},react.createElement(component_library.EY,{variant:design_system.J3.bodyLgMedium},t("bestPrice")),react.createElement(layout.m_,{title:t("howQuotesWork"),position:component_library.$x.TopStart,offset:[-16,16],iconName:component_library.$M.Question},t("howQuotesWorkExplanation",[constants_bridge.zs]))),react.createElement(layout.VP,{height:design_system.Zf.Full,alignItems:design_system.k2.flexEnd},react.createElement(component_library.EY,{as:"a",variant:design_system.J3.bodyMd,color:design_system.r7.primaryDefault,onClick:function(){quoteRequestProperties&&requestMetadataProperties&&quoteListProperties&&trackCrossChainSwapsEvent({event:metametrics.gP.AllQuotesOpened,properties:bridge_quote_card_object_spread({},quoteRequestProperties,requestMetadataProperties,quoteListProperties)}),setShowAllQuotes(!0)}},t("moreQuotes")))),react.createElement(layout.VP,{gap:1},react.createElement(layout.fI,null,react.createElement(component_library.EY,{variant:design_system.J3.bodyMdMedium,color:design_system.r7.textAlternativeSoft},t("bridging")),react.createElement(layout.fI,{gap:1},react.createElement(component_library.Gn,{name:null!==(_fromChain_name=null==fromChain?void 0:fromChain.name)&&void 0!==_fromChain_name?_fromChain_name:"",src:(null==fromChain?void 0:fromChain.chainId)?(0,multichain.lo)(fromChain.chainId):void 0,size:component_library.LM.Xs,backgroundColor:design_system.i0.transparent}),react.createElement(component_library.EY,{style:{whiteSpace:"nowrap"}},(null==fromChain?void 0:fromChain.chainId)?shared_constants_bridge.Od[fromChain.chainId]:null==fromChain?void 0:fromChain.name),react.createElement(component_library.In,{name:component_library.$M.Arrow2Right,size:component_library.lK.Xs}),react.createElement(component_library.Gn,{name:null!==(_toChain_name=null==toChain?void 0:toChain.name)&&void 0!==_toChain_name?_toChain_name:"",src:(null==toChain?void 0:toChain.chainId)?(0,multichain.lo)(toChain.chainId):void 0,size:component_library.LM.Xs,backgroundColor:design_system.i0.transparent}),react.createElement(component_library.EY,{style:{whiteSpace:"nowrap"}},(null==toChain?void 0:toChain.chainId)?shared_constants_bridge.Od[toChain.chainId]:null==toChain?void 0:toChain.name))),react.createElement(layout.fI,{className:"row-with-warning",backgroundColor:isEstimatedReturnLow?design_system.i0.warningMuted:void 0},react.createElement(component_library.EY,{style:{whiteSpace:"nowrap"},variant:design_system.J3.bodyMdMedium,color:isEstimatedReturnLow?design_system.r7.warningDefault:design_system.r7.textAlternativeSoft},t("networkFee")),react.createElement(layout.fI,{gap:1},react.createElement(layout.m_,{position:component_library.$x.TopStart,offset:[-16,16],iconName:component_library.$M.Question,triggerElement:react.createElement(component_library.EY,{style:{whiteSpace:"nowrap",overflow:"visible",textDecoration:"underline",cursor:"pointer"},color:isEstimatedReturnLow?design_system.r7.warningDefault:void 0},shouldShowNetworkFeesInGasToken?"".concat((null==activeQuote?void 0:null===(_activeQuote_totalNetworkFee=activeQuote.totalNetworkFee)||void 0===_activeQuote_totalNetworkFee?void 0:_activeQuote_totalNetworkFee.valueInCurrency)?(0,utils_quote.NJ)(locale,null==activeQuote?void 0:null===(_activeQuote_totalNetworkFee1=activeQuote.totalNetworkFee)||void 0===_activeQuote_totalNetworkFee1?void 0:_activeQuote_totalNetworkFee1.amount,ticker):void 0):"".concat(null!==(_formatCurrencyAmount=(0,utils_quote.N)(null==activeQuote?void 0:null===(_activeQuote_totalNetworkFee2=activeQuote.totalNetworkFee)||void 0===_activeQuote_totalNetworkFee2?void 0:_activeQuote_totalNetworkFee2.valueInCurrency,currency,2))&&void 0!==_formatCurrencyAmount?_formatCurrencyAmount:(0,utils_quote.NJ)(locale,null==activeQuote?void 0:null===(_activeQuote_totalNetworkFee3=activeQuote.totalNetworkFee)||void 0===_activeQuote_totalNetworkFee3?void 0:_activeQuote_totalNetworkFee3.amount,ticker)))},t("howNetworkFeesWorkExplanation",[shouldShowNetworkFeesInGasToken?(0,utils_quote.NJ)(locale,null==activeQuote?void 0:activeQuote.totalMaxNetworkFee.amount,ticker):(0,utils_quote.N)(null==activeQuote?void 0:activeQuote.totalMaxNetworkFee.valueInCurrency,currency,2)])),react.createElement(component_library.In,{style:{cursor:"pointer"},color:isEstimatedReturnLow?design_system.Li.warningDefault:design_system.Li.iconAlternativeSoft,name:component_library.$M.SwapVertical,size:component_library.lK.Md,onClick:function(){return setShouldShowNetworkFeesInGasToken(!shouldShowNetworkFeesInGasToken)}}))),react.createElement(layout.fI,null,react.createElement(component_library.EY,{variant:design_system.J3.bodyMdMedium,color:design_system.r7.textAlternativeSoft},t("time")),react.createElement(component_library.EY,null,t("bridgeTimingMinutes",[(0,quote.Ue)(activeQuote.estimatedProcessingTimeInSeconds)]))),react.createElement(layout.fI,{justifyContent:design_system.A9.flexStart,gap:2},react.createElement(component_library.EY,{variant:design_system.J3.bodyMd,color:design_system.r7.textAlternativeSoft},t("rateIncludesMMFee",[constants_bridge.zs])),react.createElement(component_library.EY,{color:design_system.r7.textAlternativeSoft},t("bulletpoint")),react.createElement(component_library.vx,{variant:design_system.J3.bodyMd,color:design_system.r7.textAlternativeSoft,href:terms.T,externalLink:!0,style:{textDecoration:"underline"}},t("bridgeTerms"))))):null)};!function(TokenFeatureType){TokenFeatureType.MALICIOUS="Malicious",TokenFeatureType.WARNING="Warning",TokenFeatureType.INFO="Info",TokenFeatureType.BENIGN="Benign"}(TokenFeatureType||(TokenFeatureType={}));var constants=__webpack_require__("./node_modules/@metamask/transaction-controller/dist/constants.mjs"),process=__webpack_require__("./node_modules/process/browser.js");function security_alerts_api_util_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){reject(error);return}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function security_alerts_api_util_async_to_generator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){security_alerts_api_util_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){security_alerts_api_util_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)})}}function security_alerts_api_util_define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function security_alerts_api_util_object_spread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){security_alerts_api_util_define_property(target,key,source[key])})}return target}function security_alerts_api_util_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function security_alerts_api_util_object_spread_props(target,source){return source=null!=source?source:{},Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):security_alerts_api_util_ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}),target}function security_alerts_api_util_ts_generator(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}}function isSecurityAlertsAPIEnabled(){var isEnabled=process.env.SECURITY_ALERTS_API_ENABLED;return(null==isEnabled?void 0:isEnabled.toString())==="true"}function getUrl(endpoint){var host=process.env.SECURITY_ALERTS_API_URL;if(!host)throw Error("Security alerts API URL is not set");return"".concat(host,"/").concat(endpoint)}function getSecurityApiScanTokenRequestBody(chain,address){return{chain:chain,address:address,metadata:{domain:"https://metamask.io"}}}function getFirstTokenAlert(features){return features.find(function(feature){return feature.type===TokenFeatureType.MALICIOUS})||features.find(function(feature){return feature.type===TokenFeatureType.WARNING})||null}function fetchTokenAlert(chain,tokenAddress){return _fetchTokenAlert.apply(this,arguments)}function _fetchTokenAlert(){return(_fetchTokenAlert=security_alerts_api_util_async_to_generator(function(chain,tokenAddress){var response,tokenAlert;return security_alerts_api_util_ts_generator(this,function(_state){switch(_state.label){case 0:if(!isSecurityAlertsAPIEnabled())return[2,null];return[4,fetch(getUrl("token/scan"),{method:"POST",body:JSON.stringify(getSecurityApiScanTokenRequestBody(chain,tokenAddress)),headers:{"Content-Type":"application/json"}})];case 1:if(!(response=_state.sent()).ok)throw Error("Security alerts API request failed with status: ".concat(response.status));return[4,response.json()];case 2:if(!(tokenAlert=getFirstTokenAlert(_state.sent().features)))return[2,null];return[2,getTokenFeatureTitleDescriptionIds(tokenAlert)]}})})).apply(this,arguments)}function getTokenFeatureTitleDescriptionIds(tokenFeature){var titleId=null,descriptionId=null;switch(tokenFeature.feature_id){case"UNSTABLE_TOKEN_PRICE":titleId="unstableTokenPriceTitle",descriptionId="unstableTokenPriceDescription";break;case"HONEYPOT":titleId="honeypotTitle",descriptionId="honeypotDescription";break;case"INSUFFICIENT_LOCKED_LIQUIDITY":titleId="insufficientLockedLiquidityTitle",descriptionId="insufficientLockedLiquidityDescription";break;case"AIRDROP_PATTERN":titleId="airDropPatternTitle",descriptionId="airDropPatternDescription";break;case"CONCENTRATED_SUPPLY_DISTRIBUTION":titleId="concentratedSupplyDistributionTitle",descriptionId="concentratedSupplyDistributionDescription";break;default:console.warn("Missing token alert translation for ".concat(tokenFeature.feature_id,"."),tokenFeature.description)}return security_alerts_api_util_object_spread_props(security_alerts_api_util_object_spread({},tokenFeature),{titleId:titleId,descriptionId:descriptionId})}var CHAIN_ID_TO_SECURITY_API_NAME=(security_alerts_api_util_define_property(_obj={},constants.tx.MAINNET,"ethereum"),security_alerts_api_util_define_property(_obj,constants.tx.LINEA_MAINNET,"linea"),security_alerts_api_util_define_property(_obj,constants.tx.POLYGON,"polygon"),security_alerts_api_util_define_property(_obj,constants.tx.AVALANCHE,"avalanche"),security_alerts_api_util_define_property(_obj,constants.tx.BSC,"bsc"),security_alerts_api_util_define_property(_obj,constants.tx.ARBITRUM,"arbitrum"),security_alerts_api_util_define_property(_obj,constants.tx.OPTIMISM,"optimist"),security_alerts_api_util_define_property(_obj,constants.tx.ZKSYNC_ERA,"zksync"),security_alerts_api_util_define_property(_obj,constants.tx.BASE,"base"),security_alerts_api_util_define_property(_obj,multichain_networks.AF.SOLANA,"solana"),security_alerts_api_util_define_property(_obj,multichain_networks.AF.BITCOIN,"bitcoin"),security_alerts_api_util_define_property(_obj,multichain_networks.AF.BITCOIN_TESTNET,null),security_alerts_api_util_define_property(_obj,multichain_networks.AF.SOLANA_DEVNET,null),security_alerts_api_util_define_property(_obj,multichain_networks.AF.SOLANA_TESTNET,null),_obj);function convertChainIdToBlockAidChainName(chainId){var _CHAIN_ID_TO_SECURITY_API_NAME_chainId;return null!==(_CHAIN_ID_TO_SECURITY_API_NAME_chainId=CHAIN_ID_TO_SECURITY_API_NAME[chainId])&&void 0!==_CHAIN_ID_TO_SECURITY_API_NAME_chainId?_CHAIN_ID_TO_SECURITY_API_NAME_chainId:null}function useTokenAlerts_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){reject(error);return}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function useTokenAlerts_async_to_generator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){useTokenAlerts_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){useTokenAlerts_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)})}}function useTokenAlerts_ts_generator(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}}var useTokenAlerts=function(){var fromToken=(0,es.d4)(bridge_selectors.G8),fromChain=(0,es.d4)(bridge_selectors.GG),toToken=(0,es.d4)(bridge_selectors.dJ),toChain=(0,es.d4)(bridge_selectors.b6);return{tokenAlert:(0,useAsync.$T)(useTokenAlerts_async_to_generator(function(){var chainName;return useTokenAlerts_ts_generator(this,function(_state){switch(_state.label){case 0:if(!(fromToken&&fromChain&&toToken&&toChain)||!(chainName=convertChainIdToBlockAidChainName(null==toChain?void 0:toChain.chainId)))return[3,2];return[4,fetchTokenAlert(chainName,(0,caip_formatters.HK)(toToken.address))];case 1:return[2,_state.sent()];case 2:return[2,null]}})}),[toToken,toChain]).value}};function useDestinationAccount_array_like_to_array(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function useDestinationAccount_array_with_holes(arr){if(Array.isArray(arr))return arr}function useDestinationAccount_iterable_to_array_limit(arr,i){var _s,_e,_i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}function useDestinationAccount_non_iterable_rest(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function useDestinationAccount_sliced_to_array(arr,i){return useDestinationAccount_array_with_holes(arr)||useDestinationAccount_iterable_to_array_limit(arr,i)||useDestinationAccount_unsupported_iterable_to_array(arr,i)||useDestinationAccount_non_iterable_rest()}function useDestinationAccount_unsupported_iterable_to_array(o,minLen){if(o){if("string"==typeof o)return useDestinationAccount_array_like_to_array(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if("Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return useDestinationAccount_array_like_to_array(o,minLen)}}var useDestinationAccount=function(){var isSwap=arguments.length>0&&void 0!==arguments[0]&&arguments[0],_useState=useDestinationAccount_sliced_to_array((0,react.useState)(null),2),selectedDestinationAccount=_useState[0],setSelectedDestinationAccount=_useState[1],isEvm=(0,useMultichainSelector.t)(multichain.Bu),selectedEvmAccount=(0,es.d4)(selectors.CoC),selectedSolanaAccount=(0,es.d4)(multichain.ZK),selectedMultichainAccount=(0,useMultichainSelector.t)(selectors._rF),selectedAccount=isEvm?selectedEvmAccount:selectedMultichainAccount,toChain=(0,es.d4)(bridge_selectors.b6),isDestinationSolana=toChain&&(0,utils_bridge.FD)(toChain.chainId);return(0,react.useEffect)(function(){if(isSwap){setSelectedDestinationAccount(selectedAccount);return}setSelectedDestinationAccount(isDestinationSolana?selectedSolanaAccount:selectedEvmAccount)},[isDestinationSolana,selectedSolanaAccount,selectedEvmAccount]),{selectedDestinationAccount:selectedDestinationAccount,setSelectedDestinationAccount:setSelectedDestinationAccount}},components_multichain=__webpack_require__("./ui/components/multichain/index.js"),useIsTxSubmittable=__webpack_require__("./ui/hooks/bridge/useIsTxSubmittable.ts"),dist=__webpack_require__("./node_modules/@metamask/etherscan-link/dist/index.js"),asset_picker=__webpack_require__("./ui/components/multichain/asset-picker-amount/asset-picker/asset-picker.tsx"),asset_picker_modal_tabs=__webpack_require__("./ui/components/multichain/asset-picker-amount/asset-picker-modal/asset-picker-modal-tabs.tsx"),util=__webpack_require__("./ui/helpers/utils/util.js"),useCopyToClipboard=__webpack_require__("./ui/hooks/useCopyToClipboard.js"),lib_multichain_networks=__webpack_require__("./shared/lib/multichain/networks.ts"),select_button_types=__webpack_require__("./ui/components/component-library/select-button/select-button.types.ts"),nfts=__webpack_require__("./ui/helpers/utils/nfts.ts");function bridge_asset_picker_button_define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function bridge_asset_picker_button_object_spread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){bridge_asset_picker_button_define_property(target,key,source[key])})}return target}function bridge_asset_picker_button_object_without_properties(source,excluded){if(null==source)return{};var key,i,target=bridge_asset_picker_button_object_without_properties_loose(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],!(excluded.indexOf(key)>=0)&&Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function bridge_asset_picker_button_object_without_properties_loose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}var BridgeAssetPickerButton=function(_param){var _networkProps_network,_asset_symbol,_networkProps_network_name,asset=_param.asset,networkProps=_param.networkProps,networkImageSrc=_param.networkImageSrc,props=bridge_asset_picker_button_object_without_properties(_param,["asset","networkProps","networkImageSrc"]),t=(0,useI18nContext.P)();return react.createElement(component_library.JC,bridge_asset_picker_button_object_spread({borderRadius:design_system.Z6.pill,backgroundColor:design_system.i0.backgroundDefault,borderColor:design_system.cG.borderMuted,style:{padding:8,paddingRight:11,paddingInline:asset?void 0:24,minWidth:"fit-content"},gap:0,size:select_button_types.U.Lg,alignItems:design_system.k2.center,descriptionProps:{variant:design_system.J3.bodyMd,overflowWrap:design_system.Np.BreakWord,ellipsis:!1},caretIconProps:{name:component_library.$M.Arrow2Down,style:{display:design_system.nl.None}},label:react.createElement(component_library.EY,{variant:design_system.J3.bodyLgMedium,ellipsis:!0},null!==(_asset_symbol=null==asset?void 0:asset.symbol)&&void 0!==_asset_symbol?_asset_symbol:t("bridgeTo")),startAccessory:asset?react.createElement(component_library.ph,{marginRight:2,badge:asset?react.createElement(component_library.Gn,{name:null!==(_networkProps_network_name=null==networkProps?void 0:null===(_networkProps_network=networkProps.network)||void 0===_networkProps_network?void 0:_networkProps_network.name)&&void 0!==_networkProps_network_name?_networkProps_network_name:"",src:networkImageSrc,size:component_library.LM.Xs}):void 0},asset?react.createElement(component_library.hQ,{src:(0,nfts.YS)(asset.image)||void 0,backgroundColor:design_system.i0.backgroundHover,name:asset.symbol}):void 0):void 0},props))};try{BridgeAssetPickerButton.displayName="BridgeAssetPickerButton",BridgeAssetPickerButton.__docgenInfo={description:"",displayName:"BridgeAssetPickerButton",props:{networkImageSrc:{defaultValue:null,description:"",name:"networkImageSrc",required:!1,type:{name:"string"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},size:{defaultValue:null,description:"The size of the SelectButton using SelectButtonSize enum\nPossible values: 'SelectButtonSize.Sm', 'SelectButtonSize.Md', 'SelectButtonSize.Lg'",name:"size",required:!1,type:{name:"enum",value:[{value:'"sm"'},{value:'"md"'},{value:'"lg"'}]}},placeholder:{defaultValue:null,description:"",name:"placeholder",required:!1,type:{name:"any"}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"any"}},defaultValue:{defaultValue:null,description:"",name:"defaultValue",required:!1,type:{name:"any"}},isBlock:{defaultValue:null,description:"",name:"isBlock",required:!1,type:{name:"boolean"}},isDanger:{defaultValue:null,description:"",name:"isDanger",required:!1,type:{name:"boolean"}},isDisabled:{defaultValue:null,description:"",name:"isDisabled",required:!1,type:{name:"boolean"}},disabled:{defaultValue:null,description:"",name:"disabled",required:!1,type:{name:"boolean"}},label:{defaultValue:null,description:"",name:"label",required:!1,type:{name:"ReactNode"}},labelProps:{defaultValue:null,description:"",name:"labelProps",required:!1,type:{name:"LabelStyleUtilityProps"}},description:{defaultValue:null,description:"",name:"description",required:!1,type:{name:"ReactNode"}},descriptionProps:{defaultValue:null,description:"",name:"descriptionProps",required:!1,type:{name:"TextStyleUtilityProps"}},startAccessory:{defaultValue:null,description:"",name:"startAccessory",required:!1,type:{name:"ReactNode"}},endAccessory:{defaultValue:null,description:"",name:"endAccessory",required:!1,type:{name:"ReactNode"}},caretIconProps:{defaultValue:null,description:"",name:"caretIconProps",required:!1,type:{name:'IconProps<"span">'}},flexDirection:{defaultValue:null,description:"The flex direction of the component.\nUse the FlexDirection enum from '../../../helpers/constants/design-system';\nAccepts responsive props in the form of an array.",name:"flexDirection",required:!1,type:{name:"FlexDirection | FlexDirectionArray"}},flexWrap:{defaultValue:null,description:"The flex wrap of the component.\nUse the FlexWrap enum from '../../../helpers/constants/design-system';\nAccepts responsive props in the form of an array.",name:"flexWrap",required:!1,type:{name:"FlexWrap | FlexWrapArray"}},gap:{defaultValue:null,description:"The gap between the component's children.\nUse 1-12 for a gap of 4px-48px.\nAccepts responsive props in the form of an array.",name:"gap",required:!1,type:{name:"SizeNumber | SizeNumberArray"}},margin:{defaultValue:null,description:"The margin of the component.\nUse 1-12 for 4px-48px or 'auto'.\nAccepts responsive props in the form of an array.",name:"margin",required:!1,type:{name:"SizeNumberAndAuto | SizeNumberAndAutoArray"}},marginTop:{defaultValue:null,description:"The margin-top of the component.\nUse 1-12 for 4px-48px or 'auto'.\nAccepts responsive props in the form of an array.",name:"marginTop",required:!1,type:{name:"SizeNumberAndAuto | SizeNumberAndAutoArray"}},marginBottom:{defaultValue:null,description:"The margin-bottom of the component.\nUse 1-12 for 4px-48px or 'auto'.\nAccepts responsive props in the form of an array.",name:"marginBottom",required:!1,type:{name:"SizeNumberAndAuto | SizeNumberAndAutoArray"}},marginRight:{defaultValue:null,description:"The margin-right of the component.\nUse 1-12 for 4px-48px or 'auto'.\nAccepts responsive props in the form of an array.",name:"marginRight",required:!1,type:{name:"SizeNumberAndAuto | SizeNumberAndAutoArray"}},marginLeft:{defaultValue:null,description:"The margin-left of the component.\nUse 1-12 for 4px-48px or 'auto'.\nAccepts responsive props in the form of an array.",name:"marginLeft",required:!1,type:{name:"SizeNumberAndAuto | SizeNumberAndAutoArray"}},marginInline:{defaultValue:null,description:"The margin-inline of the component.\nUse 1-12 for 4px-48px or 'auto'.\nAccepts responsive props in the form of an array.",name:"marginInline",required:!1,type:{name:"SizeNumberAndAuto | SizeNumberAndAutoArray"}},marginInlineStart:{defaultValue:null,description:"The margin-inline-start of the component.\nUse 1-12 for 4px-48px or 'auto'.\nAccepts responsive props in the form of an array.",name:"marginInlineStart",required:!1,type:{name:"SizeNumberAndAuto | SizeNumberAndAutoArray"}},marginInlineEnd:{defaultValue:null,description:"The margin-inline-end of the component.\nUse 1-12 for 4px-48px or 'auto'.\nAccepts responsive props in the form of an array.",name:"marginInlineEnd",required:!1,type:{name:"SizeNumberAndAuto | SizeNumberAndAutoArray"}},padding:{defaultValue:null,description:"The padding of the component.\nUse 1-12 for 4px-48px.\nAccepts responsive props in the form of an array.",name:"padding",required:!1,type:{name:"SizeNumber | SizeNumberArray"}},paddingTop:{defaultValue:null,description:"The padding-top of the component.\nUse 1-12 for 4px-48px.\nAccepts responsive props in the form of an array.",name:"paddingTop",required:!1,type:{name:"SizeNumber | SizeNumberArray"}},paddingBottom:{defaultValue:null,description:"The padding-bottom of the component.\nUse 1-12 for 4px-48px.\nAccepts responsive props in the form of an array.",name:"paddingBottom",required:!1,type:{name:"SizeNumber | SizeNumberArray"}},paddingRight:{defaultValue:null,description:"The padding-right of the component.\nUse 1-12 for 4px-48px.\nAccepts responsive props in the form of an array.",name:"paddingRight",required:!1,type:{name:"SizeNumber | SizeNumberArray"}},paddingLeft:{defaultValue:null,description:"The padding-left of the component.\nUse 1-12 for 4px-48px.\nAccepts responsive props in the form of an array.",name:"paddingLeft",required:!1,type:{name:"SizeNumber | SizeNumberArray"}},paddingInline:{defaultValue:null,description:"The padding-inline of the component.\nUse 1-12 for 4px-48px.\nAccepts responsive props in the form of an array.",name:"paddingInline",required:!1,type:{name:"SizeNumber | SizeNumberArray"}},paddingInlineStart:{defaultValue:null,description:"The padding-inline-start of the component.\nUse 1-12 for 4px-48px.\nAccepts responsive props in the form of an array.",name:"paddingInlineStart",required:!1,type:{name:"SizeNumber | SizeNumberArray"}},paddingInlineEnd:{defaultValue:null,description:"The padding-inline-end of the component.\nUse 1-12 for 4px-48px.\nAccepts responsive props in the form of an array.",name:"paddingInlineEnd",required:!1,type:{name:"SizeNumber | SizeNumberArray"}},borderColor:{defaultValue:null,description:"The border-color of the component.\nUse BorderColor enum from '../../../helpers/constants/design-system';\nAccepts responsive props in the form of an array.",name:"borderColor",required:!1,type:{name:"BorderColor | BorderColorArray"}},borderWidth:{defaultValue:null,description:"The border-width of the component.\nUse 1-12 for 1px-12px.\nAccepts responsive props in the form of an array.",name:"borderWidth",required:!1,type:{name:"SizeNumber | SizeNumberArray"}},borderRadius:{defaultValue:null,description:"The border-radius of the component.\nUse BorderRadius enum from '../../../helpers/constants/design-system';\nAccepts responsive props in the form of an array.",name:"borderRadius",required:!1,type:{name:"BorderRadius | BorderRadiusArray"}},borderStyle:{defaultValue:null,description:"The border-style of the component.\nUse BorderStyle enum from '../../../helpers/constants/design-system';\nAccepts responsive props in the form of an array.",name:"borderStyle",required:!1,type:{name:"BorderStyle | BorderStyleArray"}},alignItems:{defaultValue:null,description:"The align-items of the component.\nUse AlignItems enum from '../../../helpers/constants/design-system';\nAccepts responsive props in the form of an array.",name:"alignItems",required:!1,type:{name:"AlignItems | AlignItemsArray"}},justifyContent:{defaultValue:null,description:"The justify-content of the component.\nUse JustifyContent enum from '../../../helpers/constants/design-system';\nAccepts responsive props in the form of an array.",name:"justifyContent",required:!1,type:{name:"JustifyContent | JustifyContentArray"}},textAlign:{defaultValue:null,description:"The text-align of the component.\nUse TextAlign enum from '../../../helpers/constants/design-system';\nAccepts responsive props in the form of an array.",name:"textAlign",required:!1,type:{name:"TextAlign | TextAlignArray"}},display:{defaultValue:null,description:"The display of the component.\nUse Display enum from '../../../helpers/constants/design-system';\nAccepts responsive props in the form of an array.",name:"display",required:!1,type:{name:"Display | DisplayArray"}},width:{defaultValue:null,description:"The width of the component.\nUse BlockSize enum from '../../../helpers/constants/design-system';\nAccepts responsive props in the form of an array.",name:"width",required:!1,type:{name:"BlockSize | BlockSizeArray"}},minWidth:{defaultValue:null,description:"The min-width of the component.\nUse BlockSize enum from '../../../helpers/constants/design-system';\nAccepts responsive props in the form of an array.",name:"minWidth",required:!1,type:{name:"BlockSize | BlockSizeArray"}},height:{defaultValue:null,description:"The height of the component.\nUse BlockSize enum from '../../../helpers/constants/design-system';\nAccepts responsive props in the form of an array.",name:"height",required:!1,type:{name:"BlockSize | BlockSizeArray"}},backgroundColor:{defaultValue:null,description:"The background-color of the component.\nUse BackgroundColor enum from '../../../helpers/constants/design-system';\nAccepts responsive props in the form of an array.",name:"backgroundColor",required:!1,type:{name:"BackgroundColor | BackgroundColorArray"}},color:{defaultValue:null,description:"The text-color of the component.\nUse TextColor enum from '../../../helpers/constants/design-system';\nAccepts responsive props in the form of an array.",name:"color",required:!1,type:{name:"TextColor | IconColor | TextColorArray | IconColorArray"}},"data-testid":{defaultValue:null,description:"An optional data-testid to apply to the component.\nTypeScript is complaining about data- attributes which means we need to explicitly define this as a prop.\nTODO: Allow data- attributes.",name:"data-testid",required:!1,type:{name:"string"}},as:{defaultValue:null,description:"An override of the default HTML tag.\nCan also be a React component.",name:"as",required:!1,type:{name:"enum",value:[{value:'"div"'}]}},ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"((instance: HTMLDivElement | null) => void) | RefObject<HTMLDivElement> | null"}},asset:{defaultValue:null,description:"",name:"asset",required:!1,type:{name:'ERC20Asset | NativeAsset | Pick<NFT, "symbol" | "address" | "image" | "type" | "tokenId">'}},networkProps:{defaultValue:null,description:"",name:"networkProps",required:!1,type:{name:'Pick<{ isOpen: boolean; network?: NetworkOption; networks?: NetworkOption[]; onNetworkChange: (network: NetworkOption) => void; ... 6 more ...; onMultiselectSubmit?: ((selectedChainIds: string[]) => void) | undefined; }, "header" | ... 3 more ... | "shouldDisableNetwork"> | undefined'}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["ui/pages/bridge/prepare/components/bridge-asset-picker-button.tsx#BridgeAssetPickerButton"]={docgenInfo:BridgeAssetPickerButton.__docgenInfo,name:"BridgeAssetPickerButton",path:"ui/pages/bridge/prepare/components/bridge-asset-picker-button.tsx#BridgeAssetPickerButton"})}catch(__react_docgen_typescript_loader_error){}function bridge_input_group_array_like_to_array(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function bridge_input_group_array_with_holes(arr){if(Array.isArray(arr))return arr}function bridge_input_group_define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function bridge_input_group_iterable_to_array_limit(arr,i){var _s,_e,_i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}function bridge_input_group_non_iterable_rest(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function bridge_input_group_object_spread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){bridge_input_group_define_property(target,key,source[key])})}return target}function bridge_input_group_sliced_to_array(arr,i){return bridge_input_group_array_with_holes(arr)||bridge_input_group_iterable_to_array_limit(arr,i)||bridge_input_group_unsupported_iterable_to_array(arr,i)||bridge_input_group_non_iterable_rest()}function bridge_input_group_unsupported_iterable_to_array(o,minLen){if(o){if("string"==typeof o)return bridge_input_group_array_like_to_array(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if("Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return bridge_input_group_array_like_to_array(o,minLen)}}var sanitizeAmountInput=function(textToSanitize){return textToSanitize.replace(RegExp("[^\\d.]+","gu"),"").split(".",2).join(".")},BridgeInputGroup=function(param){var _networkProps_network,_amountFieldProps_value,header=param.header,token=param.token,onAssetChange=param.onAssetChange,onAmountChange=param.onAmountChange,networkProps=param.networkProps,isTokenListLoading=param.isTokenListLoading,customTokenListGenerator=param.customTokenListGenerator,amountFieldProps=param.amountFieldProps,amountInFiat=param.amountInFiat,onMaxButtonClick=param.onMaxButtonClick,isMultiselectEnabled=param.isMultiselectEnabled,onBlockExplorerClick=param.onBlockExplorerClick,buttonProps=param.buttonProps,t=(0,useI18nContext.P)(),isLoading=(0,es.d4)(bridge_selectors.PK).isLoading,_useSelector=(0,es.d4)(bridge_selectors.v),isInsufficientBalance=_useSelector.isInsufficientBalance,isEstimatedReturnLow=_useSelector.isEstimatedReturnLow,currency=(0,es.d4)(metamask.Fx),locale=(0,es.d4)(locale_locale.gA),selectedChainId=null==networkProps?void 0:null===(_networkProps_network=networkProps.network)||void 0===_networkProps_network?void 0:_networkProps_network.chainId,balanceAmount=(0,useLatestBalance.A)(token),handleCopy=bridge_input_group_sliced_to_array((0,useCopyToClipboard.C)(time.pY),2)[1],inputRef=(0,react.useRef)(null),isAmountReadOnly=(null==amountFieldProps?void 0:amountFieldProps.readOnly)||(null==amountFieldProps?void 0:amountFieldProps.disabled);(0,react.useEffect)(function(){if(!isAmountReadOnly&&inputRef.current){var _amountFieldProps_value,_amountFieldProps_value_toString;inputRef.current.value=null!==(_amountFieldProps_value_toString=null==amountFieldProps?void 0:null===(_amountFieldProps_value=amountFieldProps.value)||void 0===_amountFieldProps_value?void 0:_amountFieldProps_value.toString())&&void 0!==_amountFieldProps_value_toString?_amountFieldProps_value_toString:"",inputRef.current.focus()}},[null==amountFieldProps?void 0:amountFieldProps.value,isAmountReadOnly,token]);var isSwap=(0,useIsMultichainSwap.v)(),handleAddressClick=function(){if(token&&selectedChainId){var caipChainId=(0,caip_formatters.Kr)(selectedChainId),isSolana=caipChainId===multichain_networks.AF.SOLANA,blockExplorerUrl="";if(isSolana){var blockExplorerUrls=multichain_networks.WL[caipChainId];blockExplorerUrls&&(blockExplorerUrl=(0,lib_multichain_networks.TT)(blockExplorerUrls,token.address))}else{var _networkProps_network,_networkProps_network_blockExplorerUrls,_networkProps_network1,_networkProps_network_defaultBlockExplorerUrlIndex,explorerUrl=null==networkProps?void 0:null===(_networkProps_network1=networkProps.network)||void 0===_networkProps_network1?void 0:null===(_networkProps_network_blockExplorerUrls=_networkProps_network1.blockExplorerUrls)||void 0===_networkProps_network_blockExplorerUrls?void 0:_networkProps_network_blockExplorerUrls[null!==(_networkProps_network_defaultBlockExplorerUrlIndex=null==networkProps?void 0:null===(_networkProps_network=networkProps.network)||void 0===_networkProps_network?void 0:_networkProps_network.defaultBlockExplorerUrlIndex)&&void 0!==_networkProps_network_defaultBlockExplorerUrlIndex?_networkProps_network_defaultBlockExplorerUrlIndex:0];explorerUrl&&(blockExplorerUrl=(0,dist.getAccountLink)(token.address,selectedChainId,{blockExplorerUrl:explorerUrl},void 0))}blockExplorerUrl&&(handleCopy(blockExplorerUrl),null==onBlockExplorerClick||onBlockExplorerClick(token))}};return react.createElement(layout.VP,{paddingInline:6,gap:1},react.createElement(layout.fI,{gap:4},react.createElement(component_library.A_,bridge_input_group_object_spread({inputProps:{disableStateStyles:!0,textAlign:design_system.nO.Start,style:{fontWeight:400,fontSize:Math.max(14,36*(9/Math.max(9,(null!==(_amountFieldProps_value=null==amountFieldProps?void 0:amountFieldProps.value)&&void 0!==_amountFieldProps_value?_amountFieldProps_value:"").toString().length))),transition:"font-size 0.1s",padding:0}},style:{minWidth:96,maxWidth:190,opacity:isAmountReadOnly&&(null==amountFieldProps?void 0:amountFieldProps.value)?1:void 0},display:design_system.nl.Flex,inputRef:inputRef,type:component_library.ux.Text,className:"amount-input",placeholder:"0",onKeyPress:function(e){if(e){var _amountFieldProps_value;"."===e.key&&(null===(_amountFieldProps_value=amountFieldProps.value)||void 0===_amountFieldProps_value?void 0:_amountFieldProps_value.toString().includes("."))?e.preventDefault():RegExp("^[\\d.]{1}$","u").test(e.key)||e.preventDefault()}},onPaste:function(e){e.preventDefault();var cleanedValue=sanitizeAmountInput(e.clipboardData.getData("text"));null==onAmountChange||onAmountChange(null!=cleanedValue?cleanedValue:"")},onChange:function(e){e.preventDefault(),e.stopPropagation();var cleanedValue=sanitizeAmountInput(e.target.value);null==onAmountChange||onAmountChange(null!=cleanedValue?cleanedValue:"")}},amountFieldProps)),react.createElement(asset_picker.b,{header:header,visibleTabs:[asset_picker_modal_tabs.T.TOKENS],asset:null!=token?token:void 0,onAssetChange:onAssetChange,networkProps:networkProps,customTokenListGenerator:customTokenListGenerator,isTokenListLoading:isTokenListLoading,isMultiselectEnabled:isMultiselectEnabled},function(onClickHandler,networkImageSrc){return isAmountReadOnly&&!token?react.createElement(component_library.$n,{"data-testid":buttonProps.testId,onClick:onClickHandler,size:component_library.Mp.Lg,paddingLeft:6,paddingRight:6,fontWeight:design_system.IT.Normal,style:{whiteSpace:"nowrap"}},isSwap?t("swapSwapTo"):t("bridgeTo")):react.createElement(BridgeAssetPickerButton,{onClick:onClickHandler,networkImageSrc:networkImageSrc,asset:null!=token?token:void 0,networkProps:networkProps,"data-testid":buttonProps.testId})})),react.createElement(layout.fI,{justifyContent:design_system.A9.spaceBetween},react.createElement(layout.fI,null,react.createElement(component_library.EY,{variant:design_system.J3.bodyMd,fontWeight:design_system.IT.Normal,color:isAmountReadOnly&&isEstimatedReturnLow?design_system.r7.warningDefault:design_system.r7.textAlternativeSoft,textAlign:design_system.nO.End,ellipsis:!0},isAmountReadOnly&&isLoading&&"0"===amountFieldProps.value?t("bridgeCalculatingAmount"):void 0,amountInFiat&&(0,utils_quote.N)(amountInFiat,currency,2))),react.createElement(component_library.EY,{display:design_system.nl.Flex,gap:1,variant:design_system.J3.bodyMd,color:!isAmountReadOnly&&isInsufficientBalance(balanceAmount)?design_system.r7.errorDefault:design_system.r7.textAlternativeSoft,onClick:function(){isAmountReadOnly&&token&&selectedChainId?handleAddressClick():token&&selectedChainId&&handleCopy(token.address)},as:isAmountReadOnly?"a":"p",style:{cursor:isAmountReadOnly?"pointer":"default",textDecoration:isAmountReadOnly?"underline":"none"}},isAmountReadOnly&&token&&selectedChainId&&((0,utils_bridge.c2)(token.address)?void 0:(0,util.l1)(token.address,{truncatedCharLimit:11,truncatedStartChars:4,truncatedEndChars:4,skipCharacterInEnd:!1})),!isAmountReadOnly&&balanceAmount?(0,utils_quote.NJ)(locale,balanceAmount.toString(),null==token?void 0:token.symbol):void 0,onMaxButtonClick&&token&&!(0,utils_bridge.c2)(token.address)&&balanceAmount&&react.createElement(component_library.vx,{variant:design_system.J3.bodyMd,onClick:function(){return onMaxButtonClick(null==balanceAmount?void 0:balanceAmount.toFixed())}},t("max")))))};try{BridgeInputGroup.displayName="BridgeInputGroup",BridgeInputGroup.__docgenInfo={description:"",displayName:"BridgeInputGroup",props:{amountInFiat:{defaultValue:null,description:"",name:"amountInFiat",required:!1,type:{name:"string"}},onAmountChange:{defaultValue:null,description:"",name:"onAmountChange",required:!1,type:{name:"((value: string) => void)"}},token:{defaultValue:null,description:"",name:"token",required:!0,type:{name:"BridgeToken | null"}},buttonProps:{defaultValue:null,description:"",name:"buttonProps",required:!0,type:{name:"{ testId: string; }"}},amountFieldProps:{defaultValue:null,description:"",name:"amountFieldProps",required:!0,type:{name:'Pick<TextFieldStyleUtilityProps & AsProp<ElementType<any>> & { children?: ReactNode; } & Omit<Pick<any, string | number | symbol>, "as" | keyof TextFieldStyleUtilityProps> & { ...; }, "value" | ... 4 more ... | "testId">'}},onMaxButtonClick:{defaultValue:null,description:"",name:"onMaxButtonClick",required:!1,type:{name:"((value: string) => void)"}},onBlockExplorerClick:{defaultValue:null,description:"",name:"onBlockExplorerClick",required:!1,type:{name:"((token: BridgeToken) => void)"}},header:{defaultValue:null,description:"",name:"header",required:!0,type:{name:"string | Element | null"}},isMultiselectEnabled:{defaultValue:null,description:"",name:"isMultiselectEnabled",required:!1,type:{name:"boolean"}},onAssetChange:{defaultValue:null,description:"Needs to be wrapped in a callback",name:"onAssetChange",required:!0,type:{name:"(newAsset: AssetWithDisplayData<ERC20Asset> | AssetWithDisplayData<NativeAsset>) => void"}},customTokenListGenerator:{defaultValue:null,description:"Generator function that returns a list of tokens filtered by a predicate and sorted\nby a custom order.",name:"customTokenListGenerator",required:!1,type:{name:"((filterPredicate: (symbol: string, address?: string | null, chainId?: string) => boolean) => Generator<AssetWithDisplayData<ERC20Asset> | AssetWithDisplayData<...>, any, unknown>) | undefined"}},isTokenListLoading:{defaultValue:null,description:"",name:"isTokenListLoading",required:!1,type:{name:"boolean"}},networkProps:{defaultValue:null,description:"",name:"networkProps",required:!1,type:{name:'Pick<{ isOpen: boolean; network?: NetworkOption; networks?: NetworkOption[]; onNetworkChange: (network: NetworkOption) => void; ... 6 more ...; onMultiselectSubmit?: ((selectedChainIds: string[]) => void) | undefined; }, "header" | ... 3 more ... | "shouldDisableNetwork"> | undefined'}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["ui/pages/bridge/prepare/bridge-input-group.tsx#BridgeInputGroup"]={docgenInfo:BridgeInputGroup.__docgenInfo,name:"BridgeInputGroup",path:"ui/pages/bridge/prepare/bridge-input-group.tsx#BridgeInputGroup"})}catch(__react_docgen_typescript_loader_error){}var logging=__webpack_require__("./node_modules/@metamask/utils/dist/logging.mjs"),bridge_status=__webpack_require__("./shared/types/bridge-status.ts"),background_connection=__webpack_require__("./ui/store/background-connection.ts");function actions_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){reject(error);return}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function actions_async_to_generator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){actions_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){actions_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)})}}function actions_ts_generator(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}}var callBridgeStatusControllerMethod=function(bridgeAction,args){var _ref;return _ref=actions_async_to_generator(function(dispatch){return actions_ts_generator(this,function(_state){switch(_state.label){case 0:return[4,(0,background_connection.Rb)(bridgeAction,args)];case 1:return _state.sent(),[4,(0,actions.forceUpdateMetamaskState)(dispatch)];case 2:return _state.sent(),[2]}})}),function(dispatch){return _ref.apply(this,arguments)}},startPollingForBridgeTxStatus=function(startPollingForBridgeTxStatusArgs){var _ref;return _ref=actions_async_to_generator(function(dispatch){return actions_ts_generator(this,function(_state){return[2,dispatch(callBridgeStatusControllerMethod(bridge_status.y0.START_POLLING_FOR_BRIDGE_TX_STATUS,[startPollingForBridgeTxStatusArgs]))]})}),function(dispatch){return _ref.apply(this,arguments)}},bridge_status_utils=__webpack_require__("./shared/lib/bridge-status/utils.ts"),transaction_breakdown_utils=__webpack_require__("./shared/lib/transaction-breakdown-utils.ts"),transactions_controller_utils=__webpack_require__("./shared/lib/transactions-controller-utils.js");function metrics_utils_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){reject(error);return}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function metrics_utils_ts_generator(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}}var getHexGasTotalUsd=function(param){var bridgeHistoryItem=param.bridgeHistoryItem,state=param.state,srcTxMeta=state.metamask.transactions.find(function(txMeta){return txMeta.id===bridgeHistoryItem.txMetaId});if(!srcTxMeta)return null;var hexGasTotalWei=(0,transaction_breakdown_utils.o)(srcTxMeta),nativeToUsdRate=(0,selectors.EgK)(srcTxMeta.chainId)(state);return(0,transactions_controller_utils.dU)(hexGasTotalWei,18).toNumber()*nativeToUsdRate},types=__webpack_require__("./ui/hooks/bridge/events/types.ts"),modules_selectors=__webpack_require__("./shared/modules/selectors/index.ts"),getCommonProperties=function(bridgeHistoryItem,state){var _bridgeHistoryItem_pricingData,_bridgeHistoryItem_pricingData1,_bridgeHistoryItem_pricingData2,_isHardwareKeyring,_getHexGasTotalUsd,keyring=(0,selectors.X3W)(state),is_hardware_wallet=null!==(_isHardwareKeyring=(0,hardware.c)(keyring.type))&&void 0!==_isHardwareKeyring&&_isHardwareKeyring,chain_id_source=(0,caip_formatters.Kr)(bridgeHistoryItem.quote.srcChainId),chain_id_destination=(0,caip_formatters.Kr)(bridgeHistoryItem.quote.destChainId),usd_actual_gas=null!==(_getHexGasTotalUsd=getHexGasTotalUsd({bridgeHistoryItem:bridgeHistoryItem,state:state}))&&void 0!==_getHexGasTotalUsd?_getHexGasTotalUsd:0,usd_quoted_return=Number(null===(_bridgeHistoryItem_pricingData=bridgeHistoryItem.pricingData)||void 0===_bridgeHistoryItem_pricingData?void 0:_bridgeHistoryItem_pricingData.quotedReturnInUsd),usd_quoted_gas=Number(null===(_bridgeHistoryItem_pricingData1=bridgeHistoryItem.pricingData)||void 0===_bridgeHistoryItem_pricingData1?void 0:_bridgeHistoryItem_pricingData1.quotedGasInUsd),isBridgeTx=bridgeHistoryItem.quote.srcChainId!==bridgeHistoryItem.quote.destChainId;return{action_type:types.X.CROSSCHAIN_V1,slippage_limit:bridgeHistoryItem.slippagePercentage,custom_slippage:bridgeHistoryItem.slippagePercentage!==constants_bridge._z,chain_id_source:chain_id_source,chain_id_destination:chain_id_destination,token_address_source:bridgeHistoryItem.quote.srcAsset.address,token_address_destination:bridgeHistoryItem.quote.destAsset.address,token_symbol_source:bridgeHistoryItem.quote.srcAsset.symbol,token_symbol_destination:bridgeHistoryItem.quote.destAsset.symbol,stx_enabled:(0,modules_selectors.U5)(state,chain_id_source),is_hardware_wallet:is_hardware_wallet,provider:(0,utils_quote.bw)(bridgeHistoryItem.quote),quoted_time_minutes:bridgeHistoryItem.estimatedProcessingTimeInSeconds?bridgeHistoryItem.estimatedProcessingTimeInSeconds/60:0,actual_time_minutes:bridgeHistoryItem.completionTime&&bridgeHistoryItem.startTime?(bridgeHistoryItem.completionTime-bridgeHistoryItem.startTime)/1e3/60:0,swap_type:isBridgeTx?types.X.CROSSCHAIN_V1:types.X.SWAPBRIDGE_V1,usd_amount_source:Number(null===(_bridgeHistoryItem_pricingData2=bridgeHistoryItem.pricingData)||void 0===_bridgeHistoryItem_pricingData2?void 0:_bridgeHistoryItem_pricingData2.amountSentInUsd),usd_actual_gas:usd_actual_gas,usd_quoted_return:usd_quoted_return,usd_quoted_gas:usd_quoted_gas,gas_included:!1}},conversion_utils=__webpack_require__("./shared/modules/conversion.utils.ts");function useAddToken_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){reject(error);return}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function useAddToken_async_to_generator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){useAddToken_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){useAddToken_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)})}}function useAddToken_ts_generator(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}}function useAddToken(){var _ref,dispatch=(0,es.wA)(),networkConfigurations=(0,es.d4)(networks.hX),sourceNetworkClientId=(0,es.d4)(networks.EQ);return{addSourceToken:function(quoteResponse){var _quoteResponse_quote_srcAsset=quoteResponse.quote.srcAsset,address=_quoteResponse_quote_srcAsset.address,decimals=_quoteResponse_quote_srcAsset.decimals,symbol=_quoteResponse_quote_srcAsset.symbol,image=_quoteResponse_quote_srcAsset.icon;dispatch((0,_mocks_actions.addToken)({address:address,decimals:decimals,symbol:symbol,image:image,networkClientId:sourceNetworkClientId}))},addDestToken:(_ref=useAddToken_async_to_generator(function(quoteResponse){var hexDestChainId,foundDestNetworkConfig,addedDestNetworkConfig,featuredRpc,destNetworkConfig,rpcEndpointIndex,destNetworkClientId,_quoteResponse_quote_destAsset,address,decimals,symbol,image;return useAddToken_ts_generator(this,function(_state){switch(_state.label){case 0:if(foundDestNetworkConfig=networkConfigurations[hexDestChainId=(0,conversion_utils.jT)(quoteResponse.quote.destChainId)])return[3,2];if(!(featuredRpc=network.Kqv.find(function(rpc){return rpc.chainId===hexDestChainId})))throw Error("No featured RPC found");return[4,dispatch((0,_mocks_actions.addNetwork)(featuredRpc))];case 1:addedDestNetworkConfig=_state.sent(),_state.label=2;case 2:if(!(destNetworkConfig=foundDestNetworkConfig||addedDestNetworkConfig))throw Error("No destination network configuration found");return rpcEndpointIndex=destNetworkConfig.defaultRpcEndpointIndex,destNetworkClientId=destNetworkConfig.rpcEndpoints[rpcEndpointIndex].networkClientId,address=(_quoteResponse_quote_destAsset=quoteResponse.quote.destAsset).address,decimals=_quoteResponse_quote_destAsset.decimals,symbol=_quoteResponse_quote_destAsset.symbol,image=_quoteResponse_quote_destAsset.icon,[4,dispatch((0,_mocks_actions.addToken)({address:address,decimals:decimals,symbol:symbol,image:image,networkClientId:destNetworkClientId}))];case 3:return _state.sent(),[2]}})}),function addDestToken(quoteResponse){return _ref.apply(this,arguments)})}}var dist_types=__webpack_require__("./node_modules/@metamask/transaction-controller/dist/types.mjs"),bignumber=__webpack_require__("./node_modules/bignumber.js/bignumber.js"),bridge_controller_dist_types=__webpack_require__("./node_modules/@metamask/bridge-controller/dist/types.mjs"),keyring_api_dist=__webpack_require__("./node_modules/@metamask/keyring-api/dist/index.mjs"),solana_wallet_snap=__webpack_require__("./shared/lib/accounts/solana-wallet-snap.ts"),useMultichainWalletSnapClient=__webpack_require__("./ui/hooks/accounts/useMultichainWalletSnapClient.ts");function useHandleTx_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){reject(error);return}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function useHandleTx_async_to_generator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){useHandleTx_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){useHandleTx_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)})}}function useHandleTx_define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function useHandleTx_object_spread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){useHandleTx_define_property(target,key,source[key])})}return target}function useHandleTx_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function useHandleTx_object_spread_props(target,source){return source=null!=source?source:{},Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):useHandleTx_ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}),target}function useHandleTx_ts_generator(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}}function useHandleTx(){var _ref,_ref1,_ref2,dispatch=(0,es.wA)(),networkAndAccountSupports1559=(0,es.d4)(selectors.PQP),networkGasFeeEstimates=(0,es.d4)(metamask.tV),currentChainId=(0,es.d4)(multichain.aN),shouldUseSmartTransaction=(0,es.d4)(function(state){return(0,modules_selectors.U5)(state,currentChainId)}),networkConfigurationIds=(0,es.d4)(selectors.$JY),handleEvmTx=(_ref=useHandleTx_async_to_generator(function(param){var txType,txParams,fieldsToAddToTxMeta,hexChainId,_ref,maxFeePerGas,maxPriorityFeePerGas,_txParams_gasLimit,maxGasLimit,finalTxParams,networkClientId,txMeta;return useHandleTx_ts_generator(this,function(_state){switch(_state.label){case 0:return txType=param.txType,txParams=param.txParams,fieldsToAddToTxMeta=param.fieldsToAddToTxMeta,hexChainId=(0,conversion_utils.jT)(txParams.chainId),[4,(0,utils.$Q)({networkAndAccountSupports1559:networkAndAccountSupports1559,networkGasFeeEstimates:networkGasFeeEstimates,txParams:txParams,hexChainId:hexChainId})];case 1:if(maxFeePerGas=(_ref=_state.sent()).maxFeePerGas,maxPriorityFeePerGas=_ref.maxPriorityFeePerGas,maxGasLimit=(0,utils.eZ)(null!==(_txParams_gasLimit=txParams.gasLimit)&&void 0!==_txParams_gasLimit?_txParams_gasLimit:0),finalTxParams=useHandleTx_object_spread_props(useHandleTx_object_spread({},txParams),{chainId:hexChainId,gasLimit:maxGasLimit,gas:maxGasLimit,maxFeePerGas:maxFeePerGas,maxPriorityFeePerGas:maxPriorityFeePerGas}),networkClientId=networkConfigurationIds[hexChainId],!(txType===dist_types.D_.bridge&&shouldUseSmartTransaction))return[3,3];return[4,(0,_mocks_actions.addTransaction)(finalTxParams,{networkClientId:networkClientId,requireApproval:!1,type:txType})];case 2:return txMeta=_state.sent(),[3,5];case 3:return[4,(0,_mocks_actions.addTransactionAndWaitForPublish)(finalTxParams,{networkClientId:networkClientId,requireApproval:!1,type:txType})];case 4:txMeta=_state.sent(),_state.label=5;case 5:return dispatch((0,_mocks_actions.updateTransaction)(useHandleTx_object_spread({},txMeta,fieldsToAddToTxMeta),!0)),[4,(0,_mocks_actions.forceUpdateMetamaskState)(dispatch)];case 6:return _state.sent(),[2,txMeta]}})}),function handleEvmTx(_){return _ref.apply(this,arguments)}),selectedAccount=(0,es.d4)(selectors._rF),snapSender=(0,useMultichainWalletSnapClient.ah)(solana_wallet_snap.O),history=(0,react_router.W6)(),unapprovedTemplatedConfirmations=(0,es.d4)(selectors.ZZd),unapprovedConfirmations=(0,es.d4)(selectors.rOW);(0,react.useEffect)(function(){var templatedSnapApproval=unapprovedTemplatedConfirmations.find(function(approval){return approval.origin===solana_wallet_snap.O}),snapApproval=unapprovedConfirmations.find(function(approval){return approval.origin===solana_wallet_snap.O});templatedSnapApproval?history.push("".concat(routes.DL,"/").concat(templatedSnapApproval.id)):snapApproval&&history.push("".concat(routes.s8,"/").concat(snapApproval.id))},[history,unapprovedTemplatedConfirmations,unapprovedConfirmations]);var handleSolanaTx=(_ref1=useHandleTx_async_to_generator(function(param){var txType,txParams,fieldsToAddToTxMeta,snapResponse,signature,txMeta;return useHandleTx_ts_generator(this,function(_state){switch(_state.label){case 0:return txType=param.txType,txParams=param.txParams,fieldsToAddToTxMeta=param.fieldsToAddToTxMeta,[4,dispatch((0,_mocks_actions.setDefaultHomeActiveTabName)("activity"))];case 1:return _state.sent(),[4,snapSender.send({id:crypto.randomUUID(),jsonrpc:"2.0",method:keyring_api_dist.Qr.SubmitRequest,params:{request:{params:{account:{address:selectedAccount.address},transaction:txParams,scope:currentChainId},method:"signAndSendTransaction"},id:crypto.randomUUID(),account:selectedAccount.id,scope:currentChainId}})];case 2:return console.log("===SOLANA=== snap response:",snapResponse=_state.sent()),"string"==typeof snapResponse?signature=snapResponse:snapResponse&&"object"==typeof snapResponse&&snapResponse.result&&"object"==typeof snapResponse.result&&(console.log("===SOLANA=== snap response result:",snapResponse.result),signature=snapResponse.result.signature||snapResponse.result.txid||snapResponse.result.hash||snapResponse.result.txHash),console.log("===SOLANA=== Extracted signature:",signature),console.log("===SOLANA=== Creating bridge transaction meta with ALL fields:",{id:(txMeta=useHandleTx_object_spread_props(useHandleTx_object_spread({},fieldsToAddToTxMeta),{id:crypto.randomUUID(),chainId:currentChainId,networkClientId:selectedAccount.id,time:Date.now(),txParams:{data:txParams},type:txType,status:dist_types.x8.submitted,hash:signature,isSolana:!0,isBridgeTx:!0,actionId:txType,origin:solana_wallet_snap.O})).id,hash:txMeta.hash,isSolana:txMeta.isSolana,isBridgeTx:txMeta.isBridgeTx,type:txMeta.type,chainId:txMeta.chainId,networkClientId:txMeta.networkClientId,time:txMeta.time,status:txMeta.status,origin:txMeta.origin,actionId:txMeta.actionId,fieldsFromParent:useHandleTx_object_spread({},fieldsToAddToTxMeta),txParams:txMeta.txParams,fullObject:txMeta}),[2,txMeta]}})}),function handleSolanaTx(_){return _ref1.apply(this,arguments)}),isSolana=(0,useMultichainSelector.t)(multichain.do);return{handleTx:(_ref2=useHandleTx_async_to_generator(function(param){var txType,txParams,fieldsToAddToTxMeta;return useHandleTx_ts_generator(this,function(_state){return(txType=param.txType,txParams=param.txParams,fieldsToAddToTxMeta=param.fieldsToAddToTxMeta,isSolana&&txType===dist_types.D_.bridge&&"string"==typeof txParams)?(console.log("Handling Solana bridge transaction"),[2,handleSolanaTx({txType:txType,txParams:"string"==typeof txParams?txParams:JSON.stringify(txParams),fieldsToAddToTxMeta:fieldsToAddToTxMeta})]):[2,handleEvmTx({txType:txType,txParams:txParams,fieldsToAddToTxMeta:fieldsToAddToTxMeta})]})}),function(_){return _ref2.apply(this,arguments)})}}function useHandleApprovalTx_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){reject(error);return}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function useHandleApprovalTx_async_to_generator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){useHandleApprovalTx_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){useHandleApprovalTx_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)})}}function useHandleApprovalTx_define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function useHandleApprovalTx_object_spread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){useHandleApprovalTx_define_property(target,key,source[key])})}return target}function useHandleApprovalTx_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function useHandleApprovalTx_object_spread_props(target,source){return source=null!=source?source:{},Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):useHandleApprovalTx_ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}),target}function useHandleApprovalTx_ts_generator(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}}var ALLOWANCE_RESET_ERROR="Eth USDT allowance reset failed",APPROVAL_TX_ERROR="Approve transaction failed";function useHandleApprovalTx(){var _ref,_ref1,handleTx=useHandleTx().handleTx,handleEthUsdtAllowanceReset=(_ref=useHandleApprovalTx_async_to_generator(function(param){var approval,quoteResponse,hexChainId,allowance,_,sentAmount,resetData,txParams,e;return useHandleApprovalTx_ts_generator(this,function(_state){switch(_state.label){case 0:approval=param.approval,quoteResponse=param.quoteResponse,hexChainId=param.hexChainId,_state.label=1;case 1:return _state.trys.push([1,5,,6]),_=bignumber.BigNumber.bind,[4,(0,bridge_actions.Gx)(shared_constants_bridge.YW,hexChainId)];case 2:if(allowance=new(_.apply(bignumber.BigNumber,[void 0,_state.sent()])),sentAmount=new bignumber.BigNumber(quoteResponse.quote.srcTokenAmount).plus(quoteResponse.quote.feeData[bridge_controller_dist_types.zu.METABRIDGE].amount).toString(),!(allowance.lt(sentAmount)&&allowance.gt(0)))return[3,4];return resetData=(0,utils_bridge.Rk)(),txParams=useHandleApprovalTx_object_spread_props(useHandleApprovalTx_object_spread({},approval),{data:resetData}),[4,handleTx({txType:dist_types.D_.bridgeApproval,txParams:txParams,fieldsToAddToTxMeta:{sourceTokenSymbol:quoteResponse.quote.srcAsset.symbol}})];case 3:_state.sent(),_state.label=4;case 4:return[3,6];case 5:throw e=_state.sent(),Error("".concat(ALLOWANCE_RESET_ERROR,": ").concat(e));case 6:return[2]}})}),function handleEthUsdtAllowanceReset(_){return _ref.apply(this,arguments)});return{handleApprovalTx:(_ref1=useHandleApprovalTx_async_to_generator(function(param){var approval,quoteResponse,hexChainId,e;return useHandleApprovalTx_ts_generator(this,function(_state){switch(_state.label){case 0:approval=param.approval,quoteResponse=param.quoteResponse,_state.label=1;case 1:if(_state.trys.push([1,5,,6]),hexChainId=(0,conversion_utils.jT)(approval.chainId),!(0,utils_bridge.mg)(hexChainId,quoteResponse.quote.srcAsset.address))return[3,3];return[4,handleEthUsdtAllowanceReset({approval:approval,quoteResponse:quoteResponse,hexChainId:hexChainId})];case 2:_state.sent(),_state.label=3;case 3:return[4,handleTx({txType:dist_types.D_.bridgeApproval,txParams:approval,fieldsToAddToTxMeta:{sourceTokenSymbol:quoteResponse.quote.srcAsset.symbol}})];case 4:return[2,_state.sent()];case 5:throw e=_state.sent(),Error("".concat(APPROVAL_TX_ERROR,": ").concat(e));case 6:return[2]}})}),function handleApprovalTx(_){return _ref1.apply(this,arguments)})}}var Numeric=__webpack_require__("./shared/modules/Numeric.ts");function useHandleBridgeTx_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){reject(error);return}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function useHandleBridgeTx_async_to_generator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){useHandleBridgeTx_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){useHandleBridgeTx_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)})}}function useHandleBridgeTx_ts_generator(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}}function useHandleBridgeTx(){var _ref,handleTx=useHandleTx().handleTx,dispatch=(0,es.wA)();return{handleBridgeTx:(_ref=useHandleBridgeTx_async_to_generator(function(param){var quoteResponse,approvalTxId,sentAmount,sentAmountDec,isSolana,fieldsToAddToTxMeta,txMeta;return useHandleBridgeTx_ts_generator(this,function(_state){switch(_state.label){case 0:return quoteResponse=param.quoteResponse,approvalTxId=param.approvalTxId,sentAmount=new bignumber.BigNumber(quoteResponse.quote.srcTokenAmount).plus(quoteResponse.quote.feeData[bridge_controller_dist_types.zu.METABRIDGE].amount),sentAmountDec=new Numeric.e(sentAmount,10).shiftedBy(quoteResponse.quote.srcAsset.decimals).toString(),isSolana="string"==typeof quoteResponse.trade,fieldsToAddToTxMeta={destinationChainId:new Numeric.e(quoteResponse.quote.destChainId,10).toPrefixedHexString().toLowerCase(),sourceTokenAmount:quoteResponse.quote.srcTokenAmount,sourceTokenSymbol:quoteResponse.quote.srcAsset.symbol,sourceTokenDecimals:quoteResponse.quote.srcAsset.decimals,sourceTokenAddress:quoteResponse.quote.srcAsset.address,destinationTokenAmount:quoteResponse.quote.destTokenAmount,destinationTokenSymbol:quoteResponse.quote.destAsset.symbol,destinationTokenDecimals:quoteResponse.quote.destAsset.decimals,destinationTokenAddress:quoteResponse.quote.destAsset.address,approvalTxId:approvalTxId,swapTokenValue:sentAmountDec,isSolana:isSolana,isBridgeTx:!0},[4,handleTx({txType:dist_types.D_.bridge,txParams:quoteResponse.trade,fieldsToAddToTxMeta:fieldsToAddToTxMeta})];case 1:return txMeta=_state.sent(),isSolana&&txMeta&&(txMeta.isSolana||(txMeta.isSolana=!0),txMeta.hash&&dispatch({type:"TRANSACTION_CREATED",payload:txMeta})),[2,txMeta]}})}),function handleBridgeTx(_){return _ref.apply(this,arguments)})}}function useSubmitBridgeTransaction_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){reject(error);return}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function useSubmitBridgeTransaction_async_to_generator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){useSubmitBridgeTransaction_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){useSubmitBridgeTransaction_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)})}}function useSubmitBridgeTransaction_define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function useSubmitBridgeTransaction_object_spread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){useSubmitBridgeTransaction_define_property(target,key,source[key])})}return target}function useSubmitBridgeTransaction_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function useSubmitBridgeTransaction_object_spread_props(target,source){return source=null!=source?source:{},Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):useSubmitBridgeTransaction_ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}),target}function useSubmitBridgeTransaction_ts_generator(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}}var debugLog=(0,logging.u)("bridge"),isAllowanceResetError=function(error){var _error_message;return(null!==(_error_message=error.message)&&void 0!==_error_message?_error_message:"").includes(ALLOWANCE_RESET_ERROR)},isApprovalTxError=function(error){var _error_message;return(null!==(_error_message=error.message)&&void 0!==_error_message?_error_message:"").includes(APPROVAL_TX_ERROR)},isHardwareWalletUserRejection=function(error){var _error_message,_error_message_toLowerCase,errorMessage=null!==(_error_message_toLowerCase=null===(_error_message=error.message)||void 0===_error_message?void 0:_error_message.toLowerCase())&&void 0!==_error_message_toLowerCase?_error_message_toLowerCase:"";return errorMessage.includes("ledger")&&(errorMessage.includes("rejected")||errorMessage.includes("denied")||errorMessage.includes("error while signing"))||errorMessage.includes("trezor")&&(errorMessage.includes("cancelled")||errorMessage.includes("rejected"))||errorMessage.includes("lattice")&&errorMessage.includes("rejected")||errorMessage.includes("user rejected")||errorMessage.includes("user cancelled")};function useSubmitBridgeTransaction(){var _ref,history=(0,react_router.W6)(),dispatch=(0,es.wA)(),state=(0,es.d4)(function(allState){return allState}),srcChainId=(0,es.d4)(networks.gr),_useAddToken=useAddToken(),addSourceToken=_useAddToken.addSourceToken,addDestToken=_useAddToken.addDestToken,handleApprovalTx=useHandleApprovalTx().handleApprovalTx,handleBridgeTx=useHandleBridgeTx().handleBridgeTx,hardwareWalletUsed=(0,es.d4)(selectors.SQP),slippage=(0,es.d4)(bridge_selectors.WZ).slippage,selectedAddress=(0,es.d4)(selectors.y7v),trackCrossChainSwapsEvent=(0,useCrossChainSwapsEventTracker.p)(),isEvm=(0,useMultichainSelector.t)(multichain.Bu);return{submitBridgeTransaction:(_ref=useSubmitBridgeTransaction_async_to_generator(function(quoteResponse){var statusRequestCommon,approvalTxMeta,e,commonProperties,allowanceResetTransaction,approvalTransaction,bridgeTxMeta,e1,statusRequest,isSolana;return useSubmitBridgeTransaction_ts_generator(this,function(_state){switch(_state.label){case 0:hardwareWalletUsed&&history.push("".concat(routes.Zj).concat(routes.Bo)),statusRequestCommon={bridgeId:quoteResponse.quote.bridgeId,bridge:quoteResponse.quote.bridges[0],srcChainId:quoteResponse.quote.srcChainId,destChainId:quoteResponse.quote.destChainId,quote:quoteResponse.quote,refuel:!!quoteResponse.quote.refuel},_state.label=1;case 1:if(_state.trys.push([1,4,,8]),!(null==quoteResponse?void 0:quoteResponse.approval))return[3,3];return[4,handleApprovalTx({approval:quoteResponse.approval,quoteResponse:quoteResponse})];case 2:approvalTxMeta=_state.sent(),_state.label=3;case 3:return[3,8];case 4:if(debugLog("Approve transaction failed",e=_state.sent()),!(hardwareWalletUsed&&isHardwareWalletUserRejection(e)))return[3,5];return dispatch((0,bridge_actions.YU)(!0)),history.push("".concat(routes.Zj).concat(routes.aI)),[3,7];case 5:return[4,dispatch((0,_mocks_actions.setDefaultHomeActiveTabName)("activity"))];case 6:_state.sent(),history.push(routes.Sg),_state.label=7;case 7:return commonProperties=getCommonProperties((0,bridge_status_utils.Mt)({quoteResponse:(0,bridge_status_utils.e1)(quoteResponse),bridgeTxMetaId:"dummy-id",startTime:null==approvalTxMeta?void 0:approvalTxMeta.time,slippagePercentage:null!=slippage?slippage:0,initialDestAssetBalance:void 0,targetContractAddress:void 0,account:selectedAddress,statusRequest:statusRequestCommon}),state),allowanceResetTransaction=isAllowanceResetError(e)?{allowance_reset_transaction:bridge_status.cl.FAILED}:void 0,approvalTransaction=isApprovalTxError(e)?{approval_transaction:bridge_status.cl.FAILED}:void 0,trackCrossChainSwapsEvent({event:metametrics.gP.ActionFailed,properties:useSubmitBridgeTransaction_object_spread_props(useSubmitBridgeTransaction_object_spread({},commonProperties,allowanceResetTransaction,approvalTransaction),{error_message:e.message})}),[2];case 8:if(!([network.tx6.LINEA_MAINNET,network.tx6.LINEA_GOERLI,network.tx6.LINEA_SEPOLIA].includes(srcChainId)&&(null==quoteResponse?void 0:quoteResponse.approval)))return[3,10];return debugLog("Delaying submitting bridge tx to make Linea confirmation more likely"),[4,new Promise(function(resolve){return setTimeout(resolve,5e3)})];case 9:_state.sent(),_state.label=10;case 10:return _state.trys.push([10,12,,16]),[4,handleBridgeTx({quoteResponse:quoteResponse,approvalTxId:null==approvalTxMeta?void 0:approvalTxMeta.id})];case 11:return bridgeTxMeta=_state.sent(),[3,16];case 12:if(debugLog("Bridge transaction failed",e1=_state.sent()),!(hardwareWalletUsed&&isHardwareWalletUserRejection(e1)))return[3,13];return dispatch((0,bridge_actions.YU)(!0)),history.push("".concat(routes.Zj).concat(routes.aI)),[3,15];case 13:return[4,dispatch((0,_mocks_actions.setDefaultHomeActiveTabName)("activity"))];case 14:_state.sent(),history.push(routes.Sg),_state.label=15;case 15:return[2];case 16:if(statusRequest=useSubmitBridgeTransaction_object_spread_props(useSubmitBridgeTransaction_object_spread({},statusRequestCommon),{srcTxHash:bridgeTxMeta.hash}),isSolana=!0===bridgeTxMeta.isSolana,dispatch(startPollingForBridgeTxStatus({bridgeTxMeta:bridgeTxMeta,statusRequest:useSubmitBridgeTransaction_object_spread_props(useSubmitBridgeTransaction_object_spread({},statusRequest),{srcTxHash:isSolana&&bridgeTxMeta.hash?bridgeTxMeta.hash:statusRequest.srcTxHash}),quoteResponse:(0,bridge_status_utils.e1)(quoteResponse),slippagePercentage:null!=slippage?slippage:0,startTime:bridgeTxMeta.time})),!isEvm||(quoteResponse.quote.srcAsset.address!==(0,dist_browser.zeroAddress)()&&addSourceToken(quoteResponse),!(quoteResponse.quote.destAsset.address!==(0,dist_browser.zeroAddress)()&&!(0,utils_bridge.FD)(quoteResponse.quote.destChainId))))return[3,18];return[4,addDestToken(quoteResponse)];case 17:_state.sent(),_state.label=18;case 18:return[4,dispatch((0,_mocks_actions.setDefaultHomeActiveTabName)("activity"))];case 19:return _state.sent(),isSolana||history.push({pathname:routes.Sg,state:{stayOnHomePage:!0}}),[2]}})}),function submitBridgeTransaction(quoteResponse){return _ref.apply(this,arguments)})}}function bridge_cta_button_array_like_to_array(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function bridge_cta_button_array_with_holes(arr){if(Array.isArray(arr))return arr}function bridge_cta_button_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){reject(error);return}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function bridge_cta_button_async_to_generator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){bridge_cta_button_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){bridge_cta_button_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)})}}function bridge_cta_button_define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function bridge_cta_button_iterable_to_array_limit(arr,i){var _s,_e,_i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}function bridge_cta_button_non_iterable_rest(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function bridge_cta_button_object_spread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){bridge_cta_button_define_property(target,key,source[key])})}return target}function bridge_cta_button_sliced_to_array(arr,i){return bridge_cta_button_array_with_holes(arr)||bridge_cta_button_iterable_to_array_limit(arr,i)||bridge_cta_button_unsupported_iterable_to_array(arr,i)||bridge_cta_button_non_iterable_rest()}function bridge_cta_button_unsupported_iterable_to_array(o,minLen){if(o){if("string"==typeof o)return bridge_cta_button_array_like_to_array(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if("Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return bridge_cta_button_array_like_to_array(o,minLen)}}function bridge_cta_button_ts_generator(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}}var BridgeCTAButton=function(param){var onFetchNewQuotes=param.onFetchNewQuotes,_param_needsDestinationAddress=param.needsDestinationAddress,needsDestinationAddress=void 0!==_param_needsDestinationAddress&&_param_needsDestinationAddress,t=(0,useI18nContext.P)(),fromToken=(0,es.d4)(bridge_selectors.G8),toToken=(0,es.d4)(bridge_selectors.dJ),fromChain=(0,es.d4)(bridge_selectors.GG),fromAmount=(0,es.d4)(bridge_selectors.$8),_useSelector=(0,es.d4)(bridge_selectors.PK),isLoading=_useSelector.isLoading,activeQuote=_useSelector.activeQuote,isQuoteExpired=(0,es.d4)(function(state){return(0,bridge_selectors.qD)(state,Date.now())}),submitBridgeTransaction=useSubmitBridgeTransaction().submitBridgeTransaction,_useState=bridge_cta_button_sliced_to_array((0,react.useState)(!1),2),isSubmitting=_useState[0],setIsSubmitting=_useState[1],_useSelector1=(0,es.d4)(bridge_selectors.v),isNoQuotesAvailable=_useSelector1.isNoQuotesAvailable,isInsufficientBalance_=_useSelector1.isInsufficientBalance,isInsufficientGasBalance_=_useSelector1.isInsufficientGasBalance,isInsufficientGasForQuote_=_useSelector1.isInsufficientGasForQuote,wasTxDeclined=(0,es.d4)(bridge_selectors.it),balanceAmount=(0,useLatestBalance.A)(fromToken),nativeAsset=(0,react.useMemo)(function(){return(null==fromChain?void 0:fromChain.chainId)?(0,utils_bridge.ts)(fromChain.chainId):null},[null==fromChain?void 0:fromChain.chainId]),nativeAssetBalance=(0,useLatestBalance.A)(nativeAsset),isTxSubmittable=(0,useIsTxSubmittable.a)(),trackCrossChainSwapsEvent=(0,useCrossChainSwapsEventTracker.p)(),quoteRequestProperties=(0,useRequestProperties.u)().quoteRequestProperties,requestMetadataProperties=(0,useRequestMetadataProperties.n)(),tradeProperties=(0,useTradeProperties.L)(),isInsufficientBalance=isInsufficientBalance_(balanceAmount),isInsufficientGasBalance=isInsufficientGasBalance_(nativeAssetBalance),isInsufficientGasForQuote=isInsufficientGasForQuote_(nativeAssetBalance),label=(0,react.useMemo)(function(){return wasTxDeclined?"youDeclinedTheTransaction":isQuoteExpired?"bridgeQuoteExpired":isLoading&&!isTxSubmittable&&!activeQuote||isInsufficientGasBalance||isNoQuotesAvailable?void 0:isInsufficientBalance||isInsufficientGasForQuote?"alertReasonInsufficientBalance":fromAmount?needsDestinationAddress?"bridgeSelectDestinationAccount":isTxSubmittable?"submit":"swapSelectToken":toToken?needsDestinationAddress?"bridgeEnterAmountAndSelectAccount":"bridgeEnterAmount":needsDestinationAddress?"bridgeSelectTokenAmountAndAccount":"bridgeSelectTokenAndAmount"},[isLoading,fromAmount,toToken,isTxSubmittable,isInsufficientBalance,isInsufficientGasBalance,isInsufficientGasForQuote,wasTxDeclined,isQuoteExpired,needsDestinationAddress,activeQuote,isNoQuotesAvailable]),secondaryButtonLabel=(0,react.useMemo)(function(){if(wasTxDeclined||isQuoteExpired)return"bridgeFetchNewQuotes"},[wasTxDeclined,isQuoteExpired]);return activeQuote&&!secondaryButtonLabel?react.createElement(component_library.$$,{width:design_system.Zf.Full,size:activeQuote?component_library.w9.Md:component_library.w9.Lg,variant:design_system.J3.bodyMd,"data-testid":"bridge-cta-button",style:{boxShadow:"none"},onClick:bridge_cta_button_async_to_generator(function(){return bridge_cta_button_ts_generator(this,function(_state){switch(_state.label){case 0:if(!(activeQuote&&isTxSubmittable&&!isSubmitting))return[3,4];_state.label=1;case 1:return _state.trys.push([1,,3,4]),setIsSubmitting(!0),quoteRequestProperties&&requestMetadataProperties&&tradeProperties&&trackCrossChainSwapsEvent({event:metametrics.gP.ActionSubmitted,properties:bridge_cta_button_object_spread({},quoteRequestProperties,requestMetadataProperties,tradeProperties)}),[4,submitBridgeTransaction(activeQuote)];case 2:return _state.sent(),[3,4];case 3:return setIsSubmitting(!1),[7];case 4:return[2]}})}),loading:isSubmitting,disabled:!isTxSubmittable||isQuoteExpired||isSubmitting||needsDestinationAddress},label?t(label):""):react.createElement(layout.fI,{alignItems:design_system.k2.center,justifyContent:design_system.A9.center,gap:1},react.createElement(component_library.EY,{variant:design_system.J3.bodyMd,textAlign:design_system.nO.Center,color:design_system.r7.textAlternativeSoft},label?t(label):""),secondaryButtonLabel&&react.createElement(component_library.vx,{as:"a",variant:design_system.J3.bodyMd,style:{whiteSpace:"nowrap"},onClick:onFetchNewQuotes},t(secondaryButtonLabel)))};try{BridgeCTAButton.displayName="BridgeCTAButton",BridgeCTAButton.__docgenInfo={description:"",displayName:"BridgeCTAButton",props:{onFetchNewQuotes:{defaultValue:null,description:"",name:"onFetchNewQuotes",required:!0,type:{name:"() => void"}},needsDestinationAddress:{defaultValue:{value:"false"},description:"",name:"needsDestinationAddress",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["ui/pages/bridge/prepare/bridge-cta-button.tsx#BridgeCTAButton"]={docgenInfo:BridgeCTAButton.__docgenInfo,name:"BridgeCTAButton",path:"ui/pages/bridge/prepare/bridge-cta-button.tsx#BridgeCTAButton"})}catch(__react_docgen_typescript_loader_error){}var destination_account_picker=__webpack_require__("./ui/pages/bridge/prepare/components/destination-account-picker.tsx");function prepare_bridge_page_array_like_to_array(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function prepare_bridge_page_array_with_holes(arr){if(Array.isArray(arr))return arr}function prepare_bridge_page_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){reject(error);return}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function prepare_bridge_page_async_to_generator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){prepare_bridge_page_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){prepare_bridge_page_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)})}}function prepare_bridge_page_define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function prepare_bridge_page_iterable_to_array_limit(arr,i){var _s,_e,_i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}function prepare_bridge_page_non_iterable_rest(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function prepare_bridge_page_object_spread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{},ownKeys=Object.keys(source);"function"==typeof Object.getOwnPropertySymbols&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){prepare_bridge_page_define_property(target,key,source[key])})}return target}function prepare_bridge_page_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function prepare_bridge_page_object_spread_props(target,source){return source=null!=source?source:{},Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):prepare_bridge_page_ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}),target}function prepare_bridge_page_sliced_to_array(arr,i){return prepare_bridge_page_array_with_holes(arr)||prepare_bridge_page_iterable_to_array_limit(arr,i)||prepare_bridge_page_unsupported_iterable_to_array(arr,i)||prepare_bridge_page_non_iterable_rest()}function prepare_bridge_page_unsupported_iterable_to_array(o,minLen){if(o){if("string"==typeof o)return prepare_bridge_page_array_like_to_array(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if("Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return prepare_bridge_page_array_like_to_array(o,minLen)}}function prepare_bridge_page_ts_generator(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}}let prepare_bridge_page=function(){var _activeQuote_toTokenAmount,_activeQuote_toTokenAmount1,_activeQuote_toTokenAmount2,_toChain_chainId,_toToken_occurrences,dispatch=(0,es.wA)(),t=(0,useI18nContext.P)(),isSwap=(0,useIsMultichainSwap.v)(),fromToken=(0,es.d4)(bridge_selectors.G8),fromTokens=(0,es.d4)(selectors.iM3),toToken=(0,es.d4)(bridge_selectors.dJ),fromChains=(0,es.d4)(bridge_selectors.dS),toChains=(0,es.d4)(bridge_selectors.Uv),fromChain=(0,es.d4)(bridge_selectors.GG),toChain=(0,es.d4)(bridge_selectors.b6),isFromTokensLoading=(0,react.useMemo)(function(){return!(fromChain&&(0,utils_bridge.FD)(fromChain.chainId))&&0===Object.keys(fromTokens).length},[fromTokens,fromChain]),fromAmount=(0,es.d4)(bridge_selectors.$8),fromAmountInCurrency=(0,es.d4)(bridge_selectors.tt),providerConfig=(0,useMultichainSelector.t)(multichain.c0),slippage=(0,es.d4)(bridge_selectors.OL),quoteRequest=(0,es.d4)(bridge_selectors.WZ),_useSelector=(0,es.d4)(bridge_selectors.PK),isLoading=_useSelector.isLoading,activeQuote_=_useSelector.activeQuote,isQuoteGoingToRefresh=_useSelector.isQuoteGoingToRefresh,refreshRate=(0,es.d4)(bridge_selectors.c2),isQuoteExpired=(0,es.d4)(function(state){return(0,bridge_selectors.qD)(state,Date.now())}),wasTxDeclined=(0,es.d4)(bridge_selectors.it),activeQuote=isQuoteExpired&&(!quoteRequest.insufficientBal||fromChain&&(0,utils_bridge.FD)(fromChain.chainId))?void 0:activeQuote_,isEvm=(0,useMultichainSelector.t)(multichain.Bu),selectedEvmAccount=(0,es.d4)(selectors.CoC),selectedSolanaAccount=(0,es.d4)(multichain._o),selectedMultichainAccount=(0,useMultichainSelector.t)(selectors._rF),selectedAccount=isEvm?selectedEvmAccount:selectedMultichainAccount,keyring=(0,es.d4)(selectors.X3W),isUsingHardwareWallet=(0,hardware.c)(keyring.type),hardwareWalletName=(0,es.d4)(bridge_selectors.fP),isTxSubmittable=(0,useIsTxSubmittable.a)(),locale=(0,es.d4)(locale_locale.gA),ticker=(0,es.d4)(metamask.Zt),_useSelector1=(0,es.d4)(bridge_selectors.v),isEstimatedReturnLow=_useSelector1.isEstimatedReturnLow,isNoQuotesAvailable=_useSelector1.isNoQuotesAvailable,isInsufficientGasForQuote=_useSelector1.isInsufficientGasForQuote,isInsufficientBalance=_useSelector1.isInsufficientBalance,quotesRefreshCount=(0,es.d4)(bridge_selectors.PK).quotesRefreshCount,openBuyCryptoInPdapp=(0,useRamps.A)().openBuyCryptoInPdapp,nativeAsset=(0,react.useMemo)(function(){return(null==fromChain?void 0:fromChain.chainId)?(0,utils_bridge.ts)(fromChain.chainId):null},[null==fromChain?void 0:fromChain.chainId]),nativeAssetBalance=(0,useLatestBalance.A)(nativeAsset),tokenAlert=useTokenAlerts().tokenAlert,srcTokenBalance=(0,useLatestBalance.A)(fromToken),_useDestinationAccount=useDestinationAccount(isSwap),selectedDestinationAccount=_useDestinationAccount.selectedDestinationAccount,setSelectedDestinationAccount=_useDestinationAccount.setSelectedDestinationAccount,_useTokensWithFiltering=useTokensWithFiltering(null!==(_toChain_chainId=null==toChain?void 0:toChain.chainId)&&void 0!==_toChain_chainId?_toChain_chainId:null==fromChain?void 0:fromChain.chainId,fromToken,null!==selectedDestinationAccount&&"id"in selectedDestinationAccount?selectedDestinationAccount.id:void 0),toTokenListGenerator=_useTokensWithFiltering.filteredTokenListGenerator,isToTokensLoading=_useTokensWithFiltering.isLoading,flippedRequestProperties=(0,useRequestProperties.u)().flippedRequestProperties,trackCrossChainSwapsEvent=(0,useCrossChainSwapsEventTracker.p)(),millisecondsUntilNextRefresh=useCountdownTimer(),_useState=prepare_bridge_page_sliced_to_array((0,react.useState)(!1),2),rotateSwitchTokens=_useState[0],setRotateSwitchTokens=_useState[1],_useState1=prepare_bridge_page_sliced_to_array((0,react.useState)(!0),2),isLowReturnBannerOpen=_useState1[0],setIsLowReturnBannerOpen=_useState1[1];(0,react.useEffect)(function(){return setIsLowReturnBannerOpen(!0)},[quotesRefreshCount]);var _useState2=prepare_bridge_page_sliced_to_array((0,react.useState)(!0),2),isTokenAlertBannerOpen=_useState2[0],setIsTokenAlertBannerOpen=_useState2[1];(0,react.useEffect)(function(){return setIsTokenAlertBannerOpen(!0)},[tokenAlert]);var _useState3=prepare_bridge_page_sliced_to_array((0,react.useState)(!0),2),isCannotVerifyTokenBannerOpen=_useState3[0],setIsCannotVerifyTokenBannerOpen=_useState3[1];(0,react.useEffect)(function(){return setIsCannotVerifyTokenBannerOpen(!0)},[null==toToken?void 0:toToken.address]);var _useState4=prepare_bridge_page_sliced_to_array((0,react.useState)(!1),2),isSwitchingTemporarilyDisabled=_useState4[0],setIsSwitchingTemporarilyDisabled=_useState4[1];(0,react.useEffect)(function(){setIsSwitchingTemporarilyDisabled(!0);var switchButtonTimer=setTimeout(function(){setIsSwitchingTemporarilyDisabled(!1)},time.Z2);return function(){clearTimeout(switchButtonTimer)}},[rotateSwitchTokens]),(0,react.useEffect)(function(){if(activeQuote){var _srcAsset_icon,_ref,_activeQuote_quote=activeQuote.quote,srcAsset=_activeQuote_quote.srcAsset,destAsset=_activeQuote_quote.destAsset,destChainId=_activeQuote_quote.destChainId,srcChainId=_activeQuote_quote.srcChainId;srcAsset&&destAsset&&destChainId&&(dispatch((0,bridge_actions.qd)(destChainId)),dispatch((0,bridge_actions.LI)(prepare_bridge_page_object_spread_props(prepare_bridge_page_object_spread({},destAsset),{chainId:destChainId,image:null!==(_ref=null!==(_srcAsset_icon=srcAsset.icon)&&void 0!==_srcAsset_icon?_srcAsset_icon:destAsset.iconUrl)&&void 0!==_ref?_ref:"",address:destAsset.address}))),dispatch((0,bridge_actions.iw)(prepare_bridge_page_object_spread_props(prepare_bridge_page_object_spread({},srcAsset),{chainId:srcChainId,image:srcAsset.icon||srcAsset.iconUrl||"",address:srcAsset.address}))))}else dispatch((0,bridge_actions.QC)())},[]);var insufficientBalanceBannerRef=(0,react.useRef)(null),isEstimatedReturnLowRef=(0,react.useRef)(null),tokenAlertBannerRef=(0,react.useRef)(null);(0,react.useEffect)(function(){var _insufficientBalanceBannerRef_current,_isEstimatedReturnLowRef_current;isInsufficientGasForQuote(nativeAssetBalance)&&(null===(_insufficientBalanceBannerRef_current=insufficientBalanceBannerRef.current)||void 0===_insufficientBalanceBannerRef_current||_insufficientBalanceBannerRef_current.scrollIntoView({behavior:"smooth",block:"start"})),isEstimatedReturnLow&&(null===(_isEstimatedReturnLowRef_current=isEstimatedReturnLowRef.current)||void 0===_isEstimatedReturnLowRef_current||_isEstimatedReturnLowRef_current.scrollIntoView({behavior:"smooth",block:"start"}))},[isEstimatedReturnLow,isInsufficientGasForQuote(nativeAssetBalance),isLowReturnBannerOpen]);var isToOrFromSolana=(0,es.d4)(bridge_selectors.f),isDestinationSolana=(0,react.useMemo)(function(){return null!=toChain&&!!toChain.chainId&&(0,utils_bridge.FD)(toChain.chainId)},[null==toChain?void 0:toChain.chainId]),quoteParams=(0,react.useMemo)(function(){var _providerConfig_rpcUrl,_selectedAccount_address;return{srcTokenAddress:null==fromToken?void 0:fromToken.address,destTokenAddress:null==toToken?void 0:toToken.address,srcTokenAmount:fromAmount&&(null==fromToken?void 0:fromToken.decimals)?(0,swaps_utils.w_)(["","."].includes(fromAmount)?"0":fromAmount,fromToken.decimals).toFixed().split(".")[0]:void 0,srcChainId:null==fromChain?void 0:fromChain.chainId,destChainId:null==toChain?void 0:toChain.chainId,insufficientBal:null!=providerConfig&&null!==(_providerConfig_rpcUrl=providerConfig.rpcUrl)&&void 0!==_providerConfig_rpcUrl&&!!_providerConfig_rpcUrl.includes("localhost")||void 0,slippage:slippage,walletAddress:null!==(_selectedAccount_address=null==selectedAccount?void 0:selectedAccount.address)&&void 0!==_selectedAccount_address?_selectedAccount_address:"",destWalletAddress:null==selectedDestinationAccount?void 0:selectedDestinationAccount.address}},[null==fromToken?void 0:fromToken.address,null==fromToken?void 0:fromToken.decimals,null==toToken?void 0:toToken.address,fromAmount,null==fromChain?void 0:fromChain.chainId,null==toChain?void 0:toChain.chainId,slippage,null==selectedAccount?void 0:selectedAccount.address,null==selectedDestinationAccount?void 0:selectedDestinationAccount.address,null==providerConfig?void 0:providerConfig.rpcUrl]),debouncedUpdateQuoteRequestInController=(0,react.useCallback)((0,lodash.debounce)(function(p){dispatch((0,bridge_actions.dB)(p))},300),[]);(0,react.useEffect)(function(){dispatch((0,bridge_actions.OR)(null)),debouncedUpdateQuoteRequestInController(quoteParams)},[quoteParams,debouncedUpdateQuoteRequestInController]);var trackInputEvent=(0,react.useCallback)(function(properties){trackCrossChainSwapsEvent({event:metametrics.gP.InputChanged,properties:properties})},[]),search=(0,react_router.zy)().search,history=(0,react_router.W6)();(0,react.useEffect)(function(){if((null==fromChain?void 0:fromChain.chainId)&&!isFromTokensLoading){var _ref,searchParams=new URLSearchParams(search),tokenAddressFromUrl=searchParams.get("token");if(tokenAddressFromUrl){var removeTokenFromUrl=function(){var newParams=new URLSearchParams(searchParams);newParams.delete("token"),history.replace({search:newParams.toString()})};(_ref=prepare_bridge_page_async_to_generator(function(){var tokenAddress,tokenMetadata,matchedToken;return prepare_bridge_page_ts_generator(this,function(_state){switch(_state.label){case 0:if(!(0,utils_bridge.FD)(fromChain.chainId))return[3,2];if(tokenAddress=tokenAddressFromUrl,!(0,asset_utils.tO)(tokenAddress,(0,caip_formatters.Kr)(fromChain.chainId)))return removeTokenFromUrl(),[2];return[4,(0,asset_utils.oR)(tokenAddress,fromChain.chainId)];case 1:if(!(tokenMetadata=_state.sent()))return removeTokenFromUrl(),[2];return dispatch((0,bridge_actions.iw)(prepare_bridge_page_object_spread_props(prepare_bridge_page_object_spread({},tokenMetadata),{chainId:fromChain.chainId,image:tokenMetadata.image||""}))),removeTokenFromUrl(),[2];case 2:switch(matchedToken=fromTokens[tokenAddressFromUrl.toLowerCase()],tokenAddressFromUrl){case null==fromToken?void 0:fromToken.address:removeTokenFromUrl();break;case null==matchedToken?void 0:matchedToken.address:case(null==matchedToken?void 0:matchedToken.address)?(0,dist_browser.toChecksumAddress)(matchedToken.address):void 0:dispatch((0,bridge_actions.iw)(prepare_bridge_page_object_spread_props(prepare_bridge_page_object_spread({},matchedToken),{image:matchedToken.iconUrl,chainId:fromChain.chainId}))),removeTokenFromUrl();break;default:removeTokenFromUrl()}return[2]}})}),function handleToken(){return _ref.apply(this,arguments)})()}}},[fromChain,fromToken,fromTokens,search,isFromTokensLoading]),(0,react.useEffect)(function(){isSwap&&(dispatch((0,bridge_actions.i3)(void 0)),fromChain&&!toToken&&(dispatch((0,bridge_actions.qd)(fromChain.chainId)),dispatch((0,bridge_actions.LI)(shared_constants_bridge.QB))))},[]);var occurrences=Number(null!==(_toToken_occurrences=null==toToken?void 0:toToken.occurrences)&&void 0!==_toToken_occurrences?_toToken_occurrences:0),toTokenIsNotNative=(null==toToken?void 0:toToken.address)&&!(0,utils_bridge.c2)(null==toToken?void 0:toToken.address),isSolanaBridgeEnabled=(0,es.d4)(bridge_selectors.N0),_useState5=prepare_bridge_page_sliced_to_array((0,react.useState)(!1),2),showBlockExplorerToast=_useState5[0],setShowBlockExplorerToast=_useState5[1],_useState6=prepare_bridge_page_sliced_to_array((0,react.useState)(null),2),blockExplorerToken=_useState6[0],setBlockExplorerToken=_useState6[1],_useState7=prepare_bridge_page_sliced_to_array((0,react.useState)(0),2),toastTriggerCounter=_useState7[0],setToastTriggerCounter=_useState7[1];return react.createElement(react.Fragment,null,react.createElement(layout.VP,{className:"prepare-bridge-page",gap:8},react.createElement(BridgeInputGroup,{header:t(isSwap?"swapSwapFrom":"bridgeFrom"),token:fromToken,onAmountChange:function(e){dispatch((0,bridge_actions.DT)(e))},onAssetChange:function(token){var _token_address,bridgeToken=prepare_bridge_page_object_spread_props(prepare_bridge_page_object_spread({},token),{address:null!==(_token_address=token.address)&&void 0!==_token_address?_token_address:(0,dist_browser.zeroAddress)()});dispatch((0,bridge_actions.iw)(bridgeToken)),dispatch((0,bridge_actions.DT)(null)),token.address===(null==toToken?void 0:toToken.address)&&dispatch((0,bridge_actions.LI)(null)),bridgeToken.address&&trackInputEvent({input:"token_source",value:bridgeToken.address})},networkProps:{network:fromChain,networks:isSwap?void 0:fromChains,onNetworkChange:function(networkConfig){(null==networkConfig?void 0:networkConfig.chainId)&&networkConfig.chainId!==(null==fromChain?void 0:fromChain.chainId)&&trackInputEvent({input:"chain_source",value:networkConfig.chainId}),(null==networkConfig?void 0:networkConfig.chainId)&&networkConfig.chainId===(null==toChain?void 0:toChain.chainId)&&(dispatch((0,bridge_actions.qd)(null)),dispatch((0,bridge_actions.LI)(null))),(0,utils_bridge.FD)(networkConfig.chainId)&&selectedSolanaAccount?dispatch((0,_mocks_actions.setSelectedAccount)(selectedSolanaAccount.address)):(0,utils.x8)(networkConfig)&&(dispatch((0,_mocks_actions.setSelectedAccount)(selectedEvmAccount.address)),dispatch((0,_mocks_actions.setActiveNetworkWithError)(networkConfig.rpcEndpoints[networkConfig.defaultRpcEndpointIndex].networkClientId||networkConfig.chainId))),dispatch((0,bridge_actions.iw)(null)),dispatch((0,bridge_actions.DT)(null))},header:t("yourNetworks")},isMultiselectEnabled:!isSwap,onMaxButtonClick:function(value){dispatch((0,bridge_actions.DT)(value))},amountInFiat:fromAmountInCurrency.valueInCurrency.toString(),amountFieldProps:{testId:"from-amount",autoFocus:!0,value:fromAmount||void 0},isTokenListLoading:isFromTokensLoading,buttonProps:{testId:"bridge-source-button"},onBlockExplorerClick:function(token){setBlockExplorerToken(token),setShowBlockExplorerToast(!0),setToastTriggerCounter(function(prev){return prev+1})}}),react.createElement(layout.VP,{height:design_system.Zf.Full,paddingTop:8,backgroundColor:design_system.i0.backgroundAlternativeSoft,style:{position:"relative"}},react.createElement(component_library.az,{className:"prepare-bridge-page__switch-tokens",display:design_system.nl.Flex,backgroundColor:design_system.i0.backgroundAlternativeSoft,style:{position:"absolute",top:"calc(-20px + 1px)",right:"calc(50% - 20px)",border:"2px solid var(--color-background-default)",borderRadius:"100%",opacity:1,width:40,height:40,justifyContent:design_system.A9.center}},react.createElement(component_library.a2,{iconProps:{className:classnames_default()({rotate:rotateSwitchTokens})},style:{alignSelf:"center",borderRadius:"100%",width:"100%",height:"100%"},"data-testid":"switch-tokens",ariaLabel:"switch-tokens",iconName:component_library.$M.Arrow2Down,color:design_system.Li.iconAlternativeSoft,disabled:isSwitchingTemporarilyDisabled||!(0,quote.Al)(quoteRequest,!1)||!isSwap&&!(0,utils.x8)(toChain),onClick:function(){if(isSwap||(0,utils.x8)(toChain)){if(setRotateSwitchTokens(!rotateSwitchTokens),flippedRequestProperties&&trackCrossChainSwapsEvent({event:metametrics.gP.InputSourceDestinationFlipped,properties:flippedRequestProperties}),!isSwap){var toChainClientId=(null==toChain?void 0:toChain.defaultRpcEndpointIndex)!==void 0&&(null==toChain?void 0:toChain.rpcEndpoints)&&(0,utils.x8)(toChain)?toChain.rpcEndpoints[toChain.defaultRpcEndpointIndex].networkClientId:void 0;(null==toChain?void 0:toChain.chainId)&&(0,caip_formatters.Kr)(toChain.chainId)===multichain_networks.AF.SOLANA&&selectedSolanaAccount?dispatch((0,_mocks_actions.setSelectedAccount)(selectedSolanaAccount.address)):dispatch((0,_mocks_actions.setSelectedAccount)(selectedEvmAccount.address)),toChainClientId&&dispatch((0,_mocks_actions.setActiveNetwork)(toChainClientId)),(null==fromChain?void 0:fromChain.chainId)&&dispatch((0,bridge_actions.qd)(fromChain.chainId))}dispatch((0,bridge_actions.iw)(toToken)),dispatch((0,bridge_actions.LI)(fromToken))}}})),react.createElement(BridgeInputGroup,{header:t("swapSelectToken"),token:toToken,onAssetChange:function(token){var _token_address,bridgeToken=prepare_bridge_page_object_spread_props(prepare_bridge_page_object_spread({},token),{address:null!==(_token_address=token.address)&&void 0!==_token_address?_token_address:(0,dist_browser.zeroAddress)()});bridgeToken.address&&trackInputEvent({input:"token_destination",value:bridgeToken.address}),dispatch((0,bridge_actions.LI)(bridgeToken))},networkProps:isSwap?void 0:{network:toChain,networks:toChains,onNetworkChange:function(networkConfig){networkConfig.chainId!==(null==toChain?void 0:toChain.chainId)&&trackInputEvent({input:"chain_destination",value:networkConfig.chainId}),dispatch((0,bridge_actions.qd)(networkConfig.chainId)),dispatch((0,bridge_actions.LI)(null))},header:t(isSwap?"swapSwapTo":"bridgeTo"),shouldDisableNetwork:function(param){return param.chainId===(null==fromChain?void 0:fromChain.chainId)}},customTokenListGenerator:toChain||isSwap?toTokenListGenerator:void 0,amountInFiat:(null==activeQuote?void 0:null===(_activeQuote_toTokenAmount=activeQuote.toTokenAmount)||void 0===_activeQuote_toTokenAmount?void 0:_activeQuote_toTokenAmount.valueInCurrency)||void 0,amountFieldProps:{testId:"to-amount",readOnly:!0,disabled:!0,value:(null==activeQuote?void 0:null===(_activeQuote_toTokenAmount1=activeQuote.toTokenAmount)||void 0===_activeQuote_toTokenAmount1?void 0:_activeQuote_toTokenAmount1.amount)?(0,utils_quote.NJ)(locale,activeQuote.toTokenAmount.amount):"0",autoFocus:!1,className:(null==activeQuote?void 0:null===(_activeQuote_toTokenAmount2=activeQuote.toTokenAmount)||void 0===_activeQuote_toTokenAmount2?void 0:_activeQuote_toTokenAmount2.amount)?"amount-input defined":"amount-input"},isTokenListLoading:isToTokensLoading,buttonProps:{testId:"bridge-destination-button"},onBlockExplorerClick:function(token){setBlockExplorerToken(token),setShowBlockExplorerToast(!0),setToastTriggerCounter(function(prev){return prev+1})}}),isSolanaBridgeEnabled&&isToOrFromSolana&&react.createElement(component_library.az,{padding:6,paddingBottom:3,paddingTop:3},react.createElement(destination_account_picker.a,{onAccountSelect:setSelectedDestinationAccount,selectedSwapToAccount:selectedDestinationAccount,isDestinationSolana:isDestinationSolana})),react.createElement(layout.VP,{height:design_system.Zf.Full,justifyContent:design_system.A9.center},isLoading&&!activeQuote?react.createElement(react.Fragment,null,react.createElement(component_library.EY,{textAlign:design_system.nO.Center,color:design_system.r7.textAlternativeSoft},t("swapFetchingQuotes")),react.createElement(MascotBackgroundAnimation,{height:"64",width:"64"})):null),react.createElement(layout.fI,{padding:6,paddingTop:activeQuote?0:6},react.createElement(layout.VP,{gap:3,className:activeQuote?"highlight":"",style:prepare_bridge_page_object_spread({paddingBottom:(null==activeQuote?void 0:activeQuote.approval)?16:"revert-layer",paddingTop:(null==activeQuote?void 0:activeQuote.approval)?16:void 0,paddingInline:16,position:"relative",overflow:"hidden"},activeQuote&&!wasTxDeclined&&isSolanaBridgeEnabled?{boxShadow:"var(--shadow-size-sm) var(--color-shadow-default)",backgroundColor:"var(--color-background-default)",borderRadius:8}:{})},activeQuote&&isQuoteGoingToRefresh&&react.createElement(layout.fI,{style:{position:"absolute",left:0,top:0,width:"calc(100% * (".concat(refreshRate," - ").concat(millisecondsUntilNextRefresh,") / ").concat(refreshRate,")"),height:4,maxWidth:"100%",transition:"width 1s linear"},backgroundColor:design_system.i0.primaryMuted}),!wasTxDeclined&&activeQuote&&(isSolanaBridgeEnabled?react.createElement(multichain_bridge_quote_card.m,null):react.createElement(BridgeQuoteCard,null)),react.createElement(page.wi,{padding:0,flexDirection:design_system.bo.Column,gap:2},react.createElement(BridgeCTAButton,{onFetchNewQuotes:function(){debouncedUpdateQuoteRequestInController(quoteParams)},needsDestinationAddress:isSolanaBridgeEnabled&&isToOrFromSolana&&!selectedDestinationAccount}),(null==activeQuote?void 0:activeQuote.approval)&&fromAmount&&fromToken?react.createElement(layout.fI,{justifyContent:design_system.A9.center,gap:1},react.createElement(component_library.EY,{color:design_system.r7.textAlternativeSoft,variant:design_system.J3.bodyXs,textAlign:design_system.nO.Center},isUsingHardwareWallet?t("willApproveAmountForBridgingHardware"):t("willApproveAmountForBridging",[(0,utils_quote.NJ)(locale,fromAmount,fromToken.symbol)])),fromAmount&&react.createElement(layout.m_,{display:design_system.nl.InlineBlock,position:component_library.$x.Top,offset:[-48,8],title:t("grantExactAccess")},t(isUsingHardwareWallet?"bridgeApprovalWarningForHardware":"bridgeApprovalWarning",[fromAmount,fromToken.symbol]))):null))),isUsingHardwareWallet&&isTxSubmittable&&hardwareWalletName&&activeQuote&&react.createElement(component_library.b8,{marginInline:4,marginBottom:3,title:t("hardwareWalletSubmissionWarningTitle"),textAlign:design_system.nO.Left},react.createElement("ul",{style:{listStyle:"disc"}},react.createElement("li",null,react.createElement(component_library.EY,{variant:design_system.J3.bodyMd},t("hardwareWalletSubmissionWarningStep1",[hardwareWalletName]))),react.createElement("li",null,react.createElement(component_library.EY,{variant:design_system.J3.bodyMd},t("hardwareWalletSubmissionWarningStep2",[hardwareWalletName]))))),isNoQuotesAvailable&&!isQuoteExpired&&react.createElement(component_library.b8,{marginInline:4,marginBottom:10,severity:component_library.OU.Danger,description:t("noOptionsAvailableMessage"),textAlign:design_system.nO.Left}),isCannotVerifyTokenBannerOpen&&isEvm&&toToken&&toTokenIsNotNative&&occurrences<2&&react.createElement(component_library.b8,{severity:component_library.OU.Warning,title:t("bridgeTokenCannotVerifyTitle"),description:t("bridgeTokenCannotVerifyDescription"),marginInline:4,marginBottom:3,textAlign:design_system.nO.Left,onClose:function(){return setIsCannotVerifyTokenBannerOpen(!1)}}),tokenAlert&&isTokenAlertBannerOpen&&react.createElement(component_library.b8,{ref:tokenAlertBannerRef,marginInline:4,marginBottom:3,title:tokenAlert.titleId?t(tokenAlert.titleId):"",severity:tokenAlert.type===TokenFeatureType.MALICIOUS?component_library.OU.Danger:component_library.OU.Warning,description:tokenAlert.descriptionId?t(tokenAlert.descriptionId):tokenAlert.description,textAlign:design_system.nO.Left,onClose:function(){return setIsTokenAlertBannerOpen(!1)}}),!isLoading&&activeQuote&&!isInsufficientBalance(srcTokenBalance)&&isInsufficientGasForQuote(nativeAssetBalance)&&react.createElement(component_library.b8,{ref:isEstimatedReturnLowRef,marginInline:4,marginBottom:3,title:t("bridgeValidationInsufficientGasTitle",[ticker]),severity:component_library.OU.Danger,description:t("bridgeValidationInsufficientGasMessage",[ticker]),textAlign:design_system.nO.Left,actionButtonLabel:t("buyMoreAsset",[ticker]),actionButtonOnClick:function(){return openBuyCryptoInPdapp()}}),isEstimatedReturnLow&&isLowReturnBannerOpen&&activeQuote&&react.createElement(component_library.b8,{ref:insufficientBalanceBannerRef,marginInline:4,marginBottom:3,title:t("lowEstimatedReturnTooltipTitle"),severity:component_library.OU.Warning,description:t("lowEstimatedReturnTooltipMessage",[100*constants_bridge.kU]),textAlign:design_system.nO.Left,onClose:function(){return setIsLowReturnBannerOpen(!1)}}))),showBlockExplorerToast&&blockExplorerToken&&react.createElement("div",{style:{position:"absolute",bottom:50,left:"50%",transform:"translateX(-50%)",zIndex:1e3,width:"100%",display:"flex",justifyContent:"center"}},react.createElement(components_multichain.N9,null,react.createElement(components_multichain.y8,{key:toastTriggerCounter,text:t("bridgeBlockExplorerLinkCopied"),onClose:function(){return setShowBlockExplorerToast(!1)},autoHideTime:2500,startAdornment:react.createElement(component_library.eK,{name:blockExplorerToken.symbol,size:component_library.pS.Sm,src:blockExplorerToken.image})}))))},awaiting_signatures_cancel_button=function(){var t=(0,react.useContext)(i18n.gJ),history=(0,react_router.W6)();return react.createElement(component_library.$n,{onClick:function(){history.push("".concat(routes.Zj).concat(routes.aI))}},t("cancel"))};var isEqual=__webpack_require__("./node_modules/lodash/isEqual.js"),isEqual_default=__webpack_require__.n(isEqual),selectors_selectors=__webpack_require__("./ui/selectors/selectors.js"),pulse_loader=__webpack_require__("./ui/components/ui/pulse-loader/index.js"),contexts_metametrics=__webpack_require__("./ui/contexts/metametrics.js");function AwaitingSignatures(){var _activeQuote_sentAmount,t=(0,useI18nContext.P)(),activeQuote=(0,es.d4)(bridge_selectors.PK,es.bN).activeQuote,fromAmount=null==activeQuote?void 0:null===(_activeQuote_sentAmount=activeQuote.sentAmount)||void 0===_activeQuote_sentAmount?void 0:_activeQuote_sentAmount.amount,fromToken=(0,es.d4)(bridge_selectors.G8,isEqual_default()),toToken=(0,es.d4)(bridge_selectors.dJ,isEqual_default()),fromChain=(0,es.d4)(bridge_selectors.GG,isEqual_default()),toChain=(0,es.d4)(bridge_selectors.b6,isEqual_default()),hardwareWalletUsed=(0,es.d4)(selectors_selectors.SQP),hardwareWalletType=(0,es.d4)(selectors_selectors.ks6),needsTwoConfirmations=!!(null==activeQuote?void 0:activeQuote.approval),trackEvent=(0,react.useContext)(contexts_metametrics.O2);return(0,react.useEffect)(function(){var _activeQuote_quote,_activeQuote_quote1,_fromToken_symbol,_toToken_symbol,_activeQuote_quote_srcTokenAmount,_activeQuote_quote_destTokenAmount;trackEvent({event:"Awaiting Signature(s) on a HW wallet",category:metametrics.FZ.Swaps,properties:{needs_two_confirmations:needsTwoConfirmations,token_from:null!==(_fromToken_symbol=null==fromToken?void 0:fromToken.symbol)&&void 0!==_fromToken_symbol?_fromToken_symbol:"",token_to:null!==(_toToken_symbol=null==toToken?void 0:toToken.symbol)&&void 0!==_toToken_symbol?_toToken_symbol:"",is_hardware_wallet:hardwareWalletUsed,hardware_wallet_type:null!=hardwareWalletType?hardwareWalletType:""},sensitiveProperties:{token_from_amount:null!==(_activeQuote_quote_srcTokenAmount=null==activeQuote?void 0:null===(_activeQuote_quote=activeQuote.quote)||void 0===_activeQuote_quote?void 0:_activeQuote_quote.srcTokenAmount)&&void 0!==_activeQuote_quote_srcTokenAmount?_activeQuote_quote_srcTokenAmount:"",token_to_amount:null!==(_activeQuote_quote_destTokenAmount=null==activeQuote?void 0:null===(_activeQuote_quote1=activeQuote.quote)||void 0===_activeQuote_quote1?void 0:_activeQuote_quote1.destTokenAmount)&&void 0!==_activeQuote_quote_destTokenAmount?_activeQuote_quote_destTokenAmount:""}})},[]),react.createElement("div",{className:"awaiting-bridge-signatures"},react.createElement(component_library.az,{paddingLeft:6,paddingRight:6,height:design_system.Zf.Full,justifyContent:design_system.A9.center,display:design_system.nl.Flex,flexDirection:design_system.bo.Column},react.createElement(component_library.az,{marginTop:3,marginBottom:4},react.createElement(pulse_loader.A,null)),!needsTwoConfirmations&&react.createElement(component_library.EY,{color:design_system.r7.textDefault,variant:design_system.J3.headingMd,as:"h3"},t("swapConfirmWithHwWallet")),needsTwoConfirmations&&react.createElement(react.Fragment,null,react.createElement(component_library.EY,{variant:design_system.J3.bodyMdBold,marginTop:2},t("bridgeConfirmTwoTransactions")),react.createElement("ul",{className:"awaiting-bridge-signatures__steps"},react.createElement("li",null,react.createElement(component_library.dy,{size:component_library.SM.Sm,backgroundColor:design_system.i0.primaryMuted,color:design_system.r7.primaryDefault,marginRight:2},"1"),t("bridgeAllowSwappingOf",[react.createElement(component_library.EY,{as:"span",variant:design_system.J3.bodyMd,key:"allowAmount"},fromAmount),react.createElement(component_library.EY,{as:"span",variant:design_system.J3.bodyMd,key:"allowToken"},null==fromToken?void 0:fromToken.symbol),react.createElement(component_library.EY,{as:"span",variant:design_system.J3.bodyMd,key:"allowNetwork"},null==fromChain?void 0:fromChain.name)])),react.createElement("li",null,react.createElement(component_library.dy,{size:component_library.SM.Sm,backgroundColor:design_system.i0.primaryMuted,color:design_system.r7.primaryDefault,marginRight:2},"2"),t("bridgeFromTo",[react.createElement(component_library.EY,{as:"span",variant:design_system.J3.bodyMd,key:"fromAmount"},fromAmount),react.createElement(component_library.EY,{as:"span",variant:design_system.J3.bodyMd,key:"fromToken"},null==fromToken?void 0:fromToken.symbol),react.createElement(component_library.EY,{as:"span",variant:design_system.J3.bodyMd,key:"toNetwork"},null==toChain?void 0:toChain.name)]))),react.createElement(component_library.EY,{variant:design_system.J3.bodyXs},t("bridgeGasFeesSplit")))))}var bridge_transaction_settings_modal=__webpack_require__("./ui/pages/bridge/prepare/bridge-transaction-settings-modal.tsx");function bridge_array_like_to_array(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function bridge_array_with_holes(arr){if(Array.isArray(arr))return arr}function bridge_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){reject(error);return}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function bridge_async_to_generator(fn){return function(){var self=this,args=arguments;return new Promise(function(resolve,reject){var gen=fn.apply(self,args);function _next(value){bridge_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){bridge_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)})}}function bridge_iterable_to_array_limit(arr,i){var _s,_e,_i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}function bridge_non_iterable_rest(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function bridge_sliced_to_array(arr,i){return bridge_array_with_holes(arr)||bridge_iterable_to_array_limit(arr,i)||bridge_unsupported_iterable_to_array(arr,i)||bridge_non_iterable_rest()}function bridge_unsupported_iterable_to_array(o,minLen){if(o){if("string"==typeof o)return bridge_array_like_to_array(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if("Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return bridge_array_like_to_array(o,minLen)}}function bridge_ts_generator(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}}let pages_bridge=function(){var _ref,_ref1,t=(0,react.useContext)(i18n.gJ);useSwapsFeatureFlags(),(0,useBridging.A)();var history=(0,react_router.W6)(),dispatch=(0,es.wA)(),isBridgeEnabled=(0,es.d4)(selectors.fKD),selectedNetworkClientId=(0,es.d4)(networks.EQ),resetControllerAndInputStates=(_ref=bridge_async_to_generator(function(){return bridge_ts_generator(this,function(_state){switch(_state.label){case 0:return[4,dispatch((0,bridge_actions.QC)())];case 1:return _state.sent(),[2]}})}),function resetControllerAndInputStates(){return _ref.apply(this,arguments)});(0,react.useEffect)(function(){return window.addEventListener("beforeunload",resetControllerAndInputStates),function(){window.removeEventListener("beforeunload",resetControllerAndInputStates),resetControllerAndInputStates()}},[]),(0,useGasFeeEstimates.K)(selectedNetworkClientId),useBridgeExchangeRates(),useQuoteFetchEvents();var isSwap=(0,useIsMultichainSwap.v)(),redirectToDefaultRoute=(_ref1=bridge_async_to_generator(function(){return bridge_ts_generator(this,function(_state){switch(_state.label){case 0:return history.push({pathname:routes.Sg,state:{stayOnHomePage:!0}}),dispatch((0,swaps.pr)()),[4,dispatch((0,actions.resetBackgroundSwapsState)())];case 1:return _state.sent(),[4,resetControllerAndInputStates()];case 2:return _state.sent(),[2]}})}),function redirectToDefaultRoute(){return _ref1.apply(this,arguments)}),_useState=bridge_sliced_to_array((0,react.useState)(!1),2),isSettingsModalOpen=_useState[0],setIsSettingsModalOpen=_useState[1];return react.createElement(page.YW,{className:"bridge__container"},react.createElement(page.Y9,{textProps:{variant:design_system.J3.headingSm},startAccessory:react.createElement(component_library.a2,{iconName:component_library.$M.ArrowLeft,size:component_library.f3.Sm,ariaLabel:t("back"),onClick:redirectToDefaultRoute}),endAccessory:react.createElement(component_library.a2,{iconName:component_library.$M.Setting,size:component_library.f3.Sm,ariaLabel:t("settings"),onClick:function(){setIsSettingsModalOpen(!0)}})},t(isSwap?"swap":"bridge")),react.createElement(page.UC,{padding:0},react.createElement(react_router.dO,null,react.createElement(FeatureToggledRoute,{redirectRoute:routes.cd,flag:isBridgeEnabled,path:routes.Zj+routes.aI,render:function(){return react.createElement(react.Fragment,null,react.createElement(bridge_transaction_settings_modal.s,{isOpen:isSettingsModalOpen,onClose:function(){setIsSettingsModalOpen(!1)}}),react.createElement(prepare_bridge_page,null))}}),react.createElement(react_router.qh,{path:routes.Zj+routes.Bo},react.createElement(page.UC,null,react.createElement(AwaitingSignatures,null)),react.createElement(page.wi,null,react.createElement(awaiting_signatures_cancel_button,null))))))};var mock_quotes_erc20_erc20=__webpack_require__("./test/data/bridge/mock-quotes-erc20-erc20.json");function prepare_bridge_page_stories_define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var Wrapper=function(param){var children=param.children;return react.createElement("div",{style:{height:"600px"}},react.createElement(react_router.fS,{initialEntries:[routes.Zj+routes.aI]},children))},mockFeatureFlags={extensionSupport:!0,extensionConfig:{refreshRate:3e4,maxRefreshCount:5,support:!0,chains:{"0x1":{isActiveSrc:!0,isActiveDest:!0},"0xa":{isActiveSrc:!0,isActiveDest:!0}}}},mockBridgeSlice={toChainId:network.tx6.LINEA_MAINNET,toNativeExchangeRate:1,toTokenExchangeRate:.99,fromTokenInputValue:"1"},DefaultStory=function(){return react.createElement(pages_bridge,null)};DefaultStory.storyName="Default",DefaultStory.decorators=[function(Story){return react.createElement(es.Kq,{store:(0,store.A)((0,mock_bridge_store.$)({featureFlagOverrides:mockFeatureFlags,bridgeSliceOverrides:mockBridgeSlice,bridgeStateOverrides:{quotes:[],destTokens:{"0x1234":{symbol:"USDC",address:"0x1234",decimals:6}},srcTokens:{"0x0b2C639c533813f4Aa9D7837CAf62653d097Ff85":{symbol:"USDC",address:"0x0b2C639c533813f4Aa9D7837CAf62653d097Ff85",decimals:6}},quotesLastFetchedMs:Date.now()},metamaskStateOverrides:{useExternalServices:!0,currencyRates:{ETH:{conversionRate:2514.5}},marketData:{"0x1":prepare_bridge_page_stories_define_property({},"0x0b2C639c533813f4Aa9D7837CAf62653d097Ff85",{price:39762010419237126e-20,contractPercentChange1d:.004,priceChange1d:4e-5})}}}))},react.createElement(Wrapper,null,react.createElement(Story,null)))}];var LoadingStory=function(){return react.createElement(pages_bridge,null)};LoadingStory.storyName="Loading Quotes",LoadingStory.decorators=[function(Story){return react.createElement(Wrapper,null,react.createElement(es.Kq,{store:(0,store.A)((0,mock_bridge_store.$)({featureFlagOverrides:mockFeatureFlags,bridgeSliceOverrides:mockBridgeSlice,bridgeStateOverrides:{quotes:[],quotesLastFetched:134,quotesLoadingStatus:bridge_controller_dist_types.IZ.LOADING,destTokens:{"0x1234":{symbol:"USDC",address:"0x1234",decimals:6}},srcTokens:{"0x0b2C639c533813f4Aa9D7837CAf62653d097Ff85":{symbol:"USDC",address:"0x0b2C639c533813f4Aa9D7837CAf62653d097Ff85",decimals:6}}},metamaskStateOverrides:{useExternalServices:!0,currencyRates:{ETH:{conversionRate:2514.5}},marketData:{"0x1":prepare_bridge_page_stories_define_property({},"0x0b2C639c533813f4Aa9D7837CAf62653d097Ff85",{price:39762010419237126e-20,contractPercentChange1d:.004,priceChange1d:4e-5})}}}))},react.createElement(Story,null)))}];var NoQuotesStory=function(){return react.createElement(pages_bridge,null)};NoQuotesStory.storyName="No Quotes",NoQuotesStory.decorators=[function(Story){return react.createElement(Wrapper,null,react.createElement(es.Kq,{store:(0,store.A)((0,mock_bridge_store.$)({featureFlagOverrides:mockFeatureFlags,bridgeSliceOverrides:mockBridgeSlice,bridgeStateOverrides:{quotes:[],quotesLastFetched:134,quotesLoadingStatus:bridge_controller_dist_types.IZ.FETCHED,destTokens:{"0x1234":{symbol:"USDC",address:"0x1234",decimals:6}},srcTokens:{"0x0b2C639c533813f4Aa9D7837CAf62653d097Ff85":{symbol:"USDC",address:"0x0b2C639c533813f4Aa9D7837CAf62653d097Ff85",decimals:6}}},metamaskStateOverrides:{useExternalServices:!0,currencyRates:{ETH:{conversionRate:2514.5}},marketData:{"0x1":prepare_bridge_page_stories_define_property({},"0x0b2C639c533813f4Aa9D7837CAf62653d097Ff85",{price:39762010419237126e-20,contractPercentChange1d:.004,priceChange1d:4e-5})}}}))},react.createElement(Story,null)))}];var QuotesFetchedStory=function(){return react.createElement(pages_bridge,null)};QuotesFetchedStory.storyName="Quotes Available",QuotesFetchedStory.decorators=[function(Story){return react.createElement(Wrapper,null,react.createElement(es.Kq,{store:(0,store.A)((0,mock_bridge_store.$)({featureFlagOverrides:mockFeatureFlags,bridgeSliceOverrides:mockBridgeSlice,bridgeStateOverrides:{quotes:mock_quotes_erc20_erc20,quotesLastFetched:Date.now(),quotesLoadingStatus:bridge_controller_dist_types.IZ.FETCHED,destTokens:{"0x1234":{symbol:"USDC",address:"0x1234",decimals:6}},srcTokens:{"0x0b2C639c533813f4Aa9D7837CAf62653d097Ff85":{symbol:"USDC",address:"0x0b2C639c533813f4Aa9D7837CAf62653d097Ff85",decimals:6}}},metamaskStateOverrides:{useExternalServices:!0,currencyRates:{ETH:{conversionRate:2514.5}},marketData:{"0x1":prepare_bridge_page_stories_define_property({},"0x0b2C639c533813f4Aa9D7837CAf62653d097Ff85",{price:39762010419237126e-20,contractPercentChange1d:.004,priceChange1d:4e-5})}}}))},react.createElement(Story,null)))}];let prepare_bridge_page_stories={title:"Pages/Bridge/CrossChainSwapPage",component:pages_bridge};DefaultStory.parameters={...DefaultStory.parameters,docs:{...DefaultStory.parameters?.docs,source:{originalSource:"() => {\n  return <CrossChainSwap />;\n}",...DefaultStory.parameters?.docs?.source}}},LoadingStory.parameters={...LoadingStory.parameters,docs:{...LoadingStory.parameters?.docs,source:{originalSource:"() => {\n  return <CrossChainSwap />;\n}",...LoadingStory.parameters?.docs?.source}}},NoQuotesStory.parameters={...NoQuotesStory.parameters,docs:{...NoQuotesStory.parameters?.docs,source:{originalSource:"() => {\n  return <CrossChainSwap />;\n}",...NoQuotesStory.parameters?.docs?.source}}},QuotesFetchedStory.parameters={...QuotesFetchedStory.parameters,docs:{...QuotesFetchedStory.parameters?.docs,source:{originalSource:"() => {\n  return <CrossChainSwap />;\n}",...QuotesFetchedStory.parameters?.docs?.source}}};let __namedExportsOrder=["DefaultStory","LoadingStory","NoQuotesStory","QuotesFetchedStory"]},"./shared/constants/terms.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{T:()=>TERMS_OF_USE_LINK});var TERMS_OF_USE_LINK="https://consensys.io/terms-of-use/"},"./ui/components/ui/mascot/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>_mascot_component__WEBPACK_IMPORTED_MODULE_0__.A});var _mascot_component__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./ui/components/ui/mascot/mascot.component.js")},"./ui/components/ui/mascot/mascot.component.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>Mascot});var prop_types__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/prop-types/index.js"),prop_types__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_4__),react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_metamask_logo__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@metamask/logo/src/index.js"),_metamask_logo__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_metamask_logo__WEBPACK_IMPORTED_MODULE_1__),lodash__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/lodash/lodash.js"),_helpers_utils_build_types__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./ui/helpers/utils/build-types.js");function _assert_this_initialized(self){if(void 0===self)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _class_call_check(instance,Constructor){if(!(instance instanceof Constructor))throw TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _create_class(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}function _define_property(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _get_prototype_of(o){return(_get_prototype_of=Object.setPrototypeOf?Object.getPrototypeOf:function getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_set_prototype_of(subClass,superClass)}function _possible_constructor_return(self,call){return call&&("object"===_type_of(call)||"function"==typeof call)?call:_assert_this_initialized(self)}function _set_prototype_of(o,p){return(_set_prototype_of=Object.setPrototypeOf||function setPrototypeOf(o,p){return o.__proto__=p,o})(o,p)}function _type_of(obj){return obj&&"undefined"!=typeof Symbol&&obj.constructor===Symbol?"symbol":typeof obj}function _is_native_reflect_construct(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function _create_super(Derived){var hasNativeReflectConstruct=_is_native_reflect_construct();return function _createSuperInternal(){var result,Super=_get_prototype_of(Derived);return result=hasNativeReflectConstruct?Reflect.construct(Super,arguments,_get_prototype_of(this).constructor):Super.apply(this,arguments),_possible_constructor_return(this,result)}}var directionTargetGenerator=function(param){var top=param.top,left=param.left,height=param.height,width=param.width,horizontalMiddle=left+width/2,verticalMiddle=top+height/2;return{up:{x:horizontalMiddle,y:top-height},down:{x:horizontalMiddle,y:top+2*height},left:{x:left-width,y:verticalMiddle},right:{x:left+2*width,y:verticalMiddle},middle:{x:horizontalMiddle,y:verticalMiddle}}},Mascot=function(Component){_inherits(Mascot,Component);var _super=_create_super(Mascot);function Mascot(props){_class_call_check(this,Mascot),_this=_super.call(this,props);var _this,width=props.width,height=props.height,followMouse=props.followMouse;return _this.logo=_metamask_logo__WEBPACK_IMPORTED_MODULE_1___default()({followMouse:followMouse,pxNotRatio:!0,width:width,height:height,meshJson:(0,_helpers_utils_build_types__WEBPACK_IMPORTED_MODULE_3__.Z3)("foxMeshJson"),verticalFieldOfView:Math.PI/37.5,near:100,far:340}),_this.mascotContainer=(0,react__WEBPACK_IMPORTED_MODULE_0__.createRef)(),_this.refollowMouse=(0,lodash__WEBPACK_IMPORTED_MODULE_2__.debounce)(_this.logo.setFollowMouse.bind(_this.logo,!0),1e3),_this.unfollowMouse=_this.logo.setFollowMouse.bind(_this.logo,!1),_this}return _create_class(Mascot,[{key:"handleAnimationEvents",value:function handleAnimationEvents(){this.animations||(this.animations=this.props.animationEventEmitter,this.animations.on("point",this.lookAt.bind(this)),this.animations.on("setFollowMouse",this.logo.setFollowMouse.bind(this.logo)))}},{key:"lookAt",value:function lookAt(target){this.unfollowMouse(),this.logo.lookAtAndRender(target),this.refollowMouse()}},{key:"componentDidMount",value:function componentDidMount(){this.mascotContainer.current.appendChild(this.logo.container),this.directionTargetMap=directionTargetGenerator(this.mascotContainer.current.getBoundingClientRect());var _this_props=this.props,lookAtTarget=_this_props.lookAtTarget,lookAtDirection=_this_props.lookAtDirection;(null==lookAtTarget?void 0:lookAtTarget.x)&&(null==lookAtTarget?void 0:lookAtTarget.y)?this.logo.lookAtAndRender(lookAtTarget):lookAtDirection&&this.logo.lookAtAndRender(this.directionTargetMap[lookAtDirection])}},{key:"componentDidUpdate",value:function componentDidUpdate(prevProps){var tmp=prevProps.lookAtTarget,prevTarget=void 0===tmp?{}:tmp,tmp1=prevProps.lookAtDirection,prevFollowMouse=prevProps.followMouse,_this_props=this.props,_this_props_lookAtTarget=_this_props.lookAtTarget,lookAtTarget=void 0===_this_props_lookAtTarget?{}:_this_props_lookAtTarget,followMouse=_this_props.followMouse,lookAtDirection=_this_props.lookAtDirection;lookAtDirection&&(void 0===tmp1?null:tmp1)!==lookAtDirection?this.logo.lookAtAndRender(this.directionTargetMap[lookAtDirection]):((null==lookAtTarget?void 0:lookAtTarget.x)!==(null==prevTarget?void 0:prevTarget.x)||(null==lookAtTarget?void 0:lookAtTarget.y)!==(null==prevTarget?void 0:prevTarget.y))&&this.logo.lookAtAndRender(lookAtTarget),prevFollowMouse!==followMouse&&(this.unfollowMouse(),followMouse&&this.refollowMouse())}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.animations=this.props.animationEventEmitter,this.animations.removeAllListeners(),this.logo.container.remove(),this.logo.stopAnimation()}},{key:"render",value:function render(){return this.handleAnimationEvents(),react__WEBPACK_IMPORTED_MODULE_0__.createElement("div",{ref:this.mascotContainer,style:{zIndex:0}})}}]),Mascot}(react__WEBPACK_IMPORTED_MODULE_0__.Component);_define_property(Mascot,"propTypes",{animationEventEmitter:prop_types__WEBPACK_IMPORTED_MODULE_4___default().object.isRequired,width:prop_types__WEBPACK_IMPORTED_MODULE_4___default().string,height:prop_types__WEBPACK_IMPORTED_MODULE_4___default().string,followMouse:prop_types__WEBPACK_IMPORTED_MODULE_4___default().bool,lookAtTarget:prop_types__WEBPACK_IMPORTED_MODULE_4___default().object,lookAtDirection:prop_types__WEBPACK_IMPORTED_MODULE_4___default().oneOf(["up","down","left","right","middle"])}),_define_property(Mascot,"defaultProps",{width:"200",height:"200",followMouse:!0,lookAtTarget:{},lookAtDirection:null}),Mascot.__docgenInfo={description:"",methods:[{name:"handleAnimationEvents",docblock:null,modifiers:[],params:[],returns:null},{name:"lookAt",docblock:null,modifiers:[],params:[{name:"target",optional:!1,type:null}],returns:null}],displayName:"Mascot",props:{width:{defaultValue:{value:"'200'",computed:!1},description:"",type:{name:"string"},required:!1},height:{defaultValue:{value:"'200'",computed:!1},description:"",type:{name:"string"},required:!1},followMouse:{defaultValue:{value:"true",computed:!1},description:"",type:{name:"bool"},required:!1},lookAtTarget:{defaultValue:{value:"{}",computed:!1},description:"",type:{name:"object"},required:!1},lookAtDirection:{defaultValue:{value:"null",computed:!1},description:"",type:{name:"enum",value:[{value:"'up'",computed:!1},{value:"'down'",computed:!1},{value:"'left'",computed:!1},{value:"'right'",computed:!1},{value:"'middle'",computed:!1}]},required:!1},animationEventEmitter:{description:"",type:{name:"object"},required:!0}}}},"./ui/helpers/utils/build-types.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Z3:()=>getBuildSpecificAsset,Vb:()=>isBeta,YT:()=>isFlask});let flask_mascot_namespaceObject=JSON.parse('{"chunks":[{"faces":[[0,1,2],[2,3,0],[4,5,2],[6,3,2],[2,5,6],[7,8,9],[10,3,6],[10,50,7],[7,3,10],[7,9,3],[49,0,9],[3,9,0],[2,1,4]],"name":"left ear","gradient":"left-ear-gradient"},{"faces":[[53,54,55],[55,56,53],[57,56,55],[58,59,55],[55,54,58],[60,61,62],[63,58,54],[63,60,89],[60,63,54],[60,54,61],[88,61,53],[54,53,61],[55,59,57]],"name":"right ear","gradient":"right-ear-gradient"},{"color":[22,22,22],"faces":[[11,12,13]],"name":"left eye"},{"color":[22,22,22],"faces":[[64,65,66]],"name":"right eye"},{"faces":[[14,15,11],[11,16,14]],"name":"left inner eye","gradient":"left-inner-eye-gradient"},{"faces":[[17,12,18]],"name":"left outer eye","gradient":"left-outer-eye-gradient"},{"faces":[[41,64,37]],"name":"right lower inner eye","gradient":"right-inner-eye-gradient"},{"faces":[[67,68,66]],"name":"right outer eye","gradient":"right-outer-eye-gradient"},{"color":[223,117,84],"faces":[[19,20,21],[21,22,19],[20,19,23],[23,24,20],[23,25,24],[19,22,26],[26,27,19],[23,28,29],[23,29,30],[25,23,30],[29,51,52],[52,30,29],[27,26,69],[69,70,27],[70,71,72],[72,27,70],[72,71,73],[51,74,72],[52,51,72],[73,52,72],[19,27,74],[74,28,19],[51,29,28],[28,74,51],[74,27,72],[28,23,19]],"name":"lower chin"},{"color":[255,159,90],"faces":[[21,20,24],[24,31,21]],"name":"left lower snout"},{"color":[255,159,90],"faces":[[69,71,70],[71,69,75]],"name":"right lower snout"},{"color":[147,131,250],"faces":[[31,24,18]],"name":"left upper snout"},{"faces":[[6,5,16],[16,17,6]],"name":"left forehead","gradient":"left-forehead-gradient"},{"faces":[[24,32,33],[33,34,24]],"name":"left lower cheek","gradient":"left-lower-cheek-gradient"},{"faces":[[5,4,35]],"name":"left top ear","gradient":"left-top-ear-gradient"},{"color":[147,131,250],"faces":[[75,68,71]],"name":"right upper snout"},{"faces":[[58,67,40],[40,59,58]],"name":"right forhead","gradient":"right-forehead-gradient"},{"faces":[[71,76,77],[77,78,71]],"name":"right lower cheek","gradient":"right-lower-cheek-gradient"},{"faces":[[24,34,18]],"name":"left middle cheek","gradient":"left-middle-cheek-gradient"},{"color":[156,90,221],"faces":[[16,13,12],[12,17,16],[13,16,11]],"name":"left above eye"},{"faces":[[71,68,76]],"name":"right middle cheek","gradient":"right-middle-cheek-gradient"},{"color":[156,90,221],"faces":[[40,67,66],[66,65,40],[65,64,40]],"name":"right above eye"},{"color":[22,22,22],"faces":[[36,15,37],[37,38,36],[31,39,22],[22,21,31],[31,15,36],[36,39,31],[75,69,26],[26,80,75],[75,80,38],[38,37,75],[38,80,39],[39,36,38],[39,80,26],[26,22,39]],"name":"nose"},{"faces":[[17,33,10],[17,18,34],[34,33,17],[10,6,17]],"name":"left upper cheek","gradient":"left-upper-cheek-gradient"},{"faces":[[11,15,31],[31,18,11],[18,12,11]],"name":"left below eye","gradient":"left-below-eye-gradient"},{"faces":[[14,16,40],[40,41,14],[59,5,35],[35,79,59],[14,41,37],[37,15,14],[5,59,40],[40,16,5]],"name":"forehead","gradient":"forehead-gradient"},{"faces":[[67,63,77],[67,77,76],[76,68,67],[63,67,58]],"name":"right upper cheek","gradient":"right-upper-cheek-gradient"},{"faces":[[64,68,75],[75,37,64],[68,64,66]],"name":"right below eye","gradient":"right-below-eye-gradient"},{"faces":[[35,4,42],[4,1,42],[42,43,44],[44,35,42],[45,43,42],[42,10,45],[30,32,24],[24,25,30],[30,33,32],[33,30,10],[44,43,46],[43,45,47],[47,46,43],[48,47,45],[45,30,48],[30,45,10],[49,42,0],[8,7,42],[50,42,7],[50,10,42],[1,0,42],[42,9,8],[42,49,9],[79,81,57],[57,81,56],[82,79,35],[35,44,82],[81,79,82],[82,83,81],[84,63,81],[81,83,84],[44,46,85],[85,82,44],[52,73,71],[71,78,52],[52,78,77],[77,63,52],[82,85,83],[83,85,86],[86,84,83],[87,52,84],[84,86,87],[52,63,84],[88,53,81],[62,81,60],[89,60,81],[89,81,63],[56,81,53],[81,62,61],[81,61,88],[48,87,86],[86,47,48],[47,86,85],[85,46,47],[48,30,52],[52,87,48]],"name":"back","gradient":"back-gradient"},{"faces":[[57,59,79]],"name":"right top ear","gradient":"right-top-ear-gradient"},{"faces":[[64,41,40]],"name":"right inner upper eye","gradient":"right-inner-eye-gradient"}],"gradients":{"left-inner-eye-gradient":{"type":"linear","x1":"41.97721822541966%","y1":"67.79239690721649%","x2":"44.56654676258992%","y2":"67.79239690721649%","gradientUnits":"userSpaceOnUse","stops":[{"stop-color":"#BA86F3"},{"offset":"0.5281","stop-color":"#B786F4"},{"offset":"0.8987","stop-color":"#AE86F5"},{"offset":"1","stop-color":"#AA86F6"}]},"right-inner-eye-gradient":{"type":"linear","x1":"56.72805755395684%","y1":"81.08904639175258%","x2":"56.72805755395684%","y2":"54.49574742268041%","gradientUnits":"userSpaceOnUse","stops":[{"stop-color":"#BA86F3"},{"offset":"0.5281","stop-color":"#B786F4"},{"offset":"0.8987","stop-color":"#AE86F5"},{"offset":"1","stop-color":"#AA86F6"}]},"left-middle-cheek-gradient":{"type":"linear","x1":"25.107913669064747%","y1":"72.68865979381442%","x2":"25.107913669064747%","y2":"89.44690721649484%","gradientUnits":"userSpaceOnUse","stops":[{"stop-color":"#6848BA"},{"offset":"0.3363","stop-color":"#6356D5"}]},"right-middle-cheek-gradient":{"type":"linear","x1":"74.89208633093526%","y1":"51.32938144329896%","x2":"74.89208633093526%","y2":"94.76301546391753%","gradientUnits":"userSpaceOnUse","stops":[{"stop-color":"#6848BA"},{"offset":"0.3363","stop-color":"#6356D5"}]},"right-forehead-gradient":{"type":"linear","x1":"67.00671462829736%","y1":"30.13930412371134%","x2":"67.00671462829736%","y2":"54.49561855670103%","gradientUnits":"userSpaceOnUse","stops":[{"stop-color":"#DC69E6"},{"offset":"1","stop-color":"#C289F3"}]},"left-forehead-gradient":{"type":"linear","x1":"32.99340527577938%","y1":"30.13930412371134%","x2":"32.99340527577938%","y2":"54.49561855670103%","gradientUnits":"userSpaceOnUse","stops":[{"stop-color":"#DC69E6"},{"offset":"1","stop-color":"#C289F3"}]},"right-top-ear-gradient":{"type":"linear","x1":"95.056858513189448%","y1":"15.06958762886598%","x2":"57.31654676258992%","y2":"15.06958762886598%","gradientUnits":"userSpaceOnUse","stops":[{"stop-color":"#BB65ED"},{"offset":"1","stop-color":"#E560E3"}]},"left-top-ear-gradient":{"type":"linear","x1":"4.943141486810552%","y1":"15.06958762886598%","x2":"42.68345323741008%","y2":"15.06958762886598%","gradientUnits":"userSpaceOnUse","stops":[{"stop-color":"#BB65ED"},{"offset":"1","stop-color":"#E560E3"}]},"left-lower-cheek-gradient":{"type":"linear","x1":"15.103956834532372%","y1":"72.6889175257732%","x2":"15.103956834532372%","y2":"96.03221649484537%","gradientUnits":"userSpaceOnUse","stops":[{"stop-color":"#906EF7"},{"offset":"1","stop-color":"#575ADE"}]},"right-lower-cheek-gradient":{"type":"linear","x1":"84.91570743405276%","y1":"72.6889175257732%","x2":"84.91570743405276%","y2":"96.03221649484537%","gradientUnits":"userSpaceOnUse","stops":[{"stop-color":"#906EF7"},{"offset":"1","stop-color":"#575ADE"}]},"right-outer-eye-gradient":{"type":"linear","x1":"68.7720623501199%","y1":"63.14909793814433%","x2":"78.03057553956835%","y2":"63.14909793814433%","gradientUnits":"userSpaceOnUse","stops":[{"stop-color":"#BA86F3"},{"offset":"0.5281","stop-color":"#B786F4"},{"offset":"0.8987","stop-color":"#AE86F5"},{"offset":"1","stop-color":"#AA86F6"}]},"left-outer-eye-gradient":{"type":"linear","x1":"21.969424460431654%","y1":"63.14909793814433%","x2":"31.227937649880094%","y2":"63.14909793814433%","gradientUnits":"userSpaceOnUse","stops":[{"stop-color":"#BA86F3"},{"offset":"0.5281","stop-color":"#B786F4"},{"offset":"0.8987","stop-color":"#AE86F5"},{"offset":"1","stop-color":"#AA86F6"}]},"left-ear-gradient":{"type":"linear","x1":"50%","y1":"30%","x2":"4%","y2":"4%","gradientUnits":"userSpaceOnUse","stops":[{"stop-color":"#541758"},{"offset":"0.4286","stop-color":"#4F206C"},{"offset":"0.62","stop-color":"#4D2577"},{"offset":"1","stop-color":"#8B45B6"}]},"right-ear-gradient":{"type":"linear","x1":"50%","y1":"30%","x2":"96%","y2":"4%","gradientUnits":"userSpaceOnUse","stops":[{"stop-color":"#541758"},{"offset":"0.4286","stop-color":"#4F206C"},{"offset":"0.62","stop-color":"#4D2577"},{"offset":"1","stop-color":"#8B45B6"}]},"left-below-eye-gradient":{"type":"linear","x1":"30.914028776978412%","y1":"72.83646907216496%","x2":"44.56654676258992%","y2":"72.83646907216496%","gradientUnits":"userSpaceOnUse","stops":[{"stop-color":"#C8A8F7"},{"offset":"1","stop-color":"#BAAAFB"}]},"right-below-eye-gradient":{"type":"linear","x1":"55.43345323741007%","y1":"72.83646907216496%","x2":"69.12517985611511%","y2":"72.83646907216496%","gradientUnits":"userSpaceOnUse","stops":[{"stop-color":"#C8A8F7"},{"offset":"1","stop-color":"#BAAAFB"}]},"left-upper-cheek-gradient":{"type":"linear","x1":"16.02589928057554%","y1":"43.35154639175258%","x2":"16.02589928057554%","y2":"72.85773195876288%","gradientUnits":"userSpaceOnUse","stops":[{"stop-color":"#B65FE5"},{"offset":"1","stop-color":"#ADA2FC"}]},"right-upper-cheek-gradient":{"type":"linear","x1":"83.99364508393285%","y1":"43.35154639175258%","x2":"83.99364508393285%","y2":"72.85773195876288%","gradientUnits":"userSpaceOnUse","stops":[{"stop-color":"#B65FE5"},{"offset":"1","stop-color":"#ADA2FC"}]},"forehead-gradient":{"type":"linear","x1":"50%","y1":"12.790180412371136%","x2":"50%","y2":"81.08904639175258%","gradientUnits":"userSpaceOnUse","stops":[{"stop-color":"#FB7FE4"},{"offset":"1","stop-color":"#BCABFB"}]},"back-gradient":{"type":"linear","x1":"50%","y1":"12.790180412371136%","x2":"50%","y2":"81.08904639175258%","gradientUnits":"userSpaceOnUse","stops":[{"stop-color":"#FB7FE4"},{"offset":"1","stop-color":"#5C5CE0"}]}},"positions":[[111.024597,52.604599,46.225899],[114.025002,87.673302,58.9818],[66.192001,80.898003,55.394299],[72.113297,35.491798,30.871401],[97.804497,116.560997,73.978798],[16.7623,58.010899,58.078201],[52.608898,30.3641,42.556099],[106.881401,31.945499,46.9133],[113.484596,38.6049,49.121498],[108.6633,43.2332,46.315399],[101.216599,15.9822,46.308201],[16.6605,-16.2883,93.618698],[40.775002,-10.2288,85.276398],[23.926901,-2.5103,86.736504],[11.1691,-7.0037,99.377602],[9.5692,-34.393902,141.671997],[12.596,7.1655,88.740997],[61.180901,8.8142,76.996803],[39.719501,-28.927099,88.963799],[13.7962,-68.575699,132.057007],[15.2674,-62.32,129.688004],[14.8446,-52.6096,140.113007],[12.8917,-49.771599,144.740997],[35.604198,-71.758003,81.063904],[47.462502,-68.606102,63.369701],[38.2486,-64.730202,38.909901],[-12.8917,-49.771599,144.740997],[-13.7962,-68.575699,132.057007],[17.802099,-71.758003,81.063904],[19.1243,-69.0168,49.420101],[38.2486,-66.275597,17.776199],[12.8928,-36.703499,141.671997],[109.283997,-93.589897,27.824301],[122.117996,-36.8894,35.025002],[67.7668,-30.197001,78.417801],[33.180698,101.851997,25.3186],[9.4063,-35.589802,150.722],[-9.5692,-34.393902,141.671997],[-9.4063,-35.589802,150.722],[11.4565,-37.899399,150.722],[-12.596,7.1655,88.740997],[-11.1691,-7.0037,99.377602],[70.236504,62.836201,-3.9475],[47.263401,54.293999,-27.414801],[28.7302,91.731102,-24.972601],[69.167603,6.5862,-12.7757],[28.7302,49.1003,-48.3596],[31.903,5.692,-47.821999],[35.075802,-34.432899,-16.280899],[115.284103,48.681499,48.684101],[110.842796,28.4821,49.176201],[-19.1243,-69.0168,49.420101],[-38.2486,-66.275597,17.776199],[-111.024597,52.604599,46.225899],[-72.113297,35.491798,30.871401],[-66.192001,80.898003,55.394299],[-114.025002,87.673302,58.9818],[-97.804497,116.560997,73.978798],[-52.608898,30.3641,42.556099],[-16.7623,58.010899,58.078201],[-106.881401,31.945499,46.9133],[-108.6633,43.2332,46.315399],[-113.484596,38.6049,49.121498],[-101.216599,15.9822,46.308201],[-16.6605,-16.2883,93.618698],[-23.926901,-2.5103,86.736504],[-40.775002,-10.2288,85.276398],[-61.180901,8.8142,76.996803],[-39.719501,-28.927099,88.963799],[-14.8446,-52.6096,140.113007],[-15.2674,-62.32,129.688004],[-47.462502,-68.606102,63.369701],[-35.604198,-71.758003,81.063904],[-38.2486,-64.730202,38.909901],[-17.802099,-71.758003,81.063904],[-12.8928,-36.703499,141.671997],[-67.7668,-30.197001,78.417801],[-122.117996,-36.8894,35.025002],[-109.283997,-93.589897,27.824301],[-33.180698,101.851997,25.3186],[-11.4565,-37.899399,150.722],[-70.236504,62.836201,-3.9475],[-28.7302,91.731102,-24.972601],[-47.263401,54.293999,-27.414801],[-69.167603,6.5862,-12.7757],[-28.7302,49.1003,-48.3596],[-31.903,5.692,-47.821999],[-35.075802,-34.432899,-16.280899],[-115.284103,48.681499,48.684101],[-110.842796,28.4821,49.176201]]}'),fox_namespaceObject=JSON.parse('{"chunks":[{"color":[102,24,0],"faces":[[2,3,1],[1,3,4],[5,1,4],[6,7,61],[6,61,8],[15,20,12],[15,9,19],[19,20,15],[1,5,0],[1,0,2],[31,30,32],[30,33,32],[34,33,30],[35,37,60],[35,60,36],[44,41,49],[44,48,38],[48,44,49],[30,29,34],[30,31,29],[12,20,49],[12,49,41],[20,19,48],[20,48,49],[19,9,38],[19,38,48]],"materialName":"model:model1:brown"},{"color":[227,72,7],"faces":[[9,6,63],[17,28,13],[13,16,17],[8,65,10],[27,7,59],[63,8,10],[18,2,21],[2,0,21],[21,22,23],[24,22,21],[21,5,24],[14,16,13],[25,16,14],[16,24,17],[25,22,24],[16,25,24],[17,24,5],[0,5,21],[61,27,8],[62,37,35],[42,46,45],[46,42,57],[37,64,56],[56,36,60],[37,62,39],[47,50,31],[31,50,29],[50,52,51],[53,50,51],[50,53,34],[43,42,45],[45,54,43],[53,45,46],[54,53,51],[54,45,53],[53,46,34],[29,50,34],[36,56,58],[23,22,51],[23,51,52],[22,25,54],[22,54,51],[25,14,43],[25,43,54],[56,60,37],[7,27,61],[38,62,35],[8,63,6],[37,39,64],[8,27,65]],"materialName":"model:model1:orange_dark"},{"color":[255,92,22],"faces":[[27,59,4],[65,3,10],[3,2,18],[23,18,21],[27,4,3],[28,15,13],[56,32,33],[56,64,32],[32,47,31],[52,50,47],[56,33,58],[57,42,44],[18,23,52],[18,52,47],[32,64,39],[27,3,65]],"materialName":"model:model1:orange_mid"},{"color":[192,196,205],"faces":[[26,13,11],[14,13,26],[43,55,42],[55,40,42],[14,26,55],[14,55,43],[26,11,40],[26,40,55],[11,12,41],[11,41,40]],"materialName":"model:model1:white_underside"},{"color":[255,141,93],"faces":[[17,59,7],[17,7,28],[28,9,15],[9,28,6],[28,7,6],[58,34,46],[58,46,57],[58,57,36],[57,44,38],[38,35,57],[36,57,35],[62,63,10],[62,10,39],[10,3,32],[10,32,39],[3,18,47],[3,47,32],[59,5,4],[34,58,33],[5,59,17],[38,9,63],[38,63,62]],"materialName":"model:model1:pasted__orange_bright_alt"},{"color":[231,235,246],"faces":[[15,12,11],[15,11,13],[44,42,40],[44,40,41]],"materialName":"model:model1:white_side"}],"positions":[[11.086484,5.960324999999999,2.77823],[6.465275,4.255375000000001,1.88451],[9.594237,11.702960999999998,4.818539],[2.466232,4.250507000000001,6.037715],[6.464263,1.4749859999999995,3.628665],[9.605342,1.4489300000000007,0.910938],[2.231848,-2.4387,8.109403],[4.922223,-1.7745820000000005,6.462612],[2.730904,-0.9981170000000006,8.231533],[0.93571,-5.683305,13.898631],[1.826048,0.1982759999999999,8.967493],[1.258694,-9.521664999999999,11.713494],[1.255813,-7.606733,14.061978],[4.829895,-7.400282,5.474004],[4.015327,-7.042688,0.703314],[1.612633,-6.389058,13.879456],[9.587111,-8.813012,-0.560606],[11.053112,-3.933592,1.23187],[2.146133,7.2576350000000005,2.344184],[0.566381,-6.040558,14.725849],[1.08419,-6.719231000000001,14.706674],[5.171019,4.21175,-3.034384],[2.0921,2.645106,-5.246524],[1.66333,6.2937319999999985,-1.261715],[7.22446,0.4266179999999995,-1.816326],[2.34563,-2.4331899999999997,-5.660416],[1.060229,-9.526682000000001,3.893901],[4.81298,0.19828200000000074,7.707912],[4.82989,-4.000793,8.547805],[-11.086484,5.960324999999999,2.77823],[-6.465275,4.255375000000001,1.88451],[-9.594237,11.702960999999998,4.818539],[-2.466232,4.250507000000001,6.037715],[-6.464263,1.4749859999999995,3.628665],[-9.605342,1.4489300000000007,0.910938],[-2.231848,-2.4387,8.109403],[-4.922223,-1.7745820000000005,6.462612],[-2.730904,-0.9981170000000006,8.231533],[-0.93571,-5.683305,13.898631],[-1.826048,0.1982759999999999,8.967493],[-1.258695,-9.521664999999999,11.713494],[-1.255813,-7.606733,14.061978],[-4.829895,-7.400282,5.474004],[-4.015327,-7.042687,0.703314],[-1.612633,-6.389058,13.879456],[-9.587111,-8.813012,-0.560606],[-11.053112,-3.933592,1.23187],[-2.146133,7.2576350000000005,2.344184],[-0.566381,-6.040558,14.725849],[-1.08419,-6.719231000000001,14.706674],[-5.171019,4.21175,-3.034384],[-2.0921,2.645106,-5.246524],[-1.66333,6.2937319999999985,-1.261715],[-7.22446,0.4266179999999995,-1.816326],[-2.34563,-2.4331899999999997,-5.660416],[-1.060229,-9.526682000000001,3.893901],[-4.81298,0.19828200000000074,7.707912],[-4.82989,-4.000793,8.547805],[-6.599504,-1.3817730000000008,5.348948],[6.599504,-1.3817730000000008,5.348948],[-4.135162,-0.9990760000000005,7.580709],[4.135162,-0.9990760000000005,7.580709],[-1.551688,-1.8464950000000009,9.58765],[1.551688,-1.8464950000000009,9.58765],[-3.089554,0.19827800000000018,8.422374],[3.089554,0.19827800000000018,8.422374]]}');var process=__webpack_require__("./node_modules/process/browser.js"),assetList={main:{foxMeshJson:fox_namespaceObject},beta:{foxMeshJson:void 0},flask:{foxMeshJson:flask_mascot_namespaceObject}};function isBeta(){return"beta"===process.env.METAMASK_BUILD_TYPE}function isFlask(){return"flask"===process.env.METAMASK_BUILD_TYPE}function getBuildSpecificAsset(assetName){var buildType=process.env.METAMASK_BUILD_TYPE;return assetList[buildType]&&Object.keys(assetList[buildType]).includes(assetName)?assetList[buildType][assetName]:(console.error('Cannot find asset "'.concat(assetName,'" for build "').concat(buildType,'", returning main build asset.')),assetList.main[assetName])}},"./ui/pages/bridge/prepare/bridge-transaction-settings-modal.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{s:()=>BridgeTransactionSettingsModal});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),react_redux__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react-redux/es/index.js"),_metamask_bridge_controller__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/@metamask/bridge-controller/dist/constants/bridge.mjs"),_components_component_library__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./ui/components/component-library/index.ts"),_hooks_useI18nContext__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./ui/hooks/useI18nContext.js"),_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./ui/helpers/constants/design-system.ts"),_ducks_bridge_selectors__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./ui/ducks/bridge/selectors.ts"),_ducks_bridge_actions__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./ui/ducks/bridge/actions.ts"),_hooks_bridge_useCrossChainSwapsEventTracker__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./ui/hooks/bridge/useCrossChainSwapsEventTracker.ts"),_shared_constants_metametrics__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./shared/constants/metametrics.ts"),_layout__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./ui/pages/bridge/layout/index.tsx");function _array_like_to_array(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _array_with_holes(arr){if(Array.isArray(arr))return arr}function _iterable_to_array_limit(arr,i){var _s,_e,_i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}function _non_iterable_rest(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _sliced_to_array(arr,i){return _array_with_holes(arr)||_iterable_to_array_limit(arr,i)||_unsupported_iterable_to_array(arr,i)||_non_iterable_rest()}function _unsupported_iterable_to_array(o,minLen){if(o){if("string"==typeof o)return _array_like_to_array(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if("Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _array_like_to_array(o,minLen)}}var HARDCODED_SLIPPAGE_OPTIONS=[_metamask_bridge_controller__WEBPACK_IMPORTED_MODULE_10__._z,3],BridgeTransactionSettingsModal=function(param){var onClose=param.onClose,isOpen=param.isOpen,t=(0,_hooks_useI18nContext__WEBPACK_IMPORTED_MODULE_3__.P)(),trackCrossChainSwapsEvent=(0,_hooks_bridge_useCrossChainSwapsEventTracker__WEBPACK_IMPORTED_MODULE_7__.p)(),dispatch=(0,react_redux__WEBPACK_IMPORTED_MODULE_1__.wA)(),slippage=(0,react_redux__WEBPACK_IMPORTED_MODULE_1__.d4)(_ducks_bridge_selectors__WEBPACK_IMPORTED_MODULE_5__.OL),_useState=_sliced_to_array((0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(slippage),2),localSlippage=_useState[0],setLocalSlippage=_useState[1],_useState1=_sliced_to_array((0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(slippage&&!HARDCODED_SLIPPAGE_OPTIONS.includes(slippage)?slippage.toString():void 0),2),customSlippage=_useState1[0],setCustomSlippage=_useState1[1],_useState2=_sliced_to_array((0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(!0),2),showCustomButton=_useState2[0],setShowCustomButton=_useState2[1],notificationConfig=function(){if(!customSlippage)return null;var slippageValue=Number(customSlippage.replace(",","."));return slippageValue<.5?{severity:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_4__.oC.WARNING,text:t("swapSlippageLowDescription",[slippageValue]),title:t("swapSlippageLowTitle")}:null}();return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_component_library__WEBPACK_IMPORTED_MODULE_2__.aF,{isOpen:isOpen,onClose:onClose,className:"bridge-settings-modal"},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_component_library__WEBPACK_IMPORTED_MODULE_2__.mH,null),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_component_library__WEBPACK_IMPORTED_MODULE_2__.$m,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_component_library__WEBPACK_IMPORTED_MODULE_2__.rQ,{onClose:onClose},t("transactionSettings")),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_layout__WEBPACK_IMPORTED_MODULE_9__.VP,{gap:3,padding:4},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_layout__WEBPACK_IMPORTED_MODULE_9__.fI,{gap:1,justifyContent:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_4__.A9.flexStart},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_component_library__WEBPACK_IMPORTED_MODULE_2__.EY,null,t("swapsMaxSlippage")),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_layout__WEBPACK_IMPORTED_MODULE_9__.m_,{position:_components_component_library__WEBPACK_IMPORTED_MODULE_2__.$x.Top,iconName:_components_component_library__WEBPACK_IMPORTED_MODULE_2__.$M.Info,style:{zIndex:1051}},t("swapSlippageTooltip"))),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_layout__WEBPACK_IMPORTED_MODULE_9__.fI,{gap:2,justifyContent:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_4__.A9.flexStart},HARDCODED_SLIPPAGE_OPTIONS.map(function(hardcodedSlippage){return react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_component_library__WEBPACK_IMPORTED_MODULE_2__.$n,{key:hardcodedSlippage,size:_components_component_library__WEBPACK_IMPORTED_MODULE_2__.Mp.Sm,onClick:function(e){e.preventDefault(),e.stopPropagation(),setLocalSlippage(hardcodedSlippage),setCustomSlippage(void 0)},variant:_components_component_library__WEBPACK_IMPORTED_MODULE_2__.Ak.Secondary,borderColor:localSlippage===hardcodedSlippage&&showCustomButton?_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_4__.cG.primaryDefault:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_4__.cG.borderDefault,borderWidth:localSlippage===hardcodedSlippage&&showCustomButton?2:1,backgroundColor:localSlippage===hardcodedSlippage&&showCustomButton?_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_4__.i0.primaryMuted:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_4__.i0.backgroundDefault},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_component_library__WEBPACK_IMPORTED_MODULE_2__.EY,{color:localSlippage===hardcodedSlippage&&showCustomButton?_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_4__.r7.primaryDefault:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_4__.r7.textDefault},hardcodedSlippage,"%"))}),showCustomButton&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_component_library__WEBPACK_IMPORTED_MODULE_2__.$n,{size:_components_component_library__WEBPACK_IMPORTED_MODULE_2__.Mp.Sm,variant:_components_component_library__WEBPACK_IMPORTED_MODULE_2__.Ak.Secondary,borderColor:void 0===customSlippage?_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_4__.cG.borderDefault:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_4__.cG.primaryDefault,borderWidth:void 0===customSlippage?1:2,backgroundColor:void 0===customSlippage?_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_4__.i0.backgroundDefault:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_4__.i0.primaryMuted,onClick:function(e){e.preventDefault(),e.stopPropagation(),setShowCustomButton(!1)}},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_component_library__WEBPACK_IMPORTED_MODULE_2__.EY,{color:void 0===customSlippage?_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_4__.r7.textDefault:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_4__.r7.primaryDefault},void 0===customSlippage?t("customSlippage"):"".concat(customSlippage,"%"))),!showCustomButton&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_component_library__WEBPACK_IMPORTED_MODULE_2__.A_,{borderColor:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_4__.cG.primaryDefault,borderWidth:2,borderRadius:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_4__.Z6.pill,type:_components_component_library__WEBPACK_IMPORTED_MODULE_2__.ux.Text,value:customSlippage,onChange:function(e){var value=e.target.value;(""===value||RegExp("^\\d*[.,]?\\d*$","u").test(value))&&(setLocalSlippage(void 0),setCustomSlippage(value))},autoFocus:!0,onBlur:function(){setShowCustomButton(!0)},onFocus:function(){setShowCustomButton(!1)},endAccessory:react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_component_library__WEBPACK_IMPORTED_MODULE_2__.EY,{variant:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_4__.J3.bodyMd},"%")})),notificationConfig&&react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_component_library__WEBPACK_IMPORTED_MODULE_2__.az,{marginTop:5},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_component_library__WEBPACK_IMPORTED_MODULE_2__.b8,{severity:notificationConfig.severity,title:notificationConfig.title,titleProps:{"data-testid":"swaps-banner-title"}},react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_component_library__WEBPACK_IMPORTED_MODULE_2__.EY,null,notificationConfig.text)))),react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_component_library__WEBPACK_IMPORTED_MODULE_2__.jl,null,react__WEBPACK_IMPORTED_MODULE_0__.createElement(_components_component_library__WEBPACK_IMPORTED_MODULE_2__.$$,{width:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_4__.Zf.Full,size:_components_component_library__WEBPACK_IMPORTED_MODULE_2__.w9.Md,variant:_helpers_constants_design_system__WEBPACK_IMPORTED_MODULE_4__.J3.bodyMd,disabled:void 0!==customSlippage&&Number(customSlippage.replace(",","."))===slippage||void 0!==localSlippage&&localSlippage===slippage,onClick:function(){var newSlippage=null!=localSlippage?localSlippage:Number(null==customSlippage?void 0:customSlippage.replace(",","."));newSlippage&&(trackCrossChainSwapsEvent({event:_shared_constants_metametrics__WEBPACK_IMPORTED_MODULE_8__.gP.InputChanged,properties:{input:"slippage",value:newSlippage.toString()}}),dispatch((0,_ducks_bridge_actions__WEBPACK_IMPORTED_MODULE_6__.i3)(newSlippage)),onClose())}},t("submit")))))};try{BridgeTransactionSettingsModal.displayName="BridgeTransactionSettingsModal",BridgeTransactionSettingsModal.__docgenInfo={description:"",displayName:"BridgeTransactionSettingsModal",props:{isOpen:{defaultValue:null,description:"If the modal is open or not",name:"isOpen",required:!0,type:{name:"boolean"}},onClose:{defaultValue:null,description:"Fires when the modal is closed",name:"onClose",required:!0,type:{name:"() => void"}},className:{defaultValue:null,description:"Additional className to be applied to the modal",name:"className",required:!1,type:{name:"string"}},isClosedOnOutsideClick:{defaultValue:{value:"true"},description:"isClosedOnOutsideClick enables the ability to close the modal when the user clicks outside of the modal",name:"isClosedOnOutsideClick",required:!1,type:{name:"boolean"}},isClosedOnEscapeKey:{defaultValue:{value:"true"},description:"closeOnEscape enables the ability to close the modal when the user presses the escape key\nIf this is disabled there should be a close button in the modal or allow keyboard only users to close the modal with a button that is accessible via the tab key",name:"isClosedOnEscapeKey",required:!1,type:{name:"boolean"}},autoFocus:{defaultValue:{value:"false"},description:"If `true`, the first focusable element within the `children`\nwill auto-focused once `ModalFocus` mounts",name:"autoFocus",required:!1,type:{name:"boolean"}},initialFocusRef:{defaultValue:null,description:"The `ref` of the element to receive focus initially",name:"initialFocusRef",required:!1,type:{name:"RefObject<FocusableElement>"}},finalFocusRef:{defaultValue:null,description:"The `ref` of the element to return focus to when `ModalFocus`\nunmounts",name:"finalFocusRef",required:!1,type:{name:"RefObject<FocusableElement>"}},restoreFocus:{defaultValue:{value:"false"},description:"If `true`, focus will be restored to the element that\ntriggered the `ModalFocus` once it unmounts",name:"restoreFocus",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["ui/pages/bridge/prepare/bridge-transaction-settings-modal.tsx#BridgeTransactionSettingsModal"]={docgenInfo:BridgeTransactionSettingsModal.__docgenInfo,name:"BridgeTransactionSettingsModal",path:"ui/pages/bridge/prepare/bridge-transaction-settings-modal.tsx#BridgeTransactionSettingsModal"})}catch(__react_docgen_typescript_loader_error){}},"./ui/pages/bridge/prepare/components/destination-account-picker.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{a:()=>DestinationAccountPicker});var react=__webpack_require__("./node_modules/react/index.js"),es=__webpack_require__("./node_modules/react-redux/es/index.js"),component_library=__webpack_require__("./ui/components/component-library/index.ts"),selectors=__webpack_require__("./ui/selectors/index.js"),design_system=__webpack_require__("./ui/helpers/constants/design-system.ts"),translate=__webpack_require__("./app/scripts/translate.ts"),address=__webpack_require__("./app/scripts/lib/multichain/address.ts"),domains=__webpack_require__("./ui/ducks/domains.js"),multichain_accounts=__webpack_require__("./shared/lib/multichain/accounts.ts"),useExternalAccountResolution=function(param){var searchQuery=param.searchQuery,isDestinationSolana=param.isDestinationSolana,accounts=param.accounts,dispatch=(0,es.wA)(),domainResolutionsFromStore=(0,es.d4)(domains.oE);(0,react.useEffect)(function(){dispatch((0,domains.DG)())},[dispatch]);var isValidAddress=(0,react.useMemo)(function(){var trimmedQuery=searchQuery.trim();return!!trimmedQuery&&(isDestinationSolana?(0,multichain_accounts.bA)(trimmedQuery):(0,address.Ub)(trimmedQuery))},[searchQuery,isDestinationSolana]),isValidEnsName=(0,react.useMemo)(function(){if(isDestinationSolana)return!1;var trimmedQuery=searchQuery.trim();return!!trimmedQuery&&trimmedQuery.endsWith(".eth")},[searchQuery,isDestinationSolana]);(0,react.useEffect)(function(){isValidEnsName?dispatch((0,domains.g9)(searchQuery.trim())):dispatch((0,domains.Ae)())},[dispatch,isValidEnsName,searchQuery]);var externalAccount=(0,react.useMemo)(function(){var domainResolutions=domainResolutionsFromStore||[];if(!isValidAddress&&!isValidEnsName)return null;if(isValidEnsName&&domainResolutions.length>0){var resolvedAddress=domainResolutions[0].resolvedAddress,ensName=searchQuery.trim();return accounts.some(function(account){return account.address.toLowerCase()===resolvedAddress.toLowerCase()})?null:{address:resolvedAddress,metadata:{name:ensName},isExternal:!0}}if(isValidAddress){var address=searchQuery.trim();return accounts.some(function(account){return account.address.toLowerCase()===address.toLowerCase()})?null:{address:address,metadata:{name:address},isExternal:!0}}return null},[accounts,isValidAddress,isValidEnsName,searchQuery,domainResolutionsFromStore]);return{isValidAddress:isValidAddress,isValidEnsName:isValidEnsName,externalAccount:externalAccount}},classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),useI18nContext=__webpack_require__("./ui/hooks/useI18nContext.js");let destination_selected_account_list_item=react.memo(function(param){var account=param.account,selected=param.selected,onClick=param.onClick,useBlockie=(0,es.d4)(selectors.bNi),t=(0,useI18nContext.P)(),isExternalAccount="isExternal"in account&&account.isExternal;return react.createElement(component_library.az,{display:design_system.nl.Flex,padding:4,backgroundColor:selected?design_system.i0.primaryMuted:design_system.i0.transparent,className:classnames_default()("multichain-account-list-item",{"multichain-account-list-item--selected":selected}),onClick:onClick,alignItems:design_system.k2.center,style:{pointerEvents:"none"}},react.createElement(component_library.vs,{borderColor:design_system.cG.transparent,size:component_library.oG.Md,address:account.address,variant:useBlockie?component_library.Uj.Blockies:component_library.Uj.Jazzicon,marginInlineEnd:2}),react.createElement(component_library.az,{display:design_system.nl.Flex,style:{flexDirection:"column"}},react.createElement(component_library.EY,{variant:design_system.J3.bodySmMedium,color:design_system.r7.textAlternative,"data-testid":"account-list-address",marginBottom:1},t("destinationAccountPickerReceiveAt")),react.createElement(component_library.EY,{variant:design_system.J3.bodyMdMedium,marginBottom:1},isExternalAccount?account.metadata.name.endsWith(".eth")?account.metadata.name:t("externalAccount"):account.metadata.name)))});try{destinationselectedaccountlistitem.displayName="destinationselectedaccountlistitem",destinationselectedaccountlistitem.__docgenInfo={description:"",displayName:"destinationselectedaccountlistitem",props:{account:{defaultValue:null,description:"",name:"account",required:!0,type:{name:"DestinationAccount"}},selected:{defaultValue:null,description:"",name:"selected",required:!0,type:{name:"boolean"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"(() => void)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["ui/pages/bridge/prepare/components/destination-selected-account-list-item.tsx#destinationselectedaccountlistitem"]={docgenInfo:destinationselectedaccountlistitem.__docgenInfo,name:"destinationselectedaccountlistitem",path:"ui/pages/bridge/prepare/components/destination-selected-account-list-item.tsx#destinationselectedaccountlistitem"})}catch(__react_docgen_typescript_loader_error){}var util=__webpack_require__("./ui/helpers/utils/util.js"),useMultichainAccountTotalFiatBalance=__webpack_require__("./ui/hooks/useMultichainAccountTotalFiatBalance.ts"),useGetFormattedTokensPerChain=__webpack_require__("./ui/hooks/useGetFormattedTokensPerChain.ts"),useAccountTotalCrossChainFiatBalance=__webpack_require__("./ui/hooks/useAccountTotalCrossChainFiatBalance.ts"),user_preferenced_currency_display_component=__webpack_require__("./ui/components/app/user-preferenced-currency-display/user-preferenced-currency-display.component.js"),common=__webpack_require__("./ui/helpers/constants/common.ts"),useMultichainSelector=__webpack_require__("./ui/hooks/useMultichainSelector.ts"),multichain=__webpack_require__("./ui/selectors/multichain.ts");let destination_account_list_item=react.memo(function(param){var balanceToTranslate,account=param.account,selected=param.selected,onClick=param.onClick,useBlockie=(0,es.d4)(selectors.bNi),shouldHideZeroBalanceTokens=(0,es.d4)(selectors.wri),isTokenNetworkFilterEqualCurrentNetwork=(0,es.d4)(selectors.Xn),allChainIDs=(0,es.d4)(selectors.Kxn),isEvmNetwork=(0,useMultichainSelector.t)(multichain.X3,account).isEvmNetwork,isTestnet=(0,useMultichainSelector.t)(multichain.Ih,account),isMainnet=!isTestnet,shouldShowFiat=(0,useMultichainSelector.t)(multichain.J7,account),showFiatInTestnets=(0,es.d4)(selectors.fXq),showFiat=shouldShowFiat&&(isMainnet||isTestnet&&showFiatInTestnets),primaryTokenImage=(0,useMultichainSelector.t)(multichain.KF,account),nativeCurrency=(0,useMultichainSelector.t)(multichain.zz,account),accountTotalFiatBalances=(0,useMultichainAccountTotalFiatBalance.j)(account),formattedTokensWithBalancesPerChain=(0,useGetFormattedTokensPerChain.O)(account,shouldHideZeroBalanceTokens,isTokenNetworkFilterEqualCurrentNetwork,allChainIDs).formattedTokensWithBalancesPerChain,totalFiatBalance=(0,useAccountTotalCrossChainFiatBalance.k)(account,formattedTokensWithBalancesPerChain).totalFiatBalance;return balanceToTranslate=isEvmNetwork?!shouldShowFiat||isTestnet?account.balance:totalFiatBalance:accountTotalFiatBalances.totalBalance,react.createElement(component_library.az,{display:design_system.nl.Flex,padding:4,backgroundColor:selected?design_system.i0.primaryMuted:design_system.i0.transparent,className:classnames_default()("multichain-account-list-item",{"multichain-account-list-item--selected":selected}),onClick:onClick,alignItems:design_system.k2.center},react.createElement(component_library.vs,{borderColor:design_system.cG.transparent,size:component_library.oG.Md,address:account.address,variant:useBlockie?component_library.Uj.Blockies:component_library.Uj.Jazzicon,marginInlineEnd:2}),react.createElement(component_library.az,{display:design_system.nl.Flex,flexDirection:design_system.bo.Column,style:{flex:1}},react.createElement(component_library.az,{display:design_system.nl.Flex,justifyContent:design_system.A9.spaceBetween},react.createElement(component_library.EY,{variant:design_system.J3.bodyMdMedium},account.metadata.name),react.createElement(component_library.az,{display:design_system.nl.Flex,alignItems:design_system.k2.center,justifyContent:design_system.A9.flexEnd,gap:1},react.createElement(component_library.EY,{as:"div",display:design_system.nl.Flex,flexDirection:design_system.bo.Row,alignItems:design_system.k2.center,justifyContent:design_system.A9.flexEnd,ellipsis:!0,textAlign:design_system.nO.End},react.createElement(user_preferenced_currency_display_component.A,{ethNumberOfDecimals:3,value:balanceToTranslate,type:common.jd,showFiat:showFiat,isAggregatedFiatOverviewBalance:showFiat,hideLabel:!0,"data-testid":"first-currency-display"})))),react.createElement(component_library.az,{display:design_system.nl.Flex,justifyContent:design_system.A9.spaceBetween,alignItems:design_system.k2.center},react.createElement(component_library.EY,{variant:design_system.J3.bodySm,color:design_system.r7.textAlternative,"data-testid":"account-list-address"},(0,util.Wr)((0,address.Nf)(account.address))),react.createElement(component_library.az,{display:design_system.nl.Flex,gap:2},react.createElement(component_library.hQ,{src:primaryTokenImage,name:nativeCurrency,size:component_library.gh.Xs,borderColor:design_system.cG.borderDefault})))))});try{destinationaccountlistitem.displayName="destinationaccountlistitem",destinationaccountlistitem.__docgenInfo={description:"",displayName:"destinationaccountlistitem",props:{account:{defaultValue:null,description:"",name:"account",required:!0,type:{name:'{ type: "eip155:eoa" | "eip155:erc4337" | "bip122:p2wpkh" | "solana:data-account"; id: string; options: Record<string, Json>; metadata: { name: string; importTime: number; keyring: { ...; }; nameLastUpdatedAt?: number | undefined; snap?: { ...; } | undefined; lastSelected?: number | undefined; }; address: string; sc...'}},selected:{defaultValue:null,description:"",name:"selected",required:!0,type:{name:"boolean"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"(() => void)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["ui/pages/bridge/prepare/components/destination-account-list-item.tsx#destinationaccountlistitem"]={docgenInfo:destinationaccountlistitem.__docgenInfo,name:"destinationaccountlistitem",path:"ui/pages/bridge/prepare/components/destination-account-list-item.tsx#destinationaccountlistitem"})}catch(__react_docgen_typescript_loader_error){}var ExternalAccountListItem=function(param){var account=param.account,selected=param.selected,onClick=param.onClick,useBlockie=(0,es.d4)(selectors.bNi),t=(0,useI18nContext.P)(),isEnsName=account.metadata.name.endsWith(".eth");return react.createElement(component_library.az,{display:design_system.nl.Flex,padding:4,backgroundColor:design_system.i0.transparent,className:classnames_default()("multichain-account-list-item",{"multichain-account-list-item--selected":selected}),onClick:onClick,alignItems:design_system.k2.center,justifyContent:design_system.A9.spaceBetween},react.createElement(component_library.az,{display:design_system.nl.Flex,alignItems:design_system.k2.center},react.createElement(component_library.vs,{borderColor:design_system.cG.transparent,size:component_library.oG.Md,address:account.address,variant:useBlockie?component_library.Uj.Blockies:component_library.Uj.Jazzicon,marginInlineEnd:2}),react.createElement(component_library.az,{display:design_system.nl.Flex,flexDirection:design_system.bo.Column,style:{maxWidth:"140px",overflow:"hidden"}},react.createElement(component_library.EY,{variant:design_system.J3.bodyMdMedium,marginBottom:1,style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},isEnsName?account.metadata.name:t("externalAccount")),react.createElement(component_library.EY,{variant:design_system.J3.bodySm,color:design_system.r7.textAlternative,"data-testid":"account-list-address",style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},(0,util.Wr)((0,address.Nf)(account.address))))),isEnsName&&react.createElement(component_library.vw,{label:t("externalAccount"),paddingLeft:2,paddingRight:2,labelProps:{variant:design_system.J3.bodyXs}}))};try{ExternalAccountListItem.displayName="ExternalAccountListItem",ExternalAccountListItem.__docgenInfo={description:"",displayName:"ExternalAccountListItem",props:{account:{defaultValue:null,description:"",name:"account",required:!0,type:{name:"ExternalAccount"}},selected:{defaultValue:null,description:"",name:"selected",required:!0,type:{name:"boolean"}},onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"(() => void)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["ui/pages/bridge/prepare/components/external-account-list-item.tsx#ExternalAccountListItem"]={docgenInfo:ExternalAccountListItem.__docgenInfo,name:"ExternalAccountListItem",path:"ui/pages/bridge/prepare/components/external-account-list-item.tsx#ExternalAccountListItem"})}catch(__react_docgen_typescript_loader_error){}function _array_like_to_array(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _array_with_holes(arr){if(Array.isArray(arr))return arr}function _iterable_to_array_limit(arr,i){var _s,_e,_i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}function _non_iterable_rest(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _sliced_to_array(arr,i){return _array_with_holes(arr)||_iterable_to_array_limit(arr,i)||_unsupported_iterable_to_array(arr,i)||_non_iterable_rest()}function _unsupported_iterable_to_array(o,minLen){if(o){if("string"==typeof o)return _array_like_to_array(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if("Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _array_like_to_array(o,minLen)}}var DestinationAccountPicker=function(param){var onAccountSelect=param.onAccountSelect,selectedSwapToAccount=param.selectedSwapToAccount,isDestinationSolana=param.isDestinationSolana,_useState=_sliced_to_array((0,react.useState)(""),2),searchQuery=_useState[0],setSearchQuery=_useState[1],selectedAccount=(0,es.d4)(selectors._rF),accounts=(0,es.d4)(selectors.atg),externalAccount=useExternalAccountResolution({searchQuery:searchQuery,isDestinationSolana:isDestinationSolana,accounts:accounts}).externalAccount,filteredAccounts=(0,react.useMemo)(function(){return accounts.filter(function(account){var matchesSearchByName=account.metadata.name.toLowerCase().includes(searchQuery.toLowerCase()),matchesSearchByAddress=account.address.toLowerCase().includes(searchQuery.toLowerCase()),matchesChain=isDestinationSolana?(0,selectors.Qj6)(account):!(0,selectors.Qj6)(account);return(matchesSearchByName||matchesSearchByAddress)&&matchesChain})},[accounts,isDestinationSolana,searchQuery]);return selectedSwapToAccount?react.createElement(component_library.az,{display:design_system.nl.Flex,flexDirection:design_system.bo.Row,alignItems:design_system.k2.center,justifyContent:design_system.A9.spaceBetween,width:design_system.Zf.Full,className:"swap-to-account-picker",backgroundColor:design_system.i0.backgroundDefault,style:{height:"70px",borderRadius:"8px",boxShadow:"var(--shadow-size-sm) var(--color-shadow-default)"}},react.createElement(component_library.az,{className:"destination-account-picker__selected",width:design_system.Zf.Full},react.createElement(destination_selected_account_list_item,{account:selectedSwapToAccount,isSelected:selectedSwapToAccount.id===(null==selectedAccount?void 0:selectedAccount.id),showOptions:!1,disableHover:!0})),react.createElement(component_library.az,{className:"deselect-button-container",paddingRight:5},react.createElement(component_library.$n,{onClick:function(){return onAccountSelect(null)},"aria-label":"Deselect account",variant:component_library.Ak.Link,size:component_library.Mp.Sm,className:"deselect-button",style:{padding:"5px",color:"var(--color-icon-alternative)",textDecoration:"none"}},""))):react.createElement(component_library.az,{display:design_system.nl.Flex,flexDirection:design_system.bo.Column,width:design_system.Zf.Full,className:"destination-account-picker",backgroundColor:design_system.i0.backgroundDefault,style:{borderRadius:"8px",position:"relative"}},react.createElement(component_library.az,{className:"search-container",width:design_system.Zf.Full,display:design_system.nl.Flex,alignItems:design_system.k2.center,justifyContent:design_system.A9.center,backgroundColor:design_system.i0.backgroundDefault,style:{height:"50px",borderBottomWidth:"1px",borderBottomStyle:"solid",borderBottomColor:"#B7BBC866",borderRadius:"8px 8px 0 0",boxShadow:"var(--shadow-size-sm) var(--color-shadow-default)"}},react.createElement(component_library.A_,{placeholder:isDestinationSolana?(0,translate.t)("destinationAccountPickerSearchPlaceholderToSolana"):(0,translate.t)("destinationAccountPickerSearchPlaceholderToMainnet"),value:searchQuery,onChange:function(e){return setSearchQuery(e.target.value)},clearButtonOnClick:function(){return setSearchQuery("")},className:"text-field-search",style:{width:"98%",borderRadius:0,borderWidth:0,color:"var(--color-text-alternative)"}})),react.createElement(component_library.az,{style:{height:"20px"}}),react.createElement(component_library.az,{className:"destination-account-picker__list",backgroundColor:design_system.i0.backgroundDefault,style:{position:"absolute",top:"50px",left:0,right:0,maxHeight:"240px",overflowY:"auto",borderRadius:"0 0 8px 8px",zIndex:1e3,boxShadow:"var(--shadow-size-sm) var(--color-shadow-default)"}},filteredAccounts.map(function(account){return react.createElement(destination_account_list_item,{key:account.id,account:account,onClick:function(){return onAccountSelect(account)},isSelected:account.id===(null==selectedSwapToAccount?void 0:selectedSwapToAccount.id),showOptions:!1})}),externalAccount&&react.createElement(ExternalAccountListItem,{key:"external-account",account:externalAccount,selected:!!(selectedSwapToAccount&&selectedSwapToAccount.address===externalAccount.address),onClick:function(){return onAccountSelect(externalAccount)}}),0===filteredAccounts.length&&!externalAccount&&react.createElement(component_library.az,{display:design_system.nl.Flex,style:{minHeight:"79px"},width:design_system.Zf.Full,height:design_system.Zf.Full,justifyContent:design_system.A9.center,alignItems:design_system.k2.center},react.createElement(component_library.EY,{textAlign:design_system.nO.Center},searchQuery?(0,translate.t)("destinationAccountPickerNoMatching"):(0,translate.t)("destinationAccountPickerNoEligible")))))};try{DestinationAccountPicker.displayName="DestinationAccountPicker",DestinationAccountPicker.__docgenInfo={description:"",displayName:"DestinationAccountPicker",props:{onAccountSelect:{defaultValue:null,description:"",name:"onAccountSelect",required:!0,type:{name:"(account: DestinationAccount | null) => void"}},selectedSwapToAccount:{defaultValue:null,description:"",name:"selectedSwapToAccount",required:!0,type:{name:"DestinationAccount | null"}},isDestinationSolana:{defaultValue:null,description:"",name:"isDestinationSolana",required:!0,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["ui/pages/bridge/prepare/components/destination-account-picker.tsx#DestinationAccountPicker"]={docgenInfo:DestinationAccountPicker.__docgenInfo,name:"DestinationAccountPicker",path:"ui/pages/bridge/prepare/components/destination-account-picker.tsx#DestinationAccountPicker"})}catch(__react_docgen_typescript_loader_error){}}}]);